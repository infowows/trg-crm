{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/WOWS_DEV/TruongGiang_CRM/TruongGiang_CRM_NextJS/trg-crm-webapp/node_modules/mongoose/lib/document.js"],"sourcesContent":["'use strict';\n\n/*!\n * Module dependencies.\n */\n\nconst DivergentArrayError = require('./error/divergentArray');\nconst EventEmitter = require('events').EventEmitter;\nconst InternalCache = require('./internal');\nconst MongooseBuffer = require('./types/buffer');\nconst MongooseError = require('./error/index');\nconst MixedSchema = require('./schema/mixed');\nconst ModifiedPathsSnapshot = require('./modifiedPathsSnapshot');\nconst ObjectExpectedError = require('./error/objectExpected');\nconst ObjectParameterError = require('./error/objectParameter');\nconst ParallelValidateError = require('./error/parallelValidate');\nconst Schema = require('./schema');\nconst StrictModeError = require('./error/strict');\nconst ValidationError = require('./error/validation');\nconst ValidatorError = require('./error/validator');\nconst $__hasIncludedChildren = require('./helpers/projection/hasIncludedChildren');\nconst applyDefaults = require('./helpers/document/applyDefaults');\nconst cleanModifiedSubpaths = require('./helpers/document/cleanModifiedSubpaths');\nconst clone = require('./helpers/clone');\nconst compile = require('./helpers/document/compile').compile;\nconst defineKey = require('./helpers/document/compile').defineKey;\nconst firstKey = require('./helpers/firstKey');\nconst flatten = require('./helpers/common').flatten;\nconst getEmbeddedDiscriminatorPath = require('./helpers/document/getEmbeddedDiscriminatorPath');\nconst getKeysInSchemaOrder = require('./helpers/schema/getKeysInSchemaOrder');\nconst getSubdocumentStrictValue = require('./helpers/schema/getSubdocumentStrictValue');\nconst handleSpreadDoc = require('./helpers/document/handleSpreadDoc');\nconst isBsonType = require('./helpers/isBsonType');\nconst isDefiningProjection = require('./helpers/projection/isDefiningProjection');\nconst isExclusive = require('./helpers/projection/isExclusive');\nconst isPathExcluded = require('./helpers/projection/isPathExcluded');\nconst inspect = require('util').inspect;\nconst internalToObjectOptions = require('./options').internalToObjectOptions;\nconst markArraySubdocsPopulated = require('./helpers/populate/markArraySubdocsPopulated');\nconst minimize = require('./helpers/minimize');\nconst mpath = require('mpath');\nconst parentPaths = require('./helpers/path/parentPaths');\nconst queryhelpers = require('./queryHelpers');\nconst utils = require('./utils');\nconst isPromise = require('./helpers/isPromise');\n\nconst deepEqual = utils.deepEqual;\nconst isMongooseObject = utils.isMongooseObject;\n\nconst arrayAtomicsBackupSymbol = require('./helpers/symbols').arrayAtomicsBackupSymbol;\nconst arrayAtomicsSymbol = require('./helpers/symbols').arrayAtomicsSymbol;\nconst documentArrayParent = require('./helpers/symbols').documentArrayParent;\nconst documentIsModified = require('./helpers/symbols').documentIsModified;\nconst documentModifiedPaths = require('./helpers/symbols').documentModifiedPaths;\nconst documentSchemaSymbol = require('./helpers/symbols').documentSchemaSymbol;\nconst getSymbol = require('./helpers/symbols').getSymbol;\nconst modelSymbol = require('./helpers/symbols').modelSymbol;\nconst populateModelSymbol = require('./helpers/symbols').populateModelSymbol;\nconst scopeSymbol = require('./helpers/symbols').scopeSymbol;\nconst schemaMixedSymbol = require('./schema/symbols').schemaMixedSymbol;\nconst getDeepestSubdocumentForPath = require('./helpers/document/getDeepestSubdocumentForPath');\nconst sessionNewDocuments = require('./helpers/symbols').sessionNewDocuments;\n\nlet DocumentArray;\nlet MongooseArray;\nlet Embedded;\n\nconst specialProperties = utils.specialProperties;\n\nconst VERSION_WHERE = 1;\nconst VERSION_INC = 2;\nconst VERSION_ALL = VERSION_WHERE | VERSION_INC;\n\n/**\n * The core Mongoose document constructor. You should not call this directly,\n * the Mongoose [Model constructor](./api/model.html#Model) calls this for you.\n *\n * @param {Object} obj the values to set\n * @param {Object} [fields] optional object containing the fields which were selected in the query returning this document and any populated paths data\n * @param {Object} [options] various configuration options for the document\n * @param {Boolean} [options.defaults=true] if `false`, skip applying default values to this document.\n * @param {Boolean} [options.skipId=false] By default, Mongoose document if one is not provided and the document's schema does not override Mongoose's default `_id`. Set `skipId` to `true` to skip this generation step.\n * @inherits NodeJS EventEmitter https://nodejs.org/api/events.html#class-eventemitter\n * @event `init`: Emitted on a document after it has been retrieved from the db and fully hydrated by Mongoose.\n * @event `save`: Emitted when the document is successfully saved\n * @api private\n */\n\nfunction Document(obj, fields, options) {\n  if (typeof options === 'boolean') {\n    throw new Error('The skipId parameter has been removed. Use { skipId: true } in the options parameter instead.');\n  }\n  options = Object.assign({}, options);\n  let skipId = options.skipId;\n\n  this.$__ = new InternalCache();\n\n  // Support `browserDocument.js` syntax\n  if (this.$__schema == null) {\n    const _schema = utils.isObject(fields) && !fields.instanceOfSchema ?\n      new Schema(fields) :\n      fields;\n\n    this.$__setSchema(_schema);\n    fields = options;\n    skipId = options.skipId;\n  }\n\n  // Avoid setting `isNew` to `true`, because it is `true` by default\n  if (options.isNew != null && options.isNew !== true) {\n    this.$isNew = options.isNew;\n  }\n\n  if (options.priorDoc != null) {\n    this.$__.priorDoc = options.priorDoc;\n  }\n\n  if (skipId) {\n    this.$__.skipId = skipId;\n  }\n\n  if (obj != null && typeof obj !== 'object') {\n    throw new ObjectParameterError(obj, 'obj', 'Document');\n  }\n\n  let defaults = true;\n  if (options.defaults !== undefined) {\n    this.$__.defaults = options.defaults;\n    defaults = options.defaults;\n  }\n\n  const schema = this.$__schema;\n\n  if (typeof fields === 'boolean' || fields === 'throw') {\n    if (fields !== true) {\n      this.$__.strictMode = fields;\n    }\n    fields = undefined;\n  } else if (schema.options.strict !== true) {\n    this.$__.strictMode = schema.options.strict;\n  }\n\n  const requiredPaths = schema.requiredPaths(true);\n  for (const path of requiredPaths) {\n    this.$__.activePaths.require(path);\n  }\n\n  let exclude = null;\n\n  // determine if this doc is a result of a query with\n  // excluded fields\n  if (utils.isPOJO(fields) && utils.hasOwnKeys(fields)) {\n    exclude = isExclusive(fields);\n    this.$__.selected = fields;\n    this.$__.exclude = exclude;\n  }\n\n  const hasIncludedChildren = exclude === false && fields ?\n    $__hasIncludedChildren(fields) :\n    null;\n\n  if (this._doc == null) {\n    this.$__buildDoc(obj, fields, skipId, exclude, hasIncludedChildren, false);\n\n    // By default, defaults get applied **before** setting initial values\n    // Re: gh-6155\n    if (defaults) {\n      applyDefaults(this, fields, exclude, hasIncludedChildren, true, null, {\n        skipParentChangeTracking: true\n      });\n    }\n  }\n  if (obj) {\n    // Skip set hooks\n    if (this.$__original_set) {\n      this.$__original_set(obj, undefined, true, options);\n    } else {\n      this.$set(obj, undefined, true, options);\n    }\n\n    if (obj instanceof Document) {\n      this.$isNew = obj.$isNew;\n    }\n  }\n\n  // Function defaults get applied **after** setting initial values so they\n  // see the full doc rather than an empty one, unless they opt out.\n  // Re: gh-3781, gh-6155\n  if (options.willInit && defaults) {\n    if (options.skipDefaults) {\n      this.$__.skipDefaults = options.skipDefaults;\n    }\n  } else if (defaults) {\n    applyDefaults(this, fields, exclude, hasIncludedChildren, false, options.skipDefaults);\n  }\n\n  if (!this.$__.strictMode && obj) {\n    const _this = this;\n    const keys = Object.keys(this._doc);\n\n    keys.forEach(function(key) {\n      // Avoid methods, virtuals, existing fields, and `$` keys. The latter is to avoid overwriting\n      // Mongoose internals.\n      if (!(key in schema.tree) && !(key in schema.methods) && !(key in schema.virtuals) && !key.startsWith('$')) {\n        defineKey({ prop: key, subprops: null, prototype: _this });\n      }\n    });\n  }\n\n  applyQueue(this);\n}\n\nDocument.prototype.$isMongooseDocumentPrototype = true;\n\n/**\n * Boolean flag specifying if the document is new. If you create a document\n * using `new`, this document will be considered \"new\". `$isNew` is how\n * Mongoose determines whether `save()` should use `insertOne()` to create\n * a new document or `updateOne()` to update an existing document.\n *\n * #### Example:\n *\n *     const user = new User({ name: 'John Smith' });\n *     user.$isNew; // true\n *\n *     await user.save(); // Sends an `insertOne` to MongoDB\n *\n * On the other hand, if you load an existing document from the database\n * using `findOne()` or another [query operation](https://mongoosejs.com/docs/queries.html),\n * `$isNew` will be false.\n *\n * #### Example:\n *\n *     const user = await User.findOne({ name: 'John Smith' });\n *     user.$isNew; // false\n *\n * Mongoose sets `$isNew` to `false` immediately after `save()` succeeds.\n * That means Mongoose sets `$isNew` to false **before** `post('save')` hooks run.\n * In `post('save')` hooks, `$isNew` will be `false` if `save()` succeeded.\n *\n * #### Example:\n *\n *     userSchema.post('save', function() {\n *       this.$isNew; // false\n *     });\n *     await User.create({ name: 'John Smith' });\n *\n * For subdocuments, `$isNew` is true if either the parent has `$isNew` set,\n * or if you create a new subdocument.\n *\n * #### Example:\n *\n *     // Assume `Group` has a document array `users`\n *     const group = await Group.findOne();\n *     group.users[0].$isNew; // false\n *\n *     group.users.push({ name: 'John Smith' });\n *     group.users[1].$isNew; // true\n *\n * @api public\n * @property $isNew\n * @memberOf Document\n * @instance\n */\n\nObject.defineProperty(Document.prototype, 'isNew', {\n  get: function() {\n    return this.$isNew;\n  },\n  set: function(value) {\n    this.$isNew = value;\n  }\n});\n\n/**\n * Hash containing current validation errors.\n *\n * @api public\n * @property errors\n * @memberOf Document\n * @instance\n */\n\nObject.defineProperty(Document.prototype, 'errors', {\n  get: function() {\n    return this.$errors;\n  },\n  set: function(value) {\n    this.$errors = value;\n  }\n});\n\n/*!\n * ignore\n */\n\nDocument.prototype.$isNew = true;\n\n/*!\n * Document exposes the NodeJS event emitter API, so you can use\n * `on`, `once`, etc.\n */\nutils.each(\n  ['on', 'once', 'emit', 'listeners', 'removeListener', 'setMaxListeners',\n    'removeAllListeners', 'addListener'],\n  function(emitterFn) {\n    Document.prototype[emitterFn] = function() {\n      // Delay creating emitter until necessary because emitters take up a lot of memory,\n      // especially for subdocuments.\n      if (!this.$__.emitter) {\n        if (emitterFn === 'emit') {\n          return;\n        }\n        this.$__.emitter = new EventEmitter();\n        this.$__.emitter.setMaxListeners(0);\n      }\n      return this.$__.emitter[emitterFn].apply(this.$__.emitter, arguments);\n    };\n    Document.prototype[`$${emitterFn}`] = Document.prototype[emitterFn];\n  });\n\nDocument.prototype.constructor = Document;\n\nfor (const i in EventEmitter.prototype) {\n  Document[i] = EventEmitter.prototype[i];\n}\n\n/**\n * The document's internal schema.\n *\n * @api private\n * @property schema\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__schema;\n\n/**\n * The document's schema.\n *\n * @api public\n * @property schema\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.schema;\n\n/**\n * Empty object that you can use for storing properties on the document. This\n * is handy for passing data to middleware without conflicting with Mongoose\n * internals.\n *\n * #### Example:\n *\n *     schema.pre('save', function() {\n *       // Mongoose will set `isNew` to `false` if `save()` succeeds\n *       this.$locals.wasNew = this.isNew;\n *     });\n *\n *     schema.post('save', function() {\n *       // Prints true if `isNew` was set before `save()`\n *       console.log(this.$locals.wasNew);\n *     });\n *\n * @api public\n * @property $locals\n * @memberOf Document\n * @instance\n */\n\nObject.defineProperty(Document.prototype, '$locals', {\n  configurable: false,\n  enumerable: false,\n  get: function() {\n    if (this.$__.locals == null) {\n      this.$__.locals = {};\n    }\n    return this.$__.locals;\n  },\n  set: function(v) {\n    this.$__.locals = v;\n  }\n});\n\n/**\n * Legacy alias for `$isNew`.\n *\n * @api public\n * @property isNew\n * @memberOf Document\n * @see $isNew https://mongoosejs.com/docs/api/document.html#Document.prototype.$isNew\n * @instance\n */\n\nDocument.prototype.isNew;\n\n/**\n * Set this property to add additional query filters when Mongoose saves this document and `isNew` is false.\n *\n * #### Example:\n *\n *     // Make sure `save()` never updates a soft deleted document.\n *     schema.pre('save', function() {\n *       this.$where = { isDeleted: false };\n *     });\n *\n * @api public\n * @property $where\n * @memberOf Document\n * @instance\n */\n\nObject.defineProperty(Document.prototype, '$where', {\n  configurable: false,\n  enumerable: false,\n  writable: true\n});\n\n/**\n * The string version of this documents _id.\n *\n * #### Note:\n *\n * This getter exists on all documents by default. The getter can be disabled by setting the `id` [option](https://mongoosejs.com/docs/guide.html#id) of its `Schema` to false at construction time.\n *\n *     new Schema({ name: String }, { id: false });\n *\n * @api public\n * @see Schema options https://mongoosejs.com/docs/guide.html#options\n * @property id\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.id;\n\n/**\n * Hash containing current validation $errors.\n *\n * @api public\n * @property $errors\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$errors;\n\n/**\n * A string containing the current operation that Mongoose is executing\n * on this document. May be `null`, `'save'`, `'validate'`, or `'remove'`.\n *\n * #### Example:\n *\n *     const doc = new Model({ name: 'test' });\n *     doc.$op; // null\n *\n *     const promise = doc.save();\n *     doc.$op; // 'save'\n *\n *     await promise;\n *     doc.$op; // null\n *\n * @api public\n * @property $op\n * @memberOf Document\n * @instance\n */\n\nObject.defineProperty(Document.prototype, '$op', {\n  get: function() {\n    return this.$__.op || null;\n  },\n  set: function(value) {\n    this.$__.op = value;\n  }\n});\n\n/*!\n * ignore\n */\n\nfunction $applyDefaultsToNested(val, path, doc) {\n  if (val == null) {\n    return;\n  }\n\n  const paths = Object.keys(doc.$__schema.paths);\n  const plen = paths.length;\n\n  const pathPieces = path.indexOf('.') === -1 ? [path] : path.split('.');\n\n  for (let i = 0; i < plen; ++i) {\n    let curPath = '';\n    const p = paths[i];\n\n    if (!p.startsWith(path + '.')) {\n      continue;\n    }\n\n    const type = doc.$__schema.paths[p];\n    const pieces = type.splitPath().slice(pathPieces.length);\n    const len = pieces.length;\n\n    if (type.defaultValue === void 0) {\n      continue;\n    }\n\n    let cur = val;\n\n    for (let j = 0; j < len; ++j) {\n      if (cur == null) {\n        break;\n      }\n\n      const piece = pieces[j];\n\n      if (j === len - 1) {\n        if (cur[piece] !== void 0) {\n          break;\n        }\n\n        try {\n          const def = type.getDefault(doc, false);\n          if (def !== void 0) {\n            cur[piece] = def;\n          }\n        } catch (err) {\n          doc.invalidate(path + '.' + curPath, err);\n          break;\n        }\n\n        break;\n      }\n\n      curPath += (!curPath.length ? '' : '.') + piece;\n\n      cur[piece] = cur[piece] || {};\n      cur = cur[piece];\n    }\n  }\n}\n\n/**\n * Builds the default doc structure\n *\n * @param {Object} obj\n * @param {Object} [fields]\n * @param {Boolean} [skipId]\n * @param {Boolean} [exclude]\n * @param {Object} [hasIncludedChildren]\n * @api private\n * @method $__buildDoc\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__buildDoc = function(obj, fields, skipId, exclude, hasIncludedChildren) {\n  const doc = {};\n\n  const paths = Object.keys(this.$__schema.paths).\n    // Don't build up any paths that are underneath a map, we don't know\n    // what the keys will be\n    filter(p => !p.includes('$*'));\n  const plen = paths.length;\n  let ii = 0;\n\n  for (; ii < plen; ++ii) {\n    const p = paths[ii];\n\n    if (p === '_id') {\n      if (skipId) {\n        continue;\n      }\n      if (obj && '_id' in obj) {\n        continue;\n      }\n    }\n\n    const path = this.$__schema.paths[p].splitPath();\n    const len = path.length;\n    const last = len - 1;\n    let curPath = '';\n    let doc_ = doc;\n    let included = false;\n\n    for (let i = 0; i < len; ++i) {\n      const piece = path[i];\n\n      if (!curPath.length) {\n        curPath = piece;\n      } else {\n        curPath += '.' + piece;\n      }\n\n      // support excluding intermediary levels\n      if (exclude === true) {\n        if (curPath in fields) {\n          break;\n        }\n      } else if (exclude === false && fields && !included) {\n        if (curPath in fields) {\n          included = true;\n        } else if (!hasIncludedChildren[curPath]) {\n          break;\n        }\n      }\n\n      if (i < last) {\n        doc_ = doc_[piece] || (doc_[piece] = {});\n      }\n    }\n  }\n\n  this._doc = doc;\n};\n\n/*!\n * Converts to POJO when you use the document for querying\n */\n\nDocument.prototype.toBSON = function() {\n  return this.toObject(internalToObjectOptions);\n};\n\n/**\n * Hydrates this document with the data in `doc`. Does not run setters or mark any paths modified.\n *\n * Called internally after a document is returned from MongoDB. Normally,\n * you do **not** need to call this function on your own.\n *\n * This function triggers `init` [middleware](https://mongoosejs.com/docs/middleware.html).\n * Note that `init` hooks are [synchronous](https://mongoosejs.com/docs/middleware.html#synchronous).\n *\n * @param {Object} doc raw document returned by mongo\n * @param {Object} [opts]\n * @param {Boolean} [opts.hydratedPopulatedDocs=false] If true, hydrate and mark as populated any paths that are populated in the raw document\n * @param {Function} [fn]\n * @api public\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.init = function(doc, opts, fn) {\n  if (typeof opts === 'function') {\n    fn = opts;\n    opts = null;\n  }\n\n  if (doc == null) {\n    throw new ObjectParameterError(doc, 'doc', 'init');\n  }\n\n  this.$__init(doc, opts);\n\n  if (fn) {\n    fn(null, this);\n  }\n\n  return this;\n};\n\n/**\n * Alias for [`.init`](https://mongoosejs.com/docs/api/document.html#Document.prototype.init())\n *\n * @api public\n */\n\nDocument.prototype.$init = function() {\n  return this.constructor.prototype.init.apply(this, arguments);\n};\n\n/**\n * Internal \"init\" function\n *\n * @param {Document} doc\n * @param {Object} [opts]\n * @returns {Document} this\n * @api private\n */\n\nDocument.prototype.$__init = function(doc, opts) {\n  if (doc == null) {\n    throw new ObjectParameterError(doc, 'doc', 'init');\n  }\n  this.$isNew = false;\n  opts = opts || {};\n\n  // handle docs with populated paths\n  // If doc._id is not null or undefined\n  if (doc._id != null && opts.populated && opts.populated.length) {\n    const id = String(doc._id);\n    for (const item of opts.populated) {\n      if (item.isVirtual) {\n        this.$populated(item.path, utils.getValue(item.path, doc), item);\n      } else {\n        this.$populated(item.path, item._docs[id], item);\n      }\n\n      if (item._childDocs == null) {\n        continue;\n      }\n      for (const child of item._childDocs) {\n        if (child?.$__ == null) {\n          continue;\n        }\n        child.$__.parent = this;\n      }\n      item._childDocs = [];\n    }\n  }\n\n  init(this, doc, this._doc, opts);\n\n  markArraySubdocsPopulated(this, opts.populated);\n  this.$emit('init', this);\n  this.constructor.emit('init', this);\n\n  const hasIncludedChildren = this.$__.exclude === false && this.$__.selected ?\n    $__hasIncludedChildren(this.$__.selected) :\n    null;\n\n  applyDefaults(this, this.$__.selected, this.$__.exclude, hasIncludedChildren, false, this.$__.skipDefaults);\n  return this;\n};\n\n/**\n * Init helper.\n *\n * @param {Object} self document instance\n * @param {Object} obj raw mongodb doc\n * @param {Object} doc object we are initializing\n * @param {Object} [opts] Optional Options\n * @param {Boolean} [opts.setters] Call `applySetters` instead of `cast`\n * @param {String} [prefix] Prefix to add to each path\n * @api private\n */\n\nfunction init(self, obj, doc, opts, prefix) {\n  prefix = prefix || '';\n\n  if (typeof obj !== 'object' || Array.isArray(obj)) {\n    throw new ObjectExpectedError(self.$basePath, obj);\n  }\n\n  if (obj.$__ != null) {\n    obj = obj._doc;\n  }\n  const keys = Object.keys(obj);\n  const len = keys.length;\n  let schemaType;\n  let path;\n  let i;\n  const strict = self.$__.strictMode;\n  const docSchema = self.$__schema;\n\n  for (let index = 0; index < len; ++index) {\n    i = keys[index];\n    // avoid prototype pollution\n    if (specialProperties.has(i)) {\n      continue;\n    }\n    path = prefix ? prefix + i : i;\n    schemaType = docSchema.path(path);\n    // Should still work if not a model-level discriminator, but should not be\n    // necessary. This is *only* to catch the case where we queried using the\n    // base model and the discriminated model has a projection\n    if (docSchema.$isRootDiscriminator && !self.$__isSelected(path)) {\n      continue;\n    }\n\n    const value = obj[i];\n    if (!schemaType && utils.isPOJO(value)) {\n      // assume nested object\n      if (!doc[i]) {\n        doc[i] = {};\n        if (!strict && !(i in docSchema.tree) && !(i in docSchema.methods) && !(i in docSchema.virtuals)) {\n          self[i] = doc[i];\n        } else if (opts?.virtuals && (i in docSchema.virtuals)) {\n          self[i] = doc[i];\n        }\n      }\n      init(self, value, doc[i], opts, path + '.');\n    } else if (!schemaType) {\n      doc[i] = value;\n      if (!strict && !prefix) {\n        self[i] = value;\n      } else if (opts?.virtuals && (i in docSchema.virtuals)) {\n        self[i] = value;\n      }\n    } else {\n      // Retain order when overwriting defaults\n      if (Object.hasOwn(doc, i) && value !== void 0 && !opts.hydratedPopulatedDocs) {\n        delete doc[i];\n      }\n      if (value === null) {\n        doc[i] = schemaType._castNullish(null);\n      } else if (value !== undefined) {\n        const wasPopulated = value.$__ == null ? null : value.$__.wasPopulated;\n\n        if (schemaType && !wasPopulated && !opts.hydratedPopulatedDocs) {\n          try {\n            if (opts?.setters) {\n              // Call applySetters with `init = false` because otherwise setters are a noop\n              const overrideInit = false;\n              doc[i] = schemaType.applySetters(value, self, overrideInit, null, opts);\n            } else {\n              doc[i] = schemaType.cast(value, self, true, undefined, opts);\n            }\n          } catch (e) {\n            self.invalidate(e.path, new ValidatorError({\n              path: e.path,\n              message: e.message,\n              type: 'cast',\n              value: e.value,\n              reason: e\n            }));\n          }\n        } else if (schemaType && opts.hydratedPopulatedDocs) {\n          doc[i] = schemaType.cast(value, self, true, undefined, { hydratedPopulatedDocs: true });\n\n          if (doc[i]?.$__?.wasPopulated) {\n            self.$populated(path, doc[i].$__.wasPopulated.value, doc[i].$__.wasPopulated.options);\n          } else if (Array.isArray(doc[i]) && doc[i].length && doc[i][0]?.$__?.wasPopulated) {\n            self.$populated(path, doc[i].map(populatedDoc => populatedDoc?.$__?.wasPopulated?.value).filter(val => val != null), doc[i][0].$__.wasPopulated.options);\n          }\n        } else {\n          doc[i] = value;\n        }\n      }\n      // mark as hydrated\n      if (!self.$isModified(path)) {\n        self.$__.activePaths.init(path);\n      }\n    }\n  }\n}\n\n/**\n * Sends an updateOne command with this document `_id` as the query selector.\n *\n * #### Example:\n *\n *     weirdCar.updateOne({$inc: {wheels:1}}, { w: 1 });\n *\n * #### Valid options:\n *\n *  - same as in [Model.updateOne](https://mongoosejs.com/docs/api/model.html#Model.updateOne)\n *\n * @see Model.updateOne https://mongoosejs.com/docs/api/model.html#Model.updateOne\n * @param {Object} update\n * @param {Object} [options] optional see [`Query.prototype.setOptions()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.setOptions())\n * @param {Object} [options.lean] if truthy, mongoose will return the document as a plain JavaScript object rather than a mongoose document. See [`Query.lean()`](https://mongoosejs.com/docs/api/query.html#Query.prototype.lean()) and the [Mongoose lean tutorial](https://mongoosejs.com/docs/tutorials/lean.html).\n * @param {Boolean|String} [options.strict] overwrites the schema's [strict mode option](https://mongoosejs.com/docs/guide.html#strict)\n * @param {Boolean} [options.timestamps=null] If set to `false` and [schema-level timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this update. Note that this allows you to overwrite timestamps. Does nothing if schema-level timestamps are not set.\n * @return {Query}\n * @api public\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.updateOne = function updateOne(update, options) {\n  const query = this.constructor.updateOne();\n  const self = this;\n  query.pre(async function queryPreUpdateOne() {\n    const res = await self._execDocumentPreHooks('updateOne', self, update, options);\n    // `self` is passed to pre hooks as argument for backwards compatibility, but that\n    // isn't the actual arguments passed to the wrapped function.\n    if (res[0] !== self || res[1] !== update || res[2] !== options) {\n      throw new Error('Document updateOne pre hooks cannot overwrite arguments');\n    }\n    query.updateOne({ _id: self._doc._id }, update, options);\n    // Apply custom where conditions _after_ document updateOne middleware for\n    // consistency with save() - sharding plugin needs to set $where\n    if (self.$where != null) {\n      this.where(self.$where);\n    }\n    if (self.$session() != null) {\n      if (!('session' in query.options)) {\n        query.options.session = self.$session();\n      }\n    }\n    return res;\n  });\n  query.post(function queryPostUpdateOne() {\n    return self._execDocumentPostHooks('updateOne');\n  });\n\n  return query;\n};\n\n/**\n * Sends a replaceOne command with this document `_id` as the query selector.\n *\n * #### Valid options:\n *\n *  - same as in [Model.replaceOne](https://mongoosejs.com/docs/api/model.html#Model.replaceOne())\n *\n * @see Model.replaceOne https://mongoosejs.com/docs/api/model.html#Model.replaceOne()\n * @param {Object} doc\n * @param {Object} [options]\n * @param {Function} [callback]\n * @return {Query}\n * @api public\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.replaceOne = function replaceOne() {\n  const args = [...arguments];\n  args.unshift({ _id: this._doc._id });\n  return this.constructor.replaceOne.apply(this.constructor, args);\n};\n\n/**\n * Getter/setter around the session associated with this document. Used to\n * automatically set `session` if you `save()` a doc that you got from a\n * query with an associated session.\n *\n * #### Example:\n *\n *     const session = MyModel.startSession();\n *     const doc = await MyModel.findOne().session(session);\n *     doc.$session() === session; // true\n *     doc.$session(null);\n *     doc.$session() === null; // true\n *\n * If this is a top-level document, setting the session propagates to all child\n * docs.\n *\n * @param {ClientSession} [session] overwrite the current session\n * @return {ClientSession}\n * @method $session\n * @api public\n * @memberOf Document\n */\n\nDocument.prototype.$session = function $session(session) {\n  if (arguments.length === 0) {\n    if (this.$__.session?.hasEnded) {\n      this.$__.session = null;\n      return null;\n    }\n    return this.$__.session;\n  }\n\n  if (session?.hasEnded) {\n    throw new MongooseError('Cannot set a document\\'s session to a session that has ended. Make sure you haven\\'t ' +\n      'called `endSession()` on the session you are passing to `$session()`.');\n  }\n\n  if (session == null && this.$__.session == null) {\n    return;\n  }\n\n  this.$__.session = session;\n\n  if (!this.$isSubdocument) {\n    const subdocs = this.$getAllSubdocs();\n    for (const child of subdocs) {\n      child.$session(session);\n    }\n  }\n\n  return session;\n};\n\n/**\n * Getter/setter around whether this document will apply timestamps by\n * default when using `save()` and `bulkSave()`.\n *\n * #### Example:\n *\n *     const TestModel = mongoose.model('Test', new Schema({ name: String }, { timestamps: true }));\n *     const doc = new TestModel({ name: 'John Smith' });\n *\n *     doc.$timestamps(); // true\n *\n *     doc.$timestamps(false);\n *     await doc.save(); // Does **not** apply timestamps\n *\n * @param {Boolean} [value] overwrite the current session\n * @return {Document|boolean|undefined} When used as a getter (no argument), a boolean will be returned indicating the timestamps option state or if unset \"undefined\" will be used, otherwise will return \"this\"\n * @method $timestamps\n * @api public\n * @memberOf Document\n */\n\nDocument.prototype.$timestamps = function $timestamps(value) {\n  if (arguments.length === 0) {\n    if (this.$__.timestamps != null) {\n      return this.$__.timestamps;\n    }\n\n    if (this.$__schema) {\n      return this.$__schema.options.timestamps;\n    }\n\n    return undefined;\n  }\n\n  const currentValue = this.$timestamps();\n  if (value !== currentValue) {\n    this.$__.timestamps = value;\n  }\n\n  return this;\n};\n\n/**\n * Overwrite all values in this document with the values of `obj`, except\n * for immutable properties. Behaves similarly to `set()`, except for it\n * unsets all properties that aren't in `obj`.\n *\n * @param {Object} obj the object to overwrite this document with\n * @method overwrite\n * @memberOf Document\n * @instance\n * @api public\n * @return {Document} this\n */\n\nDocument.prototype.overwrite = function overwrite(obj) {\n  const keys = new Set(Object.keys(this._doc));\n  for (const key of Object.keys(obj)) {\n    keys.add(key);\n  }\n\n  const schemaOptions = this.$__schema.options;\n  for (const key of keys) {\n    if (key === '_id') {\n      continue;\n    }\n    // Explicitly skip version key\n    if (schemaOptions.versionKey && key === schemaOptions.versionKey) {\n      continue;\n    }\n    if (schemaOptions.discriminatorKey && key === schemaOptions.discriminatorKey) {\n      continue;\n    }\n    this.$set(key, obj[key]);\n  }\n\n  return this;\n};\n\n/**\n * Alias for `set()`, used internally to avoid conflicts\n *\n * @param {String|Object} path path or object of key/vals to set\n * @param {Any} val the value to set\n * @param {Schema|String|Number|Buffer|*} [type] optionally specify a type for \"on-the-fly\" attributes\n * @param {Object} [options] optionally specify options that modify the behavior of the set\n * @param {Boolean} [options.merge=false] if true, setting a [nested path](https://mongoosejs.com/docs/subdocs.html#subdocuments-versus-nested-paths) will merge existing values rather than overwrite the whole object. So `doc.set('nested', { a: 1, b: 2 })` becomes `doc.set('nested.a', 1); doc.set('nested.b', 2);`\n * @return {Document} this\n * @method $set\n * @memberOf Document\n * @instance\n * @api public\n */\n\nDocument.prototype.$set = function $set(path, val, type, options) {\n  if (utils.isPOJO(type)) {\n    options = type;\n    type = undefined;\n  }\n\n  const merge = options?.merge;\n  const adhoc = type && type !== true;\n  const constructing = type === true;\n  let adhocs;\n  let keys;\n  let i = 0;\n  let pathtype;\n  let key;\n  let prefix;\n\n  const userSpecifiedStrict = options && 'strict' in options;\n  let strict = userSpecifiedStrict\n    ? options.strict\n    : this.$__.strictMode;\n\n  if (adhoc) {\n    adhocs = this.$__.adhocPaths || (this.$__.adhocPaths = {});\n    adhocs[path] = this.$__schema.interpretAsType(path, type, this.$__schema.options);\n  }\n\n  if (path == null) {\n    [path, val] = [val, path];\n  } else if (typeof path !== 'string') {\n    // new Document({ key: val })\n    if (path instanceof Document) {\n      if (path.$__isNested) {\n        path = path.toObject();\n      } else {\n        // This ternary is to support gh-7898 (copying virtuals if same schema)\n        // while not breaking gh-10819, which for some reason breaks if we use toObject()\n        path = path.$__schema === this.$__schema\n          ? applyVirtuals(path, { ...path._doc })\n          : path._doc;\n      }\n    }\n    if (path == null) {\n      [path, val] = [val, path];\n    }\n\n    prefix = val ? val + '.' : '';\n    keys = getKeysInSchemaOrder(this.$__schema, path);\n\n    const len = keys.length;\n\n    // `_skipMinimizeTopLevel` is because we may have deleted the top-level\n    // nested key to ensure key order.\n    const _skipMinimizeTopLevel = options?._skipMinimizeTopLevel || false;\n    if (len === 0 && _skipMinimizeTopLevel) {\n      delete options._skipMinimizeTopLevel;\n      if (val) {\n        this.$set(val, {});\n      }\n      return this;\n    }\n\n    options = Object.assign({}, options, { _skipMinimizeTopLevel: false });\n\n    for (let i = 0; i < len; ++i) {\n      key = keys[i];\n      const pathName = prefix ? prefix + key : key;\n      pathtype = this.$__schema.pathType(pathName);\n      const valForKey = path[key];\n\n      // On initial set, delete any nested keys if we're going to overwrite\n      // them to ensure we keep the user's key order.\n      if (type === true &&\n          !prefix &&\n          valForKey != null &&\n          pathtype === 'nested' &&\n          this._doc[key] != null) {\n        delete this._doc[key];\n      }\n\n      if (utils.isNonBuiltinObject(valForKey) && pathtype === 'nested') {\n        this.$set(pathName, valForKey, constructing, options);\n        $applyDefaultsToNested(this.$get(pathName), pathName, this);\n        continue;\n      } else if (strict) {\n        // Don't overwrite defaults with undefined keys (gh-3981) (gh-9039)\n        if (constructing && valForKey === void 0 &&\n            this.$get(pathName) !== void 0) {\n          continue;\n        }\n\n        if (pathtype === 'adhocOrUndefined') {\n          pathtype = getEmbeddedDiscriminatorPath(this, pathName, { typeOnly: true });\n        }\n\n        if (pathtype === 'real' || pathtype === 'virtual') {\n          this.$set(pathName, valForKey, constructing, options);\n        } else if (pathtype === 'nested' && valForKey instanceof Document) {\n          this.$set(pathName,\n            valForKey.toObject({ transform: false }), constructing, options);\n        } else if (strict === 'throw') {\n          if (pathtype === 'nested') {\n            throw new ObjectExpectedError(key, valForKey);\n          } else {\n            throw new StrictModeError(key);\n          }\n        } else if (pathtype === 'nested' && valForKey == null) {\n          this.$set(pathName, valForKey, constructing, options);\n        }\n      } else {\n        this.$set(pathName, valForKey, constructing, options);\n      }\n    }\n\n    // Ensure all properties are in correct order\n    const orderedDoc = {};\n    const orderedKeys = Object.keys(this.$__schema.tree);\n    for (let i = 0, len = orderedKeys.length; i < len; ++i) {\n      (key = orderedKeys[i]) &&\n      (Object.hasOwn(this._doc, key)) &&\n      (orderedDoc[key] = undefined);\n    }\n    this._doc = Object.assign(orderedDoc, this._doc);\n\n    return this;\n  }\n\n  let pathType = this.$__schema.pathType(path);\n  let parts = null;\n  if (pathType === 'adhocOrUndefined') {\n    parts = path.indexOf('.') === -1 ? [path] : path.split('.');\n    pathType = getEmbeddedDiscriminatorPath(this, parts, { typeOnly: true });\n  }\n  if (pathType === 'adhocOrUndefined' && !userSpecifiedStrict) {\n    // May be path underneath non-strict schema\n    if (parts == null) {\n      parts = path.indexOf('.') === -1 ? [path] : path.split('.');\n    }\n    const subdocStrict = getSubdocumentStrictValue(this.$__schema, parts);\n    if (subdocStrict !== undefined) {\n      strict = subdocStrict;\n    }\n  }\n\n  // Assume this is a Mongoose document that was copied into a POJO using\n  // `Object.assign()` or `{...doc}`\n  val = handleSpreadDoc(val, true);\n\n  // if this doc is being constructed we should not trigger getters\n  const priorVal = (() => {\n    if (this.$__.priorDoc != null) {\n      return this.$__.priorDoc.$__getValue(path);\n    }\n    if (constructing) {\n      return void 0;\n    }\n    return this.$__getValue(path);\n  })();\n\n  if (pathType === 'nested' && val) {\n    if (typeof val === 'object' && val != null) {\n      if (val.$__ != null) {\n        val = val.toObject(internalToObjectOptions);\n      }\n      if (val == null) {\n        this.invalidate(path, new MongooseError.CastError('Object', val, path));\n        return this;\n      }\n      const wasModified = this.$isModified(path);\n      const hasInitialVal = this.$__.savedState != null && Object.hasOwn(this.$__.savedState, path);\n      if (this.$__.savedState != null && !this.$isNew && !Object.hasOwn(this.$__.savedState, path)) {\n        const initialVal = this.$__getValue(path);\n        this.$__.savedState[path] = initialVal;\n\n        const keys = Object.keys(initialVal || {});\n        for (const key of keys) {\n          this.$__.savedState[path + '.' + key] = initialVal[key];\n        }\n      }\n\n      if (!merge) {\n        this.$__setValue(path, null);\n        cleanModifiedSubpaths(this, path);\n      } else {\n        return this.$set(val, path, constructing, options);\n      }\n\n      const keys = getKeysInSchemaOrder(this.$__schema, val, path);\n\n      this.$__setValue(path, {});\n      for (const key of keys) {\n        this.$set(path + '.' + key, val[key], constructing, { ...options, _skipMarkModified: true });\n      }\n      if (priorVal != null &&\n          (!wasModified || hasInitialVal) &&\n          utils.deepEqual(hasInitialVal ? this.$__.savedState[path] : priorVal, val)) {\n        this.unmarkModified(path);\n      } else {\n        this.markModified(path);\n      }\n      return this;\n    }\n    this.invalidate(path, new MongooseError.CastError('Object', val, path));\n    return this;\n  }\n\n  let schema;\n  if (parts == null) {\n    parts = path.indexOf('.') === -1 ? [path] : path.split('.');\n  }\n\n  // Might need to change path for top-level alias\n  if (typeof this.$__schema.aliases[parts[0]] === 'string') {\n    parts[0] = this.$__schema.aliases[parts[0]];\n  }\n\n  if (pathType === 'adhocOrUndefined' && strict) {\n    // check for roots that are Mixed types\n    let mixed;\n\n    for (i = 0; i < parts.length; ++i) {\n      const subpath = parts.slice(0, i + 1).join('.');\n\n      // If path is underneath a virtual, bypass everything and just set it.\n      if (i + 1 < parts.length && this.$__schema.pathType(subpath) === 'virtual') {\n        mpath.set(path, val, this);\n        return this;\n      }\n\n      schema = this.$__schema.path(subpath);\n      if (schema == null) {\n        continue;\n      }\n\n      if (schema instanceof MixedSchema) {\n        // allow changes to sub paths of mixed types\n        mixed = true;\n        break;\n      } else if (schema.$isSchemaMap && schema.$__schemaType instanceof MixedSchema && i < parts.length - 1) {\n        // Map of mixed and not the last element in the path resolves to mixed\n        mixed = true;\n        schema = schema.$__schemaType;\n        break;\n      }\n    }\n\n    if (schema == null) {\n      // Check for embedded discriminators\n      schema = getEmbeddedDiscriminatorPath(this, path);\n    }\n\n    if (!mixed && !schema) {\n      if (strict === 'throw') {\n        throw new StrictModeError(path);\n      }\n      return this;\n    }\n  } else if (pathType === 'virtual') {\n    schema = this.$__schema.virtualpath(path);\n    schema.applySetters(val, this);\n    return this;\n  } else {\n    schema = this.$__path(path);\n  }\n\n  // gh-4578, if setting a deeply nested path that doesn't exist yet, create it\n  let cur = this._doc;\n  let curPath = '';\n  for (i = 0; i < parts.length - 1; ++i) {\n    cur = cur instanceof Map ? cur.get(parts[i]) : cur[parts[i]];\n    curPath += (curPath.length !== 0 ? '.' : '') + parts[i];\n    if (!cur) {\n      this.$set(curPath, {});\n      // Hack re: gh-5800. If nested field is not selected, it probably exists\n      // so `MongoServerError: cannot use the part (nested of nested.num) to\n      // traverse the element ({nested: null})` is not likely. If user gets\n      // that error, its their fault for now. We should reconsider disallowing\n      // modifying not selected paths for 6.x\n      if (!this.$__isSelected(curPath)) {\n        this.unmarkModified(curPath);\n      }\n      cur = this.$__getValue(curPath);\n    }\n  }\n\n  let pathToMark;\n\n  // When using the $set operator the path to the field must already exist.\n  // Else mongodb throws: \"LEFT_SUBFIELD only supports Object\"\n\n  if (parts.length <= 1) {\n    pathToMark = path;\n  } else {\n    const len = parts.length;\n    for (i = 0; i < len; ++i) {\n      const subpath = parts.slice(0, i + 1).join('.');\n      if (this.$get(subpath, null, { getters: false }) === null) {\n        pathToMark = subpath;\n        break;\n      }\n    }\n\n    if (!pathToMark) {\n      pathToMark = path;\n    }\n  }\n\n  if (!schema) {\n    this.$__set(pathToMark, path, options, constructing, parts, schema, val, priorVal);\n\n    if (pathType === 'nested' && val == null) {\n      cleanModifiedSubpaths(this, path);\n    }\n    return this;\n  }\n\n  // If overwriting a subdocument path, make sure to clear out\n  // any errors _before_ setting, so new errors that happen\n  // get persisted. Re: #9080\n  if (schema.$isSingleNested || schema.$isMongooseArray) {\n    _markValidSubpaths(this, path);\n  }\n\n  if (val != null && merge && schema.$isSingleNested) {\n    if (val instanceof Document) {\n      val = val.toObject({ virtuals: false, transform: false });\n    }\n    const keys = Object.keys(val);\n    for (const key of keys) {\n      this.$set(path + '.' + key, val[key], constructing, options);\n    }\n\n    return this;\n  }\n\n  let shouldSet = true;\n  try {\n    // If the user is trying to set a ref path to a document with\n    // the correct model name, treat it as populated\n    const refMatches = (() => {\n      if (schema.options == null) {\n        return false;\n      }\n      if (!(val instanceof Document)) {\n        return false;\n      }\n      const model = val.constructor;\n\n      // Check ref\n      const refOpt = typeof schema.options.ref === 'function' && !schema.options.ref[modelSymbol] ? schema.options.ref.call(this, this) : schema.options.ref;\n\n      const ref = refOpt?.modelName || refOpt;\n      if (ref != null && (ref === model.modelName || ref === model.baseModelName)) {\n        return true;\n      }\n\n      // Check refPath\n      const refPath = schema.options.refPath;\n      if (refPath == null) {\n        return false;\n      }\n      const modelName = val.get(refPath);\n      return modelName === model.modelName || modelName === model.baseModelName;\n    })();\n\n    let didPopulate = false;\n    if (refMatches && val instanceof Document && (!val.$__.wasPopulated || utils.deepEqual(val.$__.wasPopulated.value, val._doc._id))) {\n      const unpopulatedValue = schema?.$isSingleNested ? schema.cast(val, this) : val._doc._id;\n      this.$populated(path, unpopulatedValue, { [populateModelSymbol]: val.constructor });\n      val.$__.wasPopulated = { value: unpopulatedValue };\n      didPopulate = true;\n    }\n\n    let popOpts;\n    const typeKey = this.$__schema.options.typeKey;\n    if (schema.options &&\n        Array.isArray(schema.options[typeKey]) &&\n        schema.options[typeKey].length &&\n        schema.options[typeKey][0] &&\n        schema.options[typeKey][0].ref &&\n        _isManuallyPopulatedArray(val, schema.options[typeKey][0].ref)) {\n      popOpts = { [populateModelSymbol]: val[0].constructor };\n      this.$populated(path, val.map(function(v) { return v._doc._id; }), popOpts);\n\n      for (const doc of val) {\n        doc.$__.wasPopulated = { value: doc._doc._id };\n      }\n      didPopulate = true;\n    }\n\n    if (!refMatches || !schema.$isSingleNested || !val.$__) {\n      // If this path is underneath a single nested schema, we'll call the setter\n      // later in `$__set()` because we don't take `_doc` when we iterate through\n      // a single nested doc. That's to make sure we get the correct context.\n      // Otherwise we would double-call the setter, see gh-7196.\n      let setterContext = this;\n      if (this.$__schema.singleNestedPaths[path] != null && parts.length > 1) {\n        setterContext = getDeepestSubdocumentForPath(this, parts, this.schema);\n      }\n      if (options?.overwriteImmutable) {\n        val = schema.applySetters(val, setterContext, false, priorVal, { path, overwriteImmutable: true });\n      } else {\n        val = schema.applySetters(val, setterContext, false, priorVal, { path });\n      }\n    }\n\n    if (Array.isArray(val) &&\n        !Array.isArray(schema) &&\n        schema.$isMongooseDocumentArray &&\n        val.length !== 0 &&\n        val[0]?.$__?.populated != null) {\n      const populatedPaths = Object.keys(val[0].$__.populated);\n      for (const populatedPath of populatedPaths) {\n        this.$populated(path + '.' + populatedPath,\n          val.map(v => v.$populated(populatedPath)),\n          val[0].$__.populated[populatedPath].options);\n      }\n      didPopulate = true;\n    }\n\n    if (!didPopulate && this.$__.populated) {\n      // If this array partially contains populated documents, convert them\n      // all to ObjectIds re: #8443\n      if (Array.isArray(val) && this.$__.populated[path]) {\n        for (let i = 0; i < val.length; ++i) {\n          if (val[i] instanceof Document) {\n            val.set(i, val[i]._doc._id, true);\n          }\n        }\n      }\n      delete this.$__.populated[path];\n    }\n\n    if (val != null && schema.$isSingleNested) {\n      _checkImmutableSubpaths(val, schema, priorVal);\n    }\n\n    this.$markValid(path);\n  } catch (e) {\n    if (e instanceof MongooseError.StrictModeError && e.isImmutableError) {\n      this.invalidate(path, e);\n    } else if (e instanceof MongooseError.CastError) {\n      this.invalidate(e.path, e);\n      if (e.$originalErrorPath) {\n        this.invalidate(path,\n          new MongooseError.CastError(schema.instance, val, path, e.$originalErrorPath));\n      }\n    } else {\n      this.invalidate(path,\n        new MongooseError.CastError(schema.instance, val, path, e));\n    }\n    shouldSet = false;\n  }\n\n  if (shouldSet) {\n    let savedState = null;\n    let savedStatePath = null;\n    if (!constructing) {\n      const doc = this.$isSubdocument ? this.ownerDocument() : this;\n      savedState = doc.$__.savedState;\n      savedStatePath = this.$isSubdocument ? this.$__.fullPath + '.' + path : path;\n      doc.$__saveInitialState(savedStatePath);\n    }\n\n    this.$__set(pathToMark, path, options, constructing, parts, schema, val, priorVal);\n\n    const isInTransaction = !!this.$__.session?.transaction;\n    const isModifiedWithinTransaction = this.$__.session &&\n      this.$__.session[sessionNewDocuments] &&\n      this.$__.session[sessionNewDocuments].has(this) &&\n      this.$__.session[sessionNewDocuments].get(this).modifiedPaths &&\n      !this.$__.session[sessionNewDocuments].get(this).modifiedPaths.has(savedStatePath);\n    if (savedState != null &&\n        Object.hasOwn(savedState, savedStatePath) &&\n        (!isInTransaction || isModifiedWithinTransaction) &&\n        utils.deepEqual(val, savedState[savedStatePath])) {\n      this.unmarkModified(path);\n    }\n  }\n\n  if (schema.$isSingleNested && (this.isDirectModified(path) || val == null)) {\n    cleanModifiedSubpaths(this, path);\n  } else if (schema.$isSchemaMap && val == null) {\n    cleanModifiedSubpaths(this, path);\n  }\n\n  return this;\n};\n\n/*!\n * ignore\n */\n\nfunction _isManuallyPopulatedArray(val, ref) {\n  if (!Array.isArray(val)) {\n    return false;\n  }\n  if (val.length === 0) {\n    return false;\n  }\n\n  for (const el of val) {\n    if (!(el instanceof Document)) {\n      return false;\n    }\n    const modelName = el.constructor.modelName;\n    if (modelName == null) {\n      return false;\n    }\n    if (el.constructor.modelName != ref && el.constructor.baseModelName != ref) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Sets the value of a path, or many paths.\n * Alias for [`.$set`](https://mongoosejs.com/docs/api/document.html#Document.prototype.$set()).\n *\n * #### Example:\n *\n *     // path, value\n *     doc.set(path, value)\n *\n *     // object\n *     doc.set({\n *         path  : value\n *       , path2 : {\n *            path  : value\n *         }\n *     })\n *\n *     // on-the-fly cast to number\n *     doc.set(path, value, Number)\n *\n *     // on-the-fly cast to string\n *     doc.set(path, value, String)\n *\n *     // changing strict mode behavior\n *     doc.set(path, value, { strict: false });\n *\n * @param {String|Object} path path or object of key/vals to set\n * @param {Any} val the value to set\n * @param {Schema|String|Number|Buffer|*} [type] optionally specify a type for \"on-the-fly\" attributes\n * @param {Object} [options] optionally specify options that modify the behavior of the set\n * @return {Document} this\n * @api public\n * @method set\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.set = Document.prototype.$set;\n\n/**\n * Determine if we should mark this change as modified.\n *\n * @param {never} pathToMark UNUSED\n * @param {String|Symbol} path\n * @param {Object} options\n * @param {Any} constructing\n * @param {never} parts UNUSED\n * @param {Schema} schema\n * @param {Any} val\n * @param {Any} priorVal\n * @return {Boolean}\n * @api private\n * @method $__shouldModify\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__shouldModify = function(pathToMark, path, options, constructing, parts, schema, val, priorVal) {\n  if (options?._skipMarkModified) {\n    return false;\n  }\n  if (this.$isNew) {\n    return true;\n  }\n  // Is path already modified? If so, always modify. We may unmark modified later.\n  if (path in this.$__.activePaths.getStatePaths('modify')) {\n    return true;\n  }\n\n  if (val === void 0 && !this.$__isSelected(path)) {\n    // when a path is not selected in a query, its initial\n    // value will be undefined.\n    return true;\n  }\n\n  if (val === void 0 && path in this.$__.activePaths.getStatePaths('default')) {\n    // we're just unsetting the default value which was never saved\n    return false;\n  }\n\n  // gh-3992: if setting a populated field to a doc, don't mark modified\n  // if they have the same _id\n  if (this.$populated(path) &&\n      val instanceof Document &&\n      deepEqual(val._doc._id, priorVal)) {\n    return false;\n  }\n\n  if (!deepEqual(val, priorVal !== undefined ? priorVal : utils.getValue(path, this))) {\n    return true;\n  }\n\n  if (!constructing &&\n      val !== null &&\n      val !== undefined &&\n      path in this.$__.activePaths.getStatePaths('default') &&\n      deepEqual(val, schema.getDefault(this, constructing))) {\n    // a path with a default was $unset on the server\n    // and the user is setting it to the same value again\n    return true;\n  }\n  return false;\n};\n\n/**\n * Handles the actual setting of the value and marking the path modified if appropriate.\n *\n * @param {String} pathToMark\n * @param {String|Symbol} path\n * @param {Object} options\n * @param {Any} constructing\n * @param {Array} parts\n * @param {Schema} schema\n * @param {Any} val\n * @param {Any} priorVal\n * @api private\n * @method $__set\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__set = function(pathToMark, path, options, constructing, parts, schema, val, priorVal) {\n  Embedded = Embedded || require('./types/arraySubdocument');\n\n  const shouldModify = this.$__shouldModify(pathToMark, path, options, constructing, parts,\n    schema, val, priorVal);\n\n  if (shouldModify) {\n    if (this.$__.primitiveAtomics?.[path]) {\n      delete this.$__.primitiveAtomics[path];\n      if (utils.hasOwnKeys(this.$__.primitiveAtomics) === false) {\n        delete this.$__.primitiveAtomics;\n      }\n    }\n    this.markModified(pathToMark);\n\n    // handle directly setting arrays (gh-1126)\n    MongooseArray || (MongooseArray = require('./types/array'));\n    if (val && utils.isMongooseArray(val)) {\n      val._registerAtomic('$set', val);\n\n      // Update embedded document parent references (gh-5189)\n      if (utils.isMongooseDocumentArray(val)) {\n        val.forEach(function(item) {\n          item && item.__parentArray && (item.__parentArray = val);\n        });\n      }\n    }\n  } else if (Array.isArray(val) && Array.isArray(priorVal) && utils.isMongooseArray(val) && utils.isMongooseArray(priorVal)) {\n    val[arrayAtomicsSymbol] = priorVal[arrayAtomicsSymbol];\n    val[arrayAtomicsBackupSymbol] = priorVal[arrayAtomicsBackupSymbol];\n    if (utils.isMongooseDocumentArray(val)) {\n      val.forEach(doc => {\n        if (doc != null) {\n          doc.$isNew = false;\n        }\n      });\n    }\n  }\n\n  let obj = this._doc;\n  let i = 0;\n  const l = parts.length;\n  let cur = '';\n\n  for (; i < l; i++) {\n    const next = i + 1;\n    const last = next === l;\n    cur += (cur ? '.' + parts[i] : parts[i]);\n    if (specialProperties.has(parts[i])) {\n      continue;\n    }\n\n    if (last) {\n      if (obj instanceof Map) {\n        obj.set(parts[i], val);\n      } else if (obj.$isSingleNested) {\n        if (!(parts[i] in obj)) {\n          obj[parts[i]] = val;\n          obj._doc[parts[i]] = val;\n        } else {\n          obj._doc[parts[i]] = val;\n        }\n        if (shouldModify) {\n          obj.markModified(parts[i]);\n        }\n      } else {\n        obj[parts[i]] = val;\n      }\n    } else {\n      const isMap = obj instanceof Map;\n      let value = isMap ? obj.get(parts[i]) : obj[parts[i]];\n      if (utils.isPOJO(value)) {\n        obj = value;\n      } else if (value && value instanceof Embedded) {\n        obj = value;\n      } else if (value && !Array.isArray(value) && value.$isSingleNested) {\n        obj = value;\n      } else if (value && Array.isArray(value)) {\n        obj = value;\n      } else if (value == null) {\n        value = {};\n        if (isMap) {\n          obj.set(parts[i], value);\n        } else {\n          obj[parts[i]] = value;\n        }\n        obj = value;\n      } else {\n        obj = value;\n      }\n    }\n  }\n};\n\n/**\n * Gets a raw value from a path (no getters)\n *\n * @param {String} path\n * @return {Any} Returns the value from the given `path`.\n * @api private\n */\n\nDocument.prototype.$__getValue = function(path) {\n  if (typeof path !== 'string' && !Array.isArray(path)) {\n    throw new TypeError(\n      `Invalid \\`path\\`. Must be either string or array. Got \"${path}\" (type ${typeof path})`\n    );\n  }\n  return utils.getValue(path, this._doc);\n};\n\n/**\n * Increments the numeric value at `path` by the given `val`.\n * When you call `save()` on this document, Mongoose will send a\n * [`$inc`](https://www.mongodb.com/docs/manual/reference/operator/update/inc/)\n * as opposed to a `$set`.\n *\n * #### Example:\n *\n *     const schema = new Schema({ counter: Number });\n *     const Test = db.model('Test', schema);\n *\n *     const doc = await Test.create({ counter: 0 });\n *     doc.$inc('counter', 2);\n *     await doc.save(); // Sends a `{ $inc: { counter: 2 } }` to MongoDB\n *     doc.counter; // 2\n *\n *     doc.counter += 2;\n *     await doc.save(); // Sends a `{ $set: { counter: 2 } }` to MongoDB\n *\n * @param {String|Array} path path or paths to update\n * @param {Number} val increment `path` by this value\n * @return {Document} this\n */\n\nDocument.prototype.$inc = function $inc(path, val) {\n  if (val == null) {\n    val = 1;\n  }\n\n  if (Array.isArray(path)) {\n    path.forEach((p) => this.$inc(p, val));\n    return this;\n  }\n\n  const schemaType = this.$__path(path);\n  if (schemaType == null) {\n    if (this.$__.strictMode === 'throw') {\n      throw new StrictModeError(path);\n    } else if (this.$__.strictMode === true) {\n      return this;\n    }\n  } else if (schemaType.instance !== 'Number') {\n    this.invalidate(path, new MongooseError.CastError(schemaType.instance, val, path));\n    return this;\n  }\n\n  const currentValue = this.$__getValue(path) || 0;\n  let shouldSet = false;\n  let valToSet = null;\n  let valToInc = val;\n\n  try {\n    val = schemaType.cast(val);\n    valToSet = schemaType.applySetters(currentValue + val, this);\n    valToInc = valToSet - currentValue;\n    shouldSet = true;\n  } catch (err) {\n    this.invalidate(path, new MongooseError.CastError('number', val, path, err));\n  }\n\n  if (shouldSet) {\n    this.$__.primitiveAtomics = this.$__.primitiveAtomics || {};\n    if (this.$__.primitiveAtomics[path] == null) {\n      this.$__.primitiveAtomics[path] = { $inc: valToInc };\n    } else {\n      this.$__.primitiveAtomics[path].$inc += valToInc;\n    }\n    this.markModified(path);\n    this.$__setValue(path, valToSet);\n  }\n\n  return this;\n};\n\n/**\n * Sets a raw value for a path (no casting, setters, transformations)\n *\n * @param {String} path\n * @param {Object} value\n * @return {Document} this\n * @api private\n */\n\nDocument.prototype.$__setValue = function(path, val) {\n  utils.setValue(path, val, this._doc);\n  return this;\n};\n\n/**\n * Returns the value of a path.\n *\n * #### Example:\n *\n *     // path\n *     doc.get('age') // 47\n *\n *     // dynamic casting to a string\n *     doc.get('age', String) // \"47\"\n *\n * @param {String} path\n * @param {Schema|String|Number|Buffer|*} [type] optionally specify a type for on-the-fly attributes\n * @param {Object} [options]\n * @param {Boolean} [options.virtuals=false] Apply virtuals before getting this path\n * @param {Boolean} [options.getters=true] If false, skip applying getters and just get the raw value\n * @return {Any}\n * @api public\n */\n\nDocument.prototype.get = function(path, type, options) {\n  let adhoc;\n  if (options == null) {\n    options = {};\n  }\n  if (type) {\n    adhoc = this.$__schema.interpretAsType(path, type, this.$__schema.options);\n  }\n  const noDottedPath = options.noDottedPath;\n\n  // Fast path if we know we're just accessing top-level path on the document:\n  // just get the schema path, avoid `$__path()` because that does string manipulation\n  let schema = noDottedPath ? this.$__schema.paths[path] : this.$__path(path);\n  if (schema == null) {\n    schema = this.$__schema.virtualpath(path);\n\n    if (schema != null) {\n      return schema.applyGetters(void 0, this);\n    }\n  }\n\n  if (noDottedPath) {\n    let obj = this._doc[path];\n    if (adhoc) {\n      obj = adhoc.cast(obj);\n    }\n    if (schema != null && options.getters !== false) {\n      return schema.applyGetters(obj, this);\n    }\n    return obj;\n  }\n\n  if (schema?.instance === 'Mixed') {\n    const virtual = this.$__schema.virtualpath(path);\n    if (virtual != null) {\n      schema = virtual;\n    }\n  }\n\n  const hasDot = path.indexOf('.') !== -1;\n  let obj = this._doc;\n\n  const pieces = hasDot ? path.split('.') : [path];\n  // Might need to change path for top-level alias\n  if (typeof this.$__schema.aliases[pieces[0]] === 'string') {\n    pieces[0] = this.$__schema.aliases[pieces[0]];\n  }\n\n  for (let i = 0, l = pieces.length; i < l; i++) {\n    if (obj?._doc) {\n      obj = obj._doc;\n    }\n\n    if (obj == null) {\n      obj = void 0;\n    } else if (obj instanceof Map) {\n      obj = obj.get(pieces[i], { getters: false });\n    } else if (i === l - 1) {\n      obj = utils.getValue(pieces[i], obj);\n    } else {\n      obj = obj[pieces[i]];\n    }\n  }\n\n  if (adhoc) {\n    obj = adhoc.cast(obj);\n  }\n\n  if (schema != null && options.getters !== false) {\n    obj = schema.applyGetters(obj, this);\n  } else if (this.$__schema.nested[path] && options.virtuals) {\n    // Might need to apply virtuals if this is a nested path\n    return applyVirtuals(this, clone(obj) || {}, { path: path });\n  }\n\n  return obj;\n};\n\n/*!\n * ignore\n */\n\nDocument.prototype[getSymbol] = Document.prototype.get;\nDocument.prototype.$get = Document.prototype.get;\n\n/**\n * Returns the schematype for the given `path`.\n *\n * @param {String} path\n * @return {SchemaPath}\n * @api private\n * @method $__path\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__path = function(path) {\n  const adhocs = this.$__.adhocPaths;\n  const adhocType = adhocs && Object.hasOwn(adhocs, path) ? adhocs[path] : null;\n\n  if (adhocType) {\n    return adhocType;\n  }\n  return this.$__schema.path(path);\n};\n\n/**\n * Marks the path as having pending changes to write to the db.\n *\n * _Very helpful when using [Mixed](https://mongoosejs.com/docs/schematypes.html#mixed) types._\n *\n * #### Example:\n *\n *     doc.mixed.type = 'changed';\n *     doc.markModified('mixed.type');\n *     doc.save() // changes to mixed.type are now persisted\n *\n * @param {String} path the path to mark modified\n * @param {Document} [scope] the scope to run validators with\n * @api public\n */\n\nDocument.prototype.markModified = function(path, scope) {\n  this.$__saveInitialState(path);\n\n  this.$__.activePaths.modify(path);\n  if (scope != null && !this.$isSubdocument) {\n    this.$__.pathsToScopes = this.$__pathsToScopes || {};\n    this.$__.pathsToScopes[path] = scope;\n  }\n};\n\n/*!\n * ignore\n */\n\nDocument.prototype.$__saveInitialState = function $__saveInitialState(path) {\n  const savedState = this.$__.savedState;\n  const savedStatePath = path;\n  if (savedState != null) {\n    const firstDot = savedStatePath.indexOf('.');\n    const topLevelPath = firstDot === -1 ? savedStatePath : savedStatePath.slice(0, firstDot);\n    if (!Object.hasOwn(savedState, topLevelPath)) {\n      savedState[topLevelPath] = clone(this.$__getValue(topLevelPath));\n    }\n  }\n};\n\n/**\n * Clears the modified state on the specified path.\n *\n * #### Example:\n *\n *     doc.foo = 'bar';\n *     doc.unmarkModified('foo');\n *     doc.save(); // changes to foo will not be persisted\n *\n * @param {String} path the path to unmark modified\n * @api public\n */\n\nDocument.prototype.unmarkModified = function(path) {\n  this.$__.activePaths.init(path);\n  if (this.$__.pathsToScopes != null) {\n    delete this.$__.pathsToScopes[path];\n  }\n};\n\n/**\n * Don't run validation on this path or persist changes to this path.\n *\n * #### Example:\n *\n *     doc.foo = null;\n *     doc.$ignore('foo');\n *     doc.save(); // changes to foo will not be persisted and validators won't be run\n *\n * @memberOf Document\n * @instance\n * @method $ignore\n * @param {String} path the path to ignore\n * @api public\n */\n\nDocument.prototype.$ignore = function(path) {\n  this.$__.activePaths.ignore(path);\n};\n\n/**\n * Returns the list of paths that have been directly modified. A direct\n * modified path is a path that you explicitly set, whether via `doc.foo = 'bar'`,\n * `Object.assign(doc, { foo: 'bar' })`, or `doc.set('foo', 'bar')`.\n *\n * A path `a` may be in `modifiedPaths()` but not in `directModifiedPaths()`\n * because a child of `a` was directly modified.\n *\n * #### Example:\n *\n *     const schema = new Schema({ foo: String, nested: { bar: String } });\n *     const Model = mongoose.model('Test', schema);\n *     await Model.create({ foo: 'original', nested: { bar: 'original' } });\n *\n *     const doc = await Model.findOne();\n *     doc.nested.bar = 'modified';\n *     doc.directModifiedPaths(); // ['nested.bar']\n *     doc.modifiedPaths(); // ['nested', 'nested.bar']\n *\n * @return {String[]}\n * @api public\n */\n\nDocument.prototype.directModifiedPaths = function() {\n  return Object.keys(this.$__.activePaths.getStatePaths('modify'));\n};\n\n/**\n * Returns true if the given path is nullish or only contains empty objects.\n * Useful for determining whether this subdoc will get stripped out by the\n * [minimize option](https://mongoosejs.com/docs/guide.html#minimize).\n *\n * #### Example:\n *\n *     const schema = new Schema({ nested: { foo: String } });\n *     const Model = mongoose.model('Test', schema);\n *     const doc = new Model({});\n *     doc.$isEmpty('nested'); // true\n *     doc.nested.$isEmpty(); // true\n *\n *     doc.nested.foo = 'bar';\n *     doc.$isEmpty('nested'); // false\n *     doc.nested.$isEmpty(); // false\n *\n * @param {String} [path]\n * @memberOf Document\n * @instance\n * @api public\n * @method $isEmpty\n * @return {Boolean}\n */\n\nDocument.prototype.$isEmpty = function(path) {\n  const isEmptyOptions = {\n    minimize: true,\n    virtuals: false,\n    getters: false,\n    transform: false\n  };\n\n  if (arguments.length !== 0) {\n    const v = this.$get(path);\n    if (v == null) {\n      return true;\n    }\n    if (typeof v !== 'object') {\n      return false;\n    }\n    if (utils.isPOJO(v)) {\n      return _isEmpty(v);\n    }\n    return Object.keys(v.toObject(isEmptyOptions)).length === 0;\n  }\n\n  return Object.keys(this.toObject(isEmptyOptions)).length === 0;\n};\n\n/*!\n * ignore\n */\n\nfunction _isEmpty(v) {\n  if (v == null) {\n    return true;\n  }\n  if (typeof v !== 'object' || Array.isArray(v)) {\n    return false;\n  }\n  for (const key of Object.keys(v)) {\n    if (!_isEmpty(v[key])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Returns the list of paths that have been modified.\n *\n * @param {Object} [options]\n * @param {Boolean} [options.includeChildren=false] if true, returns children of modified paths as well. For example, if false, the list of modified paths for `doc.colors = { primary: 'blue' };` will **not** contain `colors.primary`. If true, `modifiedPaths()` will return an array that contains `colors.primary`.\n * @return {String[]}\n * @api public\n */\n\nDocument.prototype.modifiedPaths = function(options) {\n  options = options || {};\n\n  const directModifiedPaths = Object.keys(this.$__.activePaths.getStatePaths('modify'));\n  const result = new Set();\n\n  let i = 0;\n  let j = 0;\n  const len = directModifiedPaths.length;\n\n  for (i = 0; i < len; ++i) {\n    const path = directModifiedPaths[i];\n    const parts = parentPaths(path);\n    const pLen = parts.length;\n\n    for (j = 0; j < pLen; ++j) {\n      result.add(parts[j]);\n    }\n\n    if (!options.includeChildren) {\n      continue;\n    }\n\n    let ii = 0;\n    let cur = this.$get(path);\n    if (typeof cur === 'object' && cur !== null) {\n      if (cur._doc) {\n        cur = cur._doc;\n      }\n      const len = cur.length;\n      if (Array.isArray(cur)) {\n        for (ii = 0; ii < len; ++ii) {\n          const subPath = path + '.' + ii;\n          if (!result.has(subPath)) {\n            result.add(subPath);\n            if (cur[ii] != null && cur[ii].$__) {\n              const modified = cur[ii].modifiedPaths();\n              let iii = 0;\n              const iiiLen = modified.length;\n              for (iii = 0; iii < iiiLen; ++iii) {\n                result.add(subPath + '.' + modified[iii]);\n              }\n            }\n          }\n        }\n      } else {\n        const keys = Object.keys(cur);\n        let ii = 0;\n        const len = keys.length;\n        for (ii = 0; ii < len; ++ii) {\n          result.add(path + '.' + keys[ii]);\n        }\n      }\n    }\n  }\n  return Array.from(result);\n};\n\nDocument.prototype[documentModifiedPaths] = Document.prototype.modifiedPaths;\n\n/**\n * Returns true if any of the given paths is modified, else false. If no arguments, returns `true` if any path\n * in this document is modified.\n *\n * If `path` is given, checks if a path or any full path containing `path` as part of its path chain has been modified.\n *\n * #### Example:\n *\n *     doc.set('documents.0.title', 'changed');\n *     doc.isModified()                      // true\n *     doc.isModified('documents')           // true\n *     doc.isModified('documents.0.title')   // true\n *     doc.isModified('documents otherProp') // true\n *     doc.isDirectModified('documents')     // false\n *\n * @param {String} [path] optional\n * @param {Object} [options]\n * @param {Boolean} [options.ignoreAtomics=false] If true, doesn't return true if path is underneath an array that was modified with atomic operations like `push()`\n * @return {Boolean}\n * @api public\n */\n\nDocument.prototype.isModified = function(paths, options, modifiedPaths) {\n  if (paths) {\n    const ignoreAtomics = options?.ignoreAtomics;\n    const directModifiedPathsObj = this.$__.activePaths.states.modify;\n    if (directModifiedPathsObj == null) {\n      return false;\n    }\n\n    if (typeof paths === 'string') {\n      paths = paths.indexOf(' ') === -1 ? [paths] : paths.split(' ');\n    }\n\n    for (const path of paths) {\n      if (directModifiedPathsObj[path] != null) {\n        return true;\n      }\n    }\n\n    const modified = modifiedPaths || this[documentModifiedPaths]();\n    const isModifiedChild = paths.some(function(path) {\n      return !!~modified.indexOf(path);\n    });\n\n    let directModifiedPaths = Object.keys(directModifiedPathsObj);\n    if (ignoreAtomics) {\n      directModifiedPaths = directModifiedPaths.filter(path => {\n        const value = this.$__getValue(path);\n        if (value?.[arrayAtomicsSymbol] != null && value[arrayAtomicsSymbol].$set === undefined) {\n          return false;\n        }\n        return true;\n      });\n    }\n    return isModifiedChild || paths.some(function(path) {\n      return directModifiedPaths.some(function(mod) {\n        return mod === path || path.startsWith(mod + '.');\n      });\n    });\n  }\n\n  return this.$__.activePaths.some('modify');\n};\n\n/**\n * Alias of [`.isModified`](https://mongoosejs.com/docs/api/document.html#Document.prototype.isModified())\n *\n * @method $isModified\n * @memberOf Document\n * @api public\n */\n\nDocument.prototype.$isModified = Document.prototype.isModified;\n\nDocument.prototype[documentIsModified] = Document.prototype.isModified;\n\n/**\n * Checks if a path is set to its default.\n *\n * #### Example:\n *\n *     MyModel = mongoose.model('test', { name: { type: String, default: 'Val '} });\n *     const m = new MyModel();\n *     m.$isDefault('name'); // true\n *\n * @memberOf Document\n * @instance\n * @method $isDefault\n * @param {String} [path]\n * @return {Boolean}\n * @api public\n */\n\nDocument.prototype.$isDefault = function(path) {\n  if (path == null) {\n    return this.$__.activePaths.some('default');\n  }\n\n  if (typeof path === 'string' && path.indexOf(' ') === -1) {\n    return Object.hasOwn(this.$__.activePaths.getStatePaths('default'), path);\n  }\n\n  let paths = path;\n  if (!Array.isArray(paths)) {\n    paths = paths.split(' ');\n  }\n\n  return paths.some(path => Object.hasOwn(this.$__.activePaths.getStatePaths('default'), path));\n};\n\n/**\n * Getter/setter, determines whether the document was deleted. The `Model.prototype.deleteOne()` method sets `$isDeleted` if the delete operation succeeded.\n *\n * #### Example:\n *\n *     const product = await product.deleteOne();\n *     product.$isDeleted(); // true\n *     product.deleteOne(); // no-op, doesn't send anything to the db\n *\n *     product.$isDeleted(false);\n *     product.$isDeleted(); // false\n *     product.deleteOne(); // will execute a remove against the db\n *\n *\n * @param {Boolean} [val] optional, overrides whether mongoose thinks the doc is deleted\n * @return {Boolean|Document} whether mongoose thinks this doc is deleted.\n * @method $isDeleted\n * @memberOf Document\n * @instance\n * @api public\n */\n\nDocument.prototype.$isDeleted = function(val) {\n  if (arguments.length === 0) {\n    return !!this.$__.isDeleted;\n  }\n\n  this.$__.isDeleted = !!val;\n  return this;\n};\n\n/**\n * Returns true if `path` was directly set and modified, else false.\n *\n * #### Example:\n *\n *     doc.set('documents.0.title', 'changed');\n *     doc.isDirectModified('documents.0.title') // true\n *     doc.isDirectModified('documents') // false\n *\n * @param {String|String[]} [path]\n * @return {Boolean}\n * @api public\n */\n\nDocument.prototype.isDirectModified = function(path) {\n  if (path == null) {\n    return this.$__.activePaths.some('modify');\n  }\n\n  if (typeof path === 'string' && path.indexOf(' ') === -1) {\n    const res = Object.hasOwn(this.$__.activePaths.getStatePaths('modify'), path);\n    if (res || path.indexOf('.') === -1) {\n      return res;\n    }\n\n    const pieces = path.split('.');\n    for (let i = 0; i < pieces.length - 1; ++i) {\n      const subpath = pieces.slice(0, i + 1).join('.');\n      const subdoc = this.$get(subpath);\n      if (subdoc?.$__ != null && subdoc.isDirectModified(pieces.slice(i + 1).join('.'))) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  let paths = path;\n  if (typeof paths === 'string') {\n    paths = paths.split(' ');\n  }\n\n  return paths.some(path => this.isDirectModified(path));\n};\n\n/**\n * Checks if `path` is in the `init` state, that is, it was set by `Document#init()` and not modified since.\n *\n * @param {String} [path]\n * @return {Boolean}\n * @api public\n */\n\nDocument.prototype.isInit = function(path) {\n  if (path == null) {\n    return this.$__.activePaths.some('init');\n  }\n\n  if (typeof path === 'string' && path.indexOf(' ') === -1) {\n    return Object.hasOwn(this.$__.activePaths.getStatePaths('init'), path);\n  }\n\n  let paths = path;\n  if (!Array.isArray(paths)) {\n    paths = paths.split(' ');\n  }\n\n  return paths.some(path => Object.hasOwn(this.$__.activePaths.getStatePaths('init'), path));\n};\n\n/**\n * Checks if `path` was selected in the source query which initialized this document.\n *\n * #### Example:\n *\n *     const doc = await Thing.findOne().select('name');\n *     doc.isSelected('name') // true\n *     doc.isSelected('age')  // false\n *\n * @param {String|String[]} path\n * @return {Boolean}\n * @api public\n */\n\nDocument.prototype.isSelected = function isSelected(path) {\n  if (this.$__.selected == null) {\n    return true;\n  }\n  if (!path) {\n    return false;\n  }\n  if (path === '_id') {\n    return this.$__.selected._id !== 0;\n  }\n\n  if (path.indexOf(' ') !== -1) {\n    path = path.split(' ');\n  }\n  if (Array.isArray(path)) {\n    return path.some(p => this.$__isSelected(p));\n  }\n\n  const paths = Object.keys(this.$__.selected);\n  let inclusive = null;\n\n  if (paths.length === 1 && paths[0] === '_id') {\n    // only _id was selected.\n    return this.$__.selected._id === 0;\n  }\n\n  for (const cur of paths) {\n    if (cur === '_id') {\n      continue;\n    }\n    if (!isDefiningProjection(this.$__.selected[cur])) {\n      continue;\n    }\n    inclusive = !!this.$__.selected[cur];\n    break;\n  }\n\n  if (inclusive === null) {\n    return true;\n  }\n\n  if (path in this.$__.selected) {\n    return inclusive;\n  }\n\n  const pathDot = path + '.';\n\n  for (const cur of paths) {\n    if (cur === '_id') {\n      continue;\n    }\n\n    if (cur.startsWith(pathDot)) {\n      return inclusive || cur !== pathDot;\n    }\n\n    if (pathDot.startsWith(cur + '.')) {\n      return inclusive;\n    }\n  }\n  return !inclusive;\n};\n\nDocument.prototype.$__isSelected = Document.prototype.isSelected;\n\n/**\n * Checks if `path` was explicitly selected. If no projection, always returns\n * true.\n *\n * #### Example:\n *\n *     Thing.findOne().select('nested.name').exec(function (err, doc) {\n *        doc.isDirectSelected('nested.name') // true\n *        doc.isDirectSelected('nested.otherName') // false\n *        doc.isDirectSelected('nested')  // false\n *     })\n *\n * @param {String} path\n * @return {Boolean}\n * @api public\n */\n\nDocument.prototype.isDirectSelected = function isDirectSelected(path) {\n  if (this.$__.selected == null) {\n    return true;\n  }\n\n  if (path === '_id') {\n    return this.$__.selected._id !== 0;\n  }\n\n  if (path.indexOf(' ') !== -1) {\n    path = path.split(' ');\n  }\n  if (Array.isArray(path)) {\n    return path.some(p => this.isDirectSelected(p));\n  }\n\n  const paths = Object.keys(this.$__.selected);\n  let inclusive = null;\n\n  if (paths.length === 1 && paths[0] === '_id') {\n    // only _id was selected.\n    return this.$__.selected._id === 0;\n  }\n\n  for (const cur of paths) {\n    if (cur === '_id') {\n      continue;\n    }\n    if (!isDefiningProjection(this.$__.selected[cur])) {\n      continue;\n    }\n    inclusive = !!this.$__.selected[cur];\n    break;\n  }\n\n  if (inclusive === null) {\n    return true;\n  }\n\n  if (Object.hasOwn(this.$__.selected, path)) {\n    return inclusive;\n  }\n\n  return !inclusive;\n};\n\n/**\n * Executes registered validation rules for this document.\n *\n * #### Note:\n *\n * This method is called `pre` save and if a validation rule is violated, [save](https://mongoosejs.com/docs/api/model.html#Model.prototype.save()) is aborted and the error is thrown.\n *\n * #### Example:\n *\n *     await doc.validate({ validateModifiedOnly: false, pathsToSkip: ['name', 'email']});\n *\n * @param {Array|String} [pathsToValidate] list of paths to validate. If set, Mongoose will validate only the modified paths that are in the given list.\n * @param {Object} [options] internal options\n * @param {Boolean} [options.validateModifiedOnly=false] if `true` mongoose validates only modified paths.\n * @param {Array|string} [options.pathsToSkip] list of paths to skip. If set, Mongoose will validate every modified path that is not in this list.\n * @return {Promise} Returns a Promise.\n * @api public\n */\n\nDocument.prototype.validate = async function validate(pathsToValidate, options) {\n  if (typeof pathsToValidate === 'function' || typeof options === 'function' || typeof arguments[2] === 'function') {\n    throw new MongooseError('Document.prototype.validate() no longer accepts a callback');\n  }\n  this.$op = 'validate';\n\n  if (arguments.length === 1) {\n    if (typeof arguments[0] === 'object' && !Array.isArray(arguments[0])) {\n      options = arguments[0];\n      pathsToValidate = null;\n    }\n  }\n  if (options && typeof options.pathsToSkip === 'string') {\n    const isOnePathOnly = options.pathsToSkip.indexOf(' ') === -1;\n    options.pathsToSkip = isOnePathOnly ? [options.pathsToSkip] : options.pathsToSkip.split(' ');\n  }\n  const _skipParallelValidateCheck = options?._skipParallelValidateCheck;\n\n  if (this.$isSubdocument != null) {\n    // Skip parallel validate check for subdocuments\n  } else if (this.$__.validating && !_skipParallelValidateCheck) {\n    throw new ParallelValidateError(this);\n  } else if (!_skipParallelValidateCheck) {\n    this.$__.validating = true;\n  }\n\n  try {\n    await this.$__validate(pathsToValidate, options);\n  } finally {\n    this.$op = null;\n    this.$__.validating = null;\n  }\n};\n\n/**\n * Alias of [`.validate`](https://mongoosejs.com/docs/api/document.html#Document.prototype.validate())\n *\n * @method $validate\n * @memberOf Document\n * @api public\n */\n\nDocument.prototype.$validate = Document.prototype.validate;\n\n/*!\n * ignore\n */\n\nfunction _evaluateRequiredFunctions(doc) {\n  const requiredFields = Object.keys(doc.$__.activePaths.getStatePaths('require'));\n  let i = 0;\n  const len = requiredFields.length;\n  for (i = 0; i < len; ++i) {\n    const path = requiredFields[i];\n\n    const p = doc.$__schema.path(path);\n\n    if (typeof p?.originalRequiredValue === 'function') {\n      doc.$__.cachedRequired = doc.$__.cachedRequired || {};\n      try {\n        doc.$__.cachedRequired[path] = p.originalRequiredValue.call(doc, doc);\n      } catch (err) {\n        doc.invalidate(path, err);\n      }\n    }\n  }\n}\n\n/*!\n * ignore\n */\n\nfunction _getPathsToValidate(doc, pathsToValidate, pathsToSkip, isNestedValidate) {\n  const doValidateOptions = {};\n\n  _evaluateRequiredFunctions(doc);\n  // only validate required fields when necessary\n  let paths = new Set(Object.keys(doc.$__.activePaths.getStatePaths('require')).filter(function(path) {\n    if (!doc.$__isSelected(path) && !doc.$isModified(path)) {\n      return false;\n    }\n    if (path.endsWith('.$*')) {\n      // Skip $* paths - they represent map schemas, not actual document paths\n      return false;\n    }\n    if (doc.$__.cachedRequired != null && path in doc.$__.cachedRequired) {\n      return doc.$__.cachedRequired[path];\n    }\n    return true;\n  }));\n\n  Object.keys(doc.$__.activePaths.getStatePaths('init')).forEach(addToPaths);\n  Object.keys(doc.$__.activePaths.getStatePaths('modify')).forEach(addToPaths);\n  Object.keys(doc.$__.activePaths.getStatePaths('default')).forEach(addToPaths);\n  function addToPaths(p) {\n    if (p.endsWith('.$*')) {\n      // Skip $* paths - they represent map schemas, not actual document paths\n      return;\n    }\n    paths.add(p);\n  }\n\n  if (!isNestedValidate) {\n    // If we're validating a subdocument, all this logic will run anyway on the top-level document, so skip for subdocuments.\n    // But only run for top-level subdocuments, because we're looking for subdocuments that are not modified at top-level but\n    // have a modified path. If that is the case, we will run validation on the top-level subdocument, and via that run validation\n    // on any subdocuments down to the modified path.\n    const topLevelSubdocs = [];\n    for (const path of Object.keys(doc.$__schema.paths)) {\n      const schemaType = doc.$__schema.path(path);\n      if (schemaType.$isSingleNested) {\n        const subdoc = doc.$get(path);\n        if (subdoc) {\n          topLevelSubdocs.push(subdoc);\n        }\n      } else if (schemaType.$isMongooseDocumentArray) {\n        const arr = doc.$get(path);\n        if (arr?.length) {\n          for (const subdoc of arr) {\n            if (subdoc) {\n              topLevelSubdocs.push(subdoc);\n            }\n          }\n        }\n      }\n    }\n    const modifiedPaths = doc.modifiedPaths();\n    for (const subdoc of topLevelSubdocs) {\n      if (subdoc.$basePath) {\n        const fullPathToSubdoc = subdoc.$__pathRelativeToParent();\n\n        // Remove child paths for now, because we'll be validating the whole\n        // subdoc.\n        // The following is a faster take on looping through every path in `paths`\n        // and checking if the path starts with `fullPathToSubdoc` re: gh-13191\n        for (const modifiedPath of subdoc.modifiedPaths()) {\n          paths.delete(fullPathToSubdoc + '.' + modifiedPath);\n        }\n\n        const subdocParent = subdoc.$parent();\n        if (subdocParent == null) {\n          throw new Error('Cannot validate subdocument that does not have a parent');\n        }\n        if (doc.$isModified(fullPathToSubdoc, null, modifiedPaths) &&\n              // Avoid using isDirectModified() here because that does additional checks on whether the parent path\n              // is direct modified, which can cause performance issues re: gh-14897\n              !Object.hasOwn(subdocParent.$__.activePaths.getStatePaths('modify'), fullPathToSubdoc) &&\n              !subdocParent.$isDefault(fullPathToSubdoc)) {\n          paths.add(fullPathToSubdoc);\n\n          if (doc.$__.pathsToScopes == null) {\n            doc.$__.pathsToScopes = {};\n          }\n          doc.$__.pathsToScopes[fullPathToSubdoc] = subdoc.$isDocumentArrayElement ?\n            subdoc.__parentArray :\n            subdoc.$parent();\n\n          doValidateOptions[fullPathToSubdoc] = { skipSchemaValidators: true };\n          if (subdoc.$isDocumentArrayElement && subdoc.__index != null) {\n            doValidateOptions[fullPathToSubdoc].index = subdoc.__index;\n          }\n        }\n      }\n    }\n  }\n\n  for (const path of paths) {\n    const _pathType = doc.$__schema.path(path);\n    if (!_pathType) {\n      continue;\n    }\n\n    if (_pathType.$isMongooseDocumentArray) {\n      for (const p of paths) {\n        if (p == null || p.startsWith(_pathType.path + '.')) {\n          paths.delete(p);\n        }\n      }\n    }\n\n    // Optimization: if primitive path with no validators, or array of primitives\n    // with no validators, skip validating this path entirely.\n    if (!_pathType.schema &&\n      !_pathType.embeddedSchemaType &&\n      _pathType.validators.length === 0 &&\n      !_pathType.$parentSchemaDocArray &&\n      // gh-15957: skip this optimization for SchemaMap as maps can contain subdocuments\n      // that need validation even if the map itself has no validators\n      !_pathType.$isSchemaMap) {\n      paths.delete(path);\n    } else if (_pathType.$isMongooseArray &&\n      !_pathType.$isMongooseDocumentArray && // Skip document arrays...\n      !_pathType.embeddedSchemaType.$isMongooseArray && // and arrays of arrays\n      _pathType.validators.length === 0 && // and arrays with top-level validators\n      _pathType.embeddedSchemaType.validators.length === 0) {\n      paths.delete(path);\n    }\n  }\n\n\n  if (Array.isArray(pathsToValidate)) {\n    paths = _handlePathsToValidate(paths, pathsToValidate);\n  } else if (Array.isArray(pathsToSkip)) {\n    paths = _handlePathsToSkip(paths, pathsToSkip);\n  }\n\n  // from here on we're not removing items from paths\n\n  // gh-661: if a whole array is modified, make sure to run validation on all\n  // the children as well\n  _addArrayPathsToValidate(doc, paths);\n\n  const flattenOptions = { skipArrays: true };\n  for (const pathToCheck of paths) {\n    if (doc.$__schema.nested[pathToCheck]) {\n      let _v = doc.$__getValue(pathToCheck);\n      if (isMongooseObject(_v)) {\n        _v = _v.toObject({ transform: false });\n      }\n      const flat = flatten(_v, pathToCheck, flattenOptions, doc.$__schema);\n      // Single nested paths (paths embedded under single nested subdocs) will\n      // be validated on their own when we call `validate()` on the subdoc itself.\n      // Re: gh-8468\n      const singleNestedPaths = doc.$__schema.singleNestedPaths;\n      for (const path of Object.keys(flat)) {\n        if (!Object.hasOwn(singleNestedPaths, path)) {\n          addToPaths(path);\n        }\n      }\n    }\n  }\n\n  for (const path of paths) {\n    const _pathType = doc.$__schema.path(path);\n\n    if (!_pathType) {\n      continue;\n    }\n\n    // If underneath a document array, may need to re-validate the parent\n    // array re: gh-6818. Do this _after_ adding subpaths, because\n    // we don't want to add every array subpath.\n    if (_pathType.$parentSchemaDocArray && typeof _pathType.$parentSchemaDocArray.path === 'string') {\n      paths.add(_pathType.$parentSchemaDocArray.path);\n    }\n\n    if (!_pathType.$isSchemaMap) {\n      continue;\n    }\n\n    const val = doc.$__getValue(path);\n    if (val == null) {\n      continue;\n    }\n    for (const key of val.keys()) {\n      paths.add(path + '.' + key);\n    }\n  }\n\n  paths = Array.from(paths);\n  return [paths, doValidateOptions];\n}\n\nfunction _addArrayPathsToValidate(doc, paths) {\n  for (const path of paths) {\n    const _pathType = doc.$__schema.path(path);\n    if (!_pathType) {\n      continue;\n    }\n\n    if (!_pathType.$isMongooseArray ||\n        // To avoid potential performance issues, skip doc arrays whose children\n        // are not required. `getPositionalPathType()` may be slow, so avoid\n        // it unless we have a case of #6364\n        (!Array.isArray(_pathType) &&\n          _pathType.$isMongooseDocumentArray &&\n          !_pathType?.schemaOptions?.required)) {\n      continue;\n    }\n\n    // gh-11380: optimization. If the array isn't a document array and there's no validators\n    // on the array type, there's no need to run validation on the individual array elements.\n    if (_pathType.$isMongooseArray &&\n        !_pathType.$isMongooseDocumentArray && // Skip document arrays...\n        !_pathType.embeddedSchemaType.$isMongooseArray && // and arrays of arrays\n        _pathType.embeddedSchemaType.validators.length === 0) {\n      continue;\n    }\n\n    const val = doc.$__getValue(path);\n    _pushNestedArrayPaths(val, paths, path);\n  }\n}\n\nfunction _pushNestedArrayPaths(val, paths, path) {\n  if (val != null) {\n    const numElements = val.length;\n    for (let j = 0; j < numElements; ++j) {\n      if (Array.isArray(val[j])) {\n        _pushNestedArrayPaths(val[j], paths, path + '.' + j);\n      } else {\n        paths.add(path + '.' + j);\n      }\n    }\n  }\n}\n\n/*!\n * ignore\n */\n\nDocument.prototype._execDocumentPreHooks = async function _execDocumentPreHooks(opName, ...args) {\n  return this.$__middleware.execPre(opName, this, [...args]);\n};\n\n/*!\n * ignore\n */\n\nDocument.prototype._execDocumentPostHooks = async function _execDocumentPostHooks(opName, error) {\n  return this.$__middleware.execPost(opName, this, [this], { error });\n};\n\n/*!\n * ignore\n */\n\nDocument.prototype.$__validate = async function $__validate(pathsToValidate, options) {\n  try {\n    [options] = await this._execDocumentPreHooks('validate', options);\n  } catch (error) {\n    await this._execDocumentPostHooks('validate', error);\n    return;\n  }\n\n  if (this.$__.saveOptions && this.$__.saveOptions.pathsToSave && !pathsToValidate) {\n    pathsToValidate = [...this.$__.saveOptions.pathsToSave];\n  }\n\n  const hasValidateModifiedOnlyOption = options &&\n      (typeof options === 'object') &&\n      ('validateModifiedOnly' in options);\n\n  const pathsToSkip = options?.pathsToSkip || null;\n\n  let shouldValidateModifiedOnly;\n  if (hasValidateModifiedOnlyOption) {\n    shouldValidateModifiedOnly = !!options.validateModifiedOnly;\n  } else {\n    shouldValidateModifiedOnly = this.$__schema.options.validateModifiedOnly;\n  }\n\n  const validateAllPaths = options?.validateAllPaths;\n  if (validateAllPaths) {\n    if (pathsToSkip) {\n      throw new TypeError('Cannot set both `validateAllPaths` and `pathsToSkip`');\n    }\n    if (pathsToValidate) {\n      throw new TypeError('Cannot set both `validateAllPaths` and `pathsToValidate`');\n    }\n    if (hasValidateModifiedOnlyOption && shouldValidateModifiedOnly) {\n      throw new TypeError('Cannot set both `validateAllPaths` and `validateModifiedOnly`');\n    }\n  }\n\n  const _this = this;\n  const _complete = () => {\n    let validationError = this.$__.validationError;\n    this.$__.validationError = null;\n    this.$__.validating = null;\n\n    if (shouldValidateModifiedOnly && validationError != null) {\n      // Remove any validation errors that aren't from modified paths\n      const errors = Object.keys(validationError.errors);\n      for (const errPath of errors) {\n        if (!this.$isModified(errPath)) {\n          delete validationError.errors[errPath];\n        }\n      }\n      if (utils.hasOwnKeys(validationError.errors) === false) {\n        validationError = void 0;\n      }\n    }\n\n    this.$__.cachedRequired = {};\n    this.$emit('validate', _this);\n    this.constructor.emit('validate', _this);\n\n    if (validationError) {\n      for (const key in validationError.errors) {\n        // Make sure cast errors persist\n        if (!this[documentArrayParent] &&\n            validationError.errors[key] instanceof MongooseError.CastError) {\n          this.invalidate(key, validationError.errors[key]);\n        }\n      }\n\n      return validationError;\n    }\n  };\n\n  // only validate required fields when necessary\n  let paths;\n  let doValidateOptionsByPath;\n  if (validateAllPaths) {\n    paths = new Set(Object.keys(this.$__schema.paths));\n    // gh-661: if a whole array is modified, make sure to run validation on all\n    // the children as well\n    for (const path of paths) {\n      const schemaType = this.$__schema.path(path);\n      if (!schemaType?.$isMongooseArray) {\n        continue;\n      }\n      const val = this.$__getValue(path);\n      if (!val) {\n        continue;\n      }\n      _pushNestedArrayPaths(val, paths, path);\n    }\n    paths = [...paths];\n    doValidateOptionsByPath = {};\n  } else {\n    const pathDetails = _getPathsToValidate(this, pathsToValidate, pathsToSkip, options?._nestedValidate);\n    paths = shouldValidateModifiedOnly ?\n      pathDetails[0].filter((path) => this.$isModified(path)) :\n      pathDetails[0];\n    doValidateOptionsByPath = pathDetails[1];\n  }\n\n  if (typeof pathsToValidate === 'string') {\n    pathsToValidate = pathsToValidate.split(' ');\n  }\n\n  if (paths.length === 0) {\n    const error = _complete();\n    await this._execDocumentPostHooks('validate', error);\n    return;\n  }\n\n  const validated = {};\n\n  let pathsToSave = this.$__.saveOptions?.pathsToSave;\n  const promises = [];\n  if (Array.isArray(pathsToSave)) {\n    pathsToSave = new Set(pathsToSave);\n    for (const path of paths) {\n      if (!pathsToSave.has(path)) {\n        continue;\n      }\n      promises.push(validatePath(path));\n    }\n  } else {\n    for (const path of paths) {\n      promises.push(validatePath(path));\n    }\n  }\n  await Promise.all(promises);\n  const error = _complete();\n  await this._execDocumentPostHooks('validate', error);\n\n  async function validatePath(path) {\n    if (path == null || validated[path]) {\n      return;\n    }\n\n    validated[path] = true;\n    const schemaType = _this.$__schema.path(path);\n\n    if (!schemaType) {\n      return;\n    }\n\n    // If user marked as invalid or there was a cast error, don't validate\n    if (!_this.$isValid(path)) {\n      return;\n    }\n\n    // If setting a path under a mixed path, avoid using the mixed path validator (gh-10141)\n    if (schemaType[schemaMixedSymbol] != null && path !== schemaType.path) {\n      return;\n    }\n\n    let val = _this.$__getValue(path);\n\n    // If you `populate()` and get back a null value, required validators\n    // shouldn't fail (gh-8018). We should always fall back to the populated\n    // value.\n    let pop;\n    if ((pop = _this.$populated(path))) {\n      val = pop;\n    } else if (val?.$__?.wasPopulated) {\n      // Array paths, like `somearray.1`, do not show up as populated with `$populated()`,\n      // so in that case pull out the document's id\n      val = val._doc._id;\n    }\n    const scope = _this.$__.pathsToScopes != null && path in _this.$__.pathsToScopes ?\n      _this.$__.pathsToScopes[path] :\n      _this;\n\n    const doValidateOptions = {\n      ...doValidateOptionsByPath[path],\n      path: path,\n      validateAllPaths,\n      _nestedValidate: true\n    };\n\n    try {\n      await schemaType.doValidate(val, scope, doValidateOptions);\n    } catch (err) {\n      const isSubdoc = schemaType.$isSingleNested ||\n          schemaType.$isArraySubdocument ||\n          schemaType.$isMongooseDocumentArray;\n      if (isSubdoc && err instanceof ValidationError) {\n        return;\n      }\n      _this.invalidate(path, err, undefined, true);\n    }\n  }\n};\n\n/*!\n * ignore\n */\n\nfunction _handlePathsToValidate(paths, pathsToValidate) {\n  const _pathsToValidate = new Set(pathsToValidate);\n  const parentPaths = new Map([]);\n  for (const path of pathsToValidate) {\n    if (path.indexOf('.') === -1) {\n      continue;\n    }\n    const pieces = path.split('.');\n    let cur = pieces[0];\n    for (let i = 1; i < pieces.length; ++i) {\n      // Since we skip subpaths under single nested subdocs to\n      // avoid double validation, we need to add back the\n      // single nested subpath if the user asked for it (gh-8626)\n      parentPaths.set(cur, path);\n      cur = cur + '.' + pieces[i];\n    }\n  }\n\n  const ret = new Set();\n  for (const path of paths) {\n    if (_pathsToValidate.has(path)) {\n      ret.add(path);\n    } else if (parentPaths.has(path)) {\n      ret.add(parentPaths.get(path));\n    }\n  }\n  return ret;\n}\n\n/*!\n * ignore\n */\n\nfunction _handlePathsToSkip(paths, pathsToSkip) {\n  pathsToSkip = new Set(pathsToSkip);\n  paths = Array.from(paths).filter(p => !pathsToSkip.has(p));\n  return new Set(paths);\n}\n\n/**\n * Executes registered validation rules (skipping asynchronous validators) for this document.\n *\n * #### Note:\n *\n * This method is useful if you need synchronous validation.\n *\n * #### Example:\n *\n *     const err = doc.validateSync();\n *     if (err) {\n *       handleError(err);\n *     } else {\n *       // validation passed\n *     }\n *\n * @param {Array|string} [pathsToValidate] only validate the given paths\n * @param {Object} [options] options for validation\n * @param {Boolean} [options.validateModifiedOnly=false] If `true`, Mongoose will only validate modified paths, as opposed to modified paths and `required` paths.\n * @param {Array|string} [options.pathsToSkip] list of paths to skip. If set, Mongoose will validate every modified path that is not in this list.\n * @return {ValidationError|undefined} ValidationError if there are errors during validation, or undefined if there is no error.\n * @api public\n */\n\nDocument.prototype.validateSync = function(pathsToValidate, options) {\n  const _this = this;\n\n  if (arguments.length === 1 && typeof arguments[0] === 'object' && !Array.isArray(arguments[0])) {\n    options = arguments[0];\n    pathsToValidate = null;\n  }\n\n  const hasValidateModifiedOnlyOption = options &&\n      (typeof options === 'object') &&\n      ('validateModifiedOnly' in options);\n\n  let shouldValidateModifiedOnly;\n  if (hasValidateModifiedOnlyOption) {\n    shouldValidateModifiedOnly = !!options.validateModifiedOnly;\n  } else {\n    shouldValidateModifiedOnly = this.$__schema.options.validateModifiedOnly;\n  }\n\n  let pathsToSkip = options?.pathsToSkip;\n\n  const validateAllPaths = options?.validateAllPaths;\n  if (validateAllPaths) {\n    if (pathsToSkip) {\n      throw new TypeError('Cannot set both `validateAllPaths` and `pathsToSkip`');\n    }\n    if (pathsToValidate) {\n      throw new TypeError('Cannot set both `validateAllPaths` and `pathsToValidate`');\n    }\n  }\n\n  if (typeof pathsToValidate === 'string') {\n    const isOnePathOnly = pathsToValidate.indexOf(' ') === -1;\n    pathsToValidate = isOnePathOnly ? [pathsToValidate] : pathsToValidate.split(' ');\n  } else if (typeof pathsToSkip === 'string' && pathsToSkip.indexOf(' ') !== -1) {\n    pathsToSkip = pathsToSkip.split(' ');\n  }\n\n  // only validate required fields when necessary\n  let paths;\n  let skipSchemaValidators;\n  if (validateAllPaths) {\n    paths = new Set(Object.keys(this.$__schema.paths));\n    // gh-661: if a whole array is modified, make sure to run validation on all\n    // the children as well\n    for (const path of paths) {\n      const schemaType = this.$__schema.path(path);\n      if (!schemaType?.$isMongooseArray) {\n        continue;\n      }\n      const val = this.$__getValue(path);\n      if (!val) {\n        continue;\n      }\n      _pushNestedArrayPaths(val, paths, path);\n    }\n    paths = [...paths];\n    skipSchemaValidators = {};\n  } else {\n    const pathDetails = _getPathsToValidate(this, pathsToValidate, pathsToSkip);\n    paths = shouldValidateModifiedOnly ?\n      pathDetails[0].filter((path) => this.$isModified(path)) :\n      pathDetails[0];\n    skipSchemaValidators = pathDetails[1];\n  }\n\n  const validating = {};\n\n  for (let i = 0, len = paths.length; i < len; ++i) {\n    const path = paths[i];\n\n    if (validating[path]) {\n      continue;\n    }\n\n    validating[path] = true;\n\n    const p = _this.$__schema.path(path);\n    if (!p) {\n      continue;\n    }\n    if (!_this.$isValid(path)) {\n      continue;\n    }\n\n    const val = _this.$__getValue(path);\n    const err = p.doValidateSync(val, _this, {\n      skipSchemaValidators: skipSchemaValidators[path],\n      path: path,\n      validateModifiedOnly: shouldValidateModifiedOnly,\n      validateAllPaths\n    });\n    if (err) {\n      const isSubdoc = p.$isSingleNested ||\n        p.$isArraySubdocument ||\n        p.$isMongooseDocumentArray;\n      if (isSubdoc && err instanceof ValidationError) {\n        continue;\n      }\n      _this.invalidate(path, err, undefined, true);\n    }\n  }\n\n  const err = _this.$__.validationError;\n  _this.$__.validationError = undefined;\n  _this.$emit('validate', _this);\n  _this.constructor.emit('validate', _this);\n\n  if (err) {\n    for (const key in err.errors) {\n      // Make sure cast errors persist\n      if (err.errors[key] instanceof MongooseError.CastError) {\n        _this.invalidate(key, err.errors[key]);\n      }\n    }\n  }\n\n  return err;\n};\n\n/**\n * Marks a path as invalid, causing validation to fail.\n *\n * The `errorMsg` argument will become the message of the `ValidationError`.\n *\n * The `value` argument (if passed) will be available through the `ValidationError.value` property.\n *\n *     doc.invalidate('size', 'must be less than 20', 14);\n *\n *     doc.validate(function (err) {\n *       console.log(err)\n *       // prints\n *       { message: 'Validation failed',\n *         name: 'ValidationError',\n *         errors:\n *          { size:\n *             { message: 'must be less than 20',\n *               name: 'ValidatorError',\n *               path: 'size',\n *               type: 'user defined',\n *               value: 14 } } }\n *     })\n *\n * @param {String} path the field to invalidate. For array elements, use the `array.i.field` syntax, where `i` is the 0-based index in the array.\n * @param {String|Error} err the error which states the reason `path` was invalid\n * @param {Object|String|Number|any} val optional invalid value\n * @param {String} [kind] optional `kind` property for the error\n * @return {ValidationError} the current ValidationError, with all currently invalidated paths\n * @api public\n */\n\nDocument.prototype.invalidate = function(path, err, val, kind) {\n  if (!this.$__.validationError) {\n    this.$__.validationError = new ValidationError(this);\n  }\n\n  if (this.$__.validationError.errors[path]) {\n    return;\n  }\n\n  if (!err || typeof err === 'string') {\n    err = new ValidatorError({\n      path: path,\n      message: err,\n      type: kind || 'user defined',\n      value: val\n    });\n  }\n\n  if (this.$__.validationError === err) {\n    return this.$__.validationError;\n  }\n\n  this.$__.validationError.addError(path, err);\n  return this.$__.validationError;\n};\n\n/**\n * Marks a path as valid, removing existing validation errors.\n *\n * @param {String} path the field to mark as valid\n * @api public\n * @memberOf Document\n * @instance\n * @method $markValid\n */\n\nDocument.prototype.$markValid = function(path) {\n  if (!this.$__.validationError?.errors[path]) {\n    return;\n  }\n\n  delete this.$__.validationError.errors[path];\n  if (utils.hasOwnKeys(this.$__.validationError.errors) === false) {\n    this.$__.validationError = null;\n  }\n};\n\n/*!\n * ignore\n */\n\nfunction _markValidSubpaths(doc, path) {\n  if (!doc.$__.validationError) {\n    return;\n  }\n\n  const keys = Object.keys(doc.$__.validationError.errors);\n  for (const key of keys) {\n    if (key.startsWith(path + '.')) {\n      delete doc.$__.validationError.errors[key];\n    }\n  }\n  if (utils.hasOwnKeys(doc.$__.validationError.errors) === false) {\n    doc.$__.validationError = null;\n  }\n}\n\n/*!\n * ignore\n */\n\nfunction _checkImmutableSubpaths(subdoc, schematype, priorVal) {\n  const schema = schematype.schema;\n  if (schema == null) {\n    return;\n  }\n\n  for (const key of Object.keys(schema.paths)) {\n    const path = schema.paths[key];\n    if (path.$immutableSetter == null) {\n      continue;\n    }\n    const oldVal = priorVal == null ? void 0 : priorVal.$__getValue(key);\n    // Calling immutableSetter with `oldVal` even though it expects `newVal`\n    // is intentional. That's because `$immutableSetter` compares its param\n    // to the current value.\n    path.$immutableSetter.call(subdoc, oldVal);\n  }\n}\n\n/**\n * Saves this document by inserting a new document into the database if [document.isNew](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()) is `true`,\n * or sends an [updateOne](https://mongoosejs.com/docs/api/document.html#Document.prototype.updateOne()) operation **only** with the modifications to the database, it does not replace the whole document in the latter case.\n *\n * #### Example:\n *\n *     product.sold = Date.now();\n *     product = await product.save();\n *\n * If save is successful, the returned promise will fulfill with the document\n * saved.\n *\n * #### Example:\n *\n *     const newProduct = await product.save();\n *     newProduct === product; // true\n *\n * @param {Object} [options] options optional options\n * @param {Session} [options.session=null] the [session](https://www.mongodb.com/docs/manual/reference/server-sessions/) associated with this save operation. If not specified, defaults to the [document's associated session](https://mongoosejs.com/docs/api/document.html#Document.prototype.$session()).\n * @param {Object} [options.safe] (DEPRECATED) overrides [schema's safe option](https://mongoosejs.com/docs/guide.html#safe). Use the `w` option instead.\n * @param {Boolean} [options.validateBeforeSave] set to false to save without validating.\n * @param {Boolean} [options.validateModifiedOnly=false] If `true`, Mongoose will only validate modified paths, as opposed to modified paths and `required` paths.\n * @param {Number|String} [options.w] set the [write concern](https://www.mongodb.com/docs/manual/reference/write-concern/#w-option). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)\n * @param {Boolean} [options.j] set to true for MongoDB to wait until this `save()` has been [journaled before resolving the returned promise](https://www.mongodb.com/docs/manual/reference/write-concern/#j-option). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern)\n * @param {Number} [options.wtimeout] sets a [timeout for the write concern](https://www.mongodb.com/docs/manual/reference/write-concern/#wtimeout). Overrides the [schema-level `writeConcern` option](https://mongoosejs.com/docs/guide.html#writeConcern).\n * @param {Boolean} [options.checkKeys=true] the MongoDB driver prevents you from saving keys that start with '$' or contain '.' by default. Set this option to `false` to skip that check. See [restrictions on field names](https://www.mongodb.com/docs/manual/reference/limits/#Restrictions-on-Field-Names)\n * @param {Boolean} [options.timestamps=true] if `false` and [timestamps](https://mongoosejs.com/docs/guide.html#timestamps) are enabled, skip timestamps for this `save()`.\n * @method save\n * @memberOf Document\n * @instance\n * @throws {DocumentNotFoundError} if this [save updates an existing document](https://mongoosejs.com/docs/api/document.html#Document.prototype.isNew()) but the document doesn't exist in the database. For example, you will get this error if the document is [deleted between when you retrieved the document and when you saved it](documents.html#updating).\n * @return {Promise}\n * @api public\n * @see middleware https://mongoosejs.com/docs/middleware.html\n */\n\n/**\n * Checks if a path is invalid\n *\n * @param {String|String[]} [path] the field to check. If unset will always return \"false\"\n * @method $isValid\n * @memberOf Document\n * @instance\n * @api private\n */\n\nDocument.prototype.$isValid = function(path) {\n  if (this.$__.validationError == null || utils.hasOwnKeys(this.$__.validationError.errors) === false) {\n    return true;\n  }\n  if (path == null) {\n    return false;\n  }\n\n  if (path.indexOf(' ') !== -1) {\n    path = path.split(' ');\n  }\n  if (Array.isArray(path)) {\n    return path.some(p => this.$__.validationError.errors[p] == null);\n  }\n\n  return this.$__.validationError.errors[path] == null;\n};\n\n/**\n * Resets the internal modified state of this document.\n *\n * @api private\n * @return {Document} this\n * @method $__reset\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__reset = function reset() {\n  let _this = this;\n\n  // Skip for subdocuments\n  const subdocs = !this.$isSubdocument ? this.$getAllSubdocs({ useCache: true }) : null;\n  if (subdocs?.length > 0) {\n    for (const subdoc of subdocs) {\n      subdoc.$__reset();\n    }\n  }\n\n  // clear atomics\n  this.$__dirty().forEach(function(dirt) {\n    const type = dirt.value;\n\n    if (type && typeof type.clearAtomics === 'function') {\n      type.clearAtomics();\n    } else if (type && type[arrayAtomicsSymbol]) {\n      type[arrayAtomicsBackupSymbol] = type[arrayAtomicsSymbol];\n      type[arrayAtomicsSymbol] = {};\n    }\n  });\n\n  this.$__.backup = {};\n  this.$__.backup.activePaths = {\n    modify: Object.assign({}, this.$__.activePaths.getStatePaths('modify')),\n    default: Object.assign({}, this.$__.activePaths.getStatePaths('default'))\n  };\n  this.$__.backup.validationError = this.$__.validationError;\n  this.$__.backup.errors = this.$errors;\n\n  // Clear 'dirty' cache\n  this.$__.activePaths.clear('modify');\n  this.$__.activePaths.clear('default');\n  this.$__.validationError = undefined;\n  this.$errors = undefined;\n  _this = this;\n  this.$__schema.requiredPaths().forEach(function(path) {\n    _this.$__.activePaths.require(path);\n  });\n\n  return this;\n};\n\n/*!\n * ignore\n */\n\nDocument.prototype.$__undoReset = function $__undoReset() {\n  if (this.$__.backup?.activePaths == null) {\n    return;\n  }\n\n  this.$__.activePaths.states.modify = this.$__.backup.activePaths.modify;\n  this.$__.activePaths.states.default = this.$__.backup.activePaths.default;\n\n  this.$__.validationError = this.$__.backup.validationError;\n  this.$errors = this.$__.backup.errors;\n\n  for (const dirt of this.$__dirty()) {\n    const type = dirt.value;\n\n    if (type?.[arrayAtomicsSymbol] && type[arrayAtomicsBackupSymbol]) {\n      type[arrayAtomicsSymbol] = type[arrayAtomicsBackupSymbol];\n    }\n  }\n\n  if (!this.$isSubdocument) {\n    for (const subdoc of this.$getAllSubdocs()) {\n      subdoc.$__undoReset();\n    }\n  }\n};\n\n/**\n * Returns this documents dirty paths / vals.\n *\n * @return {Array}\n * @api private\n * @method $__dirty\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__dirty = function() {\n  const _this = this;\n  let all = this.$__.activePaths.map('modify', function(path) {\n    return {\n      path: path,\n      value: _this.$__getValue(path),\n      schema: _this.$__path(path)\n    };\n  });\n\n  // gh-2558: if we had to set a default and the value is not undefined,\n  // we have to save as well\n  all = all.concat(this.$__.activePaths.map('default', function(path) {\n    if (path === '_id' || _this.$__getValue(path) == null) {\n      return;\n    }\n    return {\n      path: path,\n      value: _this.$__getValue(path),\n      schema: _this.$__path(path)\n    };\n  }));\n\n  const allPaths = new Map(all.filter((el) => el != null).map((el) => [el.path, el.value]));\n  // Ignore \"foo.a\" if \"foo\" is dirty already.\n  const minimal = [];\n\n  all.forEach(function(item) {\n    if (!item) {\n      return;\n    }\n\n    let top = null;\n\n    const array = parentPaths(item.path);\n    for (let i = 0; i < array.length - 1; i++) {\n      if (allPaths.has(array[i])) {\n        top = allPaths.get(array[i]);\n        break;\n      }\n    }\n    if (top == null) {\n      minimal.push(item);\n    } else if (top != null &&\n        top[arrayAtomicsSymbol] != null &&\n        top.hasAtomics()) {\n      // special case for top level MongooseArrays\n      // the `top` array itself and a sub path of `top` are being set.\n      // the only way to honor all of both modifications is through a $set\n      // of entire array.\n      top[arrayAtomicsSymbol] = {};\n      top[arrayAtomicsSymbol].$set = top;\n    }\n  });\n  return minimal;\n};\n\n/**\n * Assigns/compiles `schema` into this documents prototype.\n *\n * @param {Schema} schema\n * @api private\n * @method $__setSchema\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__setSchema = function(schema) {\n  compile(schema.tree, this, undefined, schema.options);\n\n  // Apply default getters if virtual doesn't have any (gh-6262)\n  for (const key of Object.keys(schema.virtuals)) {\n    schema.virtuals[key]._applyDefaultGetters();\n  }\n  if (schema.path('schema') == null) {\n    this.schema = schema;\n  }\n  this.$__schema = schema;\n  this.$__middleware = schema._getDocumentMiddleware();\n  this[documentSchemaSymbol] = schema;\n};\n\n\n/**\n * Get active path that were changed and are arrays\n *\n * @return {Array}\n * @api private\n * @method $__getArrayPathsToValidate\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__getArrayPathsToValidate = function() {\n  DocumentArray || (DocumentArray = require('./types/documentArray'));\n\n  // validate all document arrays.\n  return this.$__.activePaths\n    .map('init', 'modify', function(i) {\n      return this.$__getValue(i);\n    }.bind(this))\n    .filter(function(val) {\n      return val && Array.isArray(val) && utils.isMongooseDocumentArray(val) && val.length;\n    }).reduce(function(seed, array) {\n      return seed.concat(array);\n    }, [])\n    .filter(function(doc) {\n      return doc;\n    });\n};\n\n\n/**\n * Get all subdocs (by bfs)\n *\n * @param {Object} [options] options. Currently for internal use.\n * @return {Array}\n * @api public\n * @method $getAllSubdocs\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$getAllSubdocs = function(options) {\n  if (options?.useCache && this.$__.saveOptions?.__subdocs) {\n    return this.$__.saveOptions.__subdocs;\n  }\n\n  DocumentArray || (DocumentArray = require('./types/documentArray'));\n  Embedded = Embedded || require('./types/arraySubdocument');\n\n  const subDocs = [];\n  function getSubdocs(doc) {\n    const newSubdocs = [];\n\n    for (const { model } of doc.$__schema.childSchemas) {\n      // Avoid using `childSchemas.path` to avoid compatibility versions with pre-8.8 versions of Mongoose\n      const val = doc.$__getValue(model.path);\n      if (val == null) {\n        continue;\n      }\n      if (val.$__) {\n        newSubdocs.push(val);\n      }\n      if (Array.isArray(val)) {\n        for (const el of val) {\n          if (el?.$__) {\n            newSubdocs.push(el);\n          }\n        }\n      }\n      if (val instanceof Map) {\n        for (const el of val.values()) {\n          if (el?.$__) {\n            newSubdocs.push(el);\n          }\n        }\n      }\n    }\n\n    for (const subdoc of newSubdocs) {\n      getSubdocs(subdoc);\n    }\n    subDocs.push(...newSubdocs);\n  }\n\n  getSubdocs(this);\n\n  if (this.$__.saveOptions) {\n    this.$__.saveOptions.__subdocs = subDocs;\n  }\n\n  return subDocs;\n};\n\n/*!\n * Runs queued functions\n */\n\nfunction applyQueue(doc) {\n  const q = doc.$__schema && doc.$__schema.callQueue;\n  if (!q.length) {\n    return;\n  }\n\n  for (const pair of q) {\n    if (pair[0] !== 'pre' && pair[0] !== 'post' && pair[0] !== 'on') {\n      doc[pair[0]].apply(doc, pair[1]);\n    }\n  }\n}\n\n/*!\n * ignore\n */\n\nDocument.prototype.$__handleReject = function handleReject(err) {\n  // emit on the Model if listening\n  if (this.$listeners('error').length) {\n    this.$emit('error', err);\n  } else if (this.constructor.listeners?.('error').length) {\n    this.constructor.emit('error', err);\n  }\n};\n\n/**\n * Internal common logic for toObject() and toJSON()\n *\n * @return {Object}\n * @api private\n * @method $toObject\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$toObject = function(options, json) {\n  const defaultOptions = this.$__schema._defaultToObjectOptions(json);\n\n  const hasOnlyPrimitiveValues = this.$__hasOnlyPrimitiveValues();\n\n  // If options do not exist or is not an object, set it to empty object\n  options = utils.isPOJO(options) ? { ...options } : {};\n  options._calledWithOptions = options._calledWithOptions || { ...options };\n\n  let _minimize;\n  if (options._calledWithOptions.minimize != null) {\n    _minimize = options.minimize;\n  } else if (this.$__schemaTypeOptions?.minimize != null) {\n    _minimize = this.$__schemaTypeOptions.minimize;\n  } else if (defaultOptions?.minimize != null) {\n    _minimize = defaultOptions.minimize;\n  } else {\n    _minimize = this.$__schema.options.minimize;\n  }\n\n  options.minimize = _minimize;\n  if (!hasOnlyPrimitiveValues) {\n    options._seen = options._seen || new Map();\n  }\n\n  const depopulate = options._calledWithOptions.depopulate\n    ?? defaultOptions?.depopulate\n    ?? options.depopulate\n    ?? false;\n  // _isNested will only be true if this is not the top level document, we\n  // should never depopulate the top-level document\n  if (depopulate && options._isNested && this.$__.wasPopulated) {\n    return clone(this.$__.wasPopulated.value || this._doc._id, options);\n  }\n  if (depopulate) {\n    options.depopulate = true;\n  }\n\n  // merge default options with input options.\n  if (defaultOptions != null) {\n    for (const key of Object.keys(defaultOptions)) {\n      if (options[key] == null) {\n        options[key] = defaultOptions[key];\n      }\n    }\n  }\n  options._isNested = true;\n  options.json = json;\n  options.minimize = _minimize;\n\n  const parentOptions = options._parentOptions;\n  // Parent options should only bubble down for subdocuments, not populated docs\n  options._parentOptions = this.$isSubdocument ? options : null;\n\n  const schemaFieldsOnly = options._calledWithOptions.schemaFieldsOnly\n    ?? options.schemaFieldsOnly\n    ?? defaultOptions.schemaFieldsOnly\n    ?? false;\n\n  let ret;\n  if (hasOnlyPrimitiveValues && !options.flattenObjectIds) {\n    // Fast path: if we don't have any nested objects or arrays, we only need a\n    // shallow clone.\n    ret = this.$__toObjectShallow(schemaFieldsOnly);\n  } else if (schemaFieldsOnly) {\n    ret = {};\n    for (const path of Object.keys(this.$__schema.paths)) {\n      const value = this.$__getValue(path);\n      if (value === undefined) {\n        continue;\n      }\n      let pathToSet = path;\n      let objToSet = ret;\n      if (path.indexOf('.') !== -1) {\n        const segments = path.split('.');\n        pathToSet = segments[segments.length - 1];\n        for (let i = 0; i < segments.length - 1; ++i) {\n          objToSet[segments[i]] = objToSet[segments[i]] ?? {};\n          objToSet = objToSet[segments[i]];\n        }\n      }\n      if (value === null) {\n        objToSet[pathToSet] = null;\n        continue;\n      }\n      objToSet[pathToSet] = clone(value, options);\n    }\n  } else {\n    ret = clone(this._doc, options) || {};\n  }\n\n  const getters = options._calledWithOptions.getters\n    ?? options.getters\n    ?? defaultOptions.getters\n    ?? false;\n\n  if (getters) {\n    applyGetters(this, ret);\n\n    if (options.minimize) {\n      ret = minimize(ret) || {};\n    }\n  }\n\n  const virtuals = options._calledWithOptions.virtuals\n    ?? defaultOptions.virtuals\n    ?? parentOptions?.virtuals\n    ?? undefined;\n\n  if (virtuals || (getters && virtuals !== false)) {\n    applyVirtuals(this, ret, options, options);\n  }\n\n  if (options.versionKey === false && this.$__schema.options.versionKey) {\n    delete ret[this.$__schema.options.versionKey];\n  }\n\n  const transform = options._calledWithOptions.transform ?? true;\n  let transformFunction = undefined;\n  if (transform === true) {\n    transformFunction = defaultOptions.transform;\n  } else if (typeof transform === 'function') {\n    transformFunction = transform;\n  }\n\n  // In the case where a subdocument has its own transform function, we need to\n  // check and see if the parent has a transform (options.transform) and if the\n  // child schema has a transform (this.schema.options.toObject) In this case,\n  // we need to adjust options.transform to be the child schema's transform and\n  // not the parent schema's\n  if (transform) {\n    applySchemaTypeTransforms(this, ret);\n  }\n\n  if (options.useProjection) {\n    omitDeselectedFields(this, ret);\n  }\n\n  if (typeof transformFunction === 'function') {\n    const xformed = transformFunction(this, ret, options);\n    if (typeof xformed !== 'undefined') {\n      ret = xformed;\n    }\n  }\n\n  return ret;\n};\n\n/*!\n * Internal shallow clone alternative to `$toObject()`: much faster, no options processing\n */\n\nDocument.prototype.$__toObjectShallow = function $__toObjectShallow(schemaFieldsOnly) {\n  const ret = {};\n  if (this._doc != null) {\n    const keys = schemaFieldsOnly ? Object.keys(this.$__schema.paths) : Object.keys(this._doc);\n    for (const key of keys) {\n      // Safe to do this even in the schemaFieldsOnly case because we assume there's no nested paths\n      const value = this._doc[key];\n      if (value instanceof Date) {\n        ret[key] = new Date(value);\n      } else if (value !== undefined) {\n        ret[key] = value;\n      }\n    }\n  }\n\n  return ret;\n};\n\n/**\n * Converts this document into a plain-old JavaScript object ([POJO](https://masteringjs.io/tutorials/fundamentals/pojo)).\n *\n * Buffers are converted to instances of [mongodb.Binary](https://mongodb.github.io/node-mongodb-native/4.9/classes/Binary.html) for proper storage.\n *\n * #### Getters/Virtuals\n *\n * Example of only applying path getters\n *\n *     doc.toObject({ getters: true, virtuals: false })\n *\n * Example of only applying virtual getters\n *\n *     doc.toObject({ virtuals: true })\n *\n * Example of applying both path and virtual getters\n *\n *     doc.toObject({ getters: true })\n *\n * To apply these options to every document of your schema by default, set your [schemas](https://mongoosejs.com/docs/api/schema.html#Schema()) `toObject` option to the same argument.\n *\n *     schema.set('toObject', { virtuals: true })\n *\n * #### Transform:\n *\n * We may need to perform a transformation of the resulting object based on some criteria, say to remove some sensitive information or return a custom object. In this case we set the optional `transform` function.\n *\n * Transform functions receive three arguments\n *\n *     function (doc, ret, options) {}\n *\n * - `doc` The mongoose document which is being converted\n * - `ret` The plain object representation which has been converted\n * - `options` The options in use (either schema options or the options passed inline)\n *\n * #### Example:\n *\n *     // specify the transform schema option\n *     if (!schema.options.toObject) schema.options.toObject = {};\n *     schema.options.toObject.transform = function (doc, ret, options) {\n *       // remove the _id of every document before returning the result\n *       delete ret._id;\n *       return ret;\n *     }\n *\n *     // without the transformation in the schema\n *     doc.toObject(); // { _id: 'anId', name: 'Wreck-it Ralph' }\n *\n *     // with the transformation\n *     doc.toObject(); // { name: 'Wreck-it Ralph' }\n *\n * With transformations we can do a lot more than remove properties. We can even return completely new customized objects:\n *\n *     if (!schema.options.toObject) schema.options.toObject = {};\n *     schema.options.toObject.transform = function (doc, ret, options) {\n *       return { movie: ret.name }\n *     }\n *\n *     // without the transformation in the schema\n *     doc.toObject(); // { _id: 'anId', name: 'Wreck-it Ralph' }\n *\n *     // with the transformation\n *     doc.toObject(); // { movie: 'Wreck-it Ralph' }\n *\n * _Note: if a transform function returns `undefined`, the return value will be ignored._\n *\n * Transformations may also be applied inline, overridding any transform set in the schema options.\n * Any transform function specified in `toObject` options also propagates to any subdocuments.\n *\n *     function deleteId(doc, ret, options) {\n *       delete ret._id;\n *       return ret;\n *     }\n *\n *     const schema = mongoose.Schema({ name: String, docArr: [{ name: String }] });\n *     const TestModel = mongoose.model('Test', schema);\n *\n *     const doc = new TestModel({ name: 'test', docArr: [{ name: 'test' }] });\n *\n *     // pass the transform as an inline option. Deletes `_id` property\n *     // from both the top-level document and the subdocument.\n *     const obj = doc.toObject({ transform: deleteId });\n *     obj._id; // undefined\n *     obj.docArr[0]._id; // undefined\n *\n * If you want to skip transformations, use `transform: false`:\n *\n *     schema.options.toObject = {\n *       hide: '_id',\n *       transform: function(doc, ret, options) {\n *         if (options.hide) {\n *           options.hide.split(' ').forEach(function(prop) {\n *             delete ret[prop];\n *           });\n *         }\n *         return ret;\n *       }\n *     };\n *\n *     const doc = new Doc({ _id: 'anId', secret: 47, name: 'Wreck-it Ralph' });\n *     doc.toObject();                                        // { secret: 47, name: 'Wreck-it Ralph' }\n *     doc.toObject({ hide: 'secret _id', transform: false });// { _id: 'anId', secret: 47, name: 'Wreck-it Ralph' }\n *     doc.toObject({ hide: 'secret _id', transform: true }); // { name: 'Wreck-it Ralph' }\n *\n * If you pass a transform in `toObject()` options, Mongoose will apply the transform\n * to [subdocuments](https://mongoosejs.com/docs/subdocs.html) in addition to the top-level document.\n * Similarly, `transform: false` skips transforms for all subdocuments.\n * Note that this behavior is different for transforms defined in the schema:\n * if you define a transform in `schema.options.toObject.transform`, that transform\n * will **not** apply to subdocuments.\n *\n *     const memberSchema = new Schema({ name: String, email: String });\n *     const groupSchema = new Schema({ members: [memberSchema], name: String, email });\n *     const Group = mongoose.model('Group', groupSchema);\n *\n *     const doc = new Group({\n *       name: 'Engineering',\n *       email: 'dev@mongoosejs.io',\n *       members: [{ name: 'Val', email: 'val@mongoosejs.io' }]\n *     });\n *\n *     // Removes `email` from both top-level document **and** array elements\n *     // { name: 'Engineering', members: [{ name: 'Val' }] }\n *     doc.toObject({ transform: (doc, ret) => { delete ret.email; return ret; } });\n *\n * Transforms, like all of these options, are also available for `toJSON`. See [this guide to `JSON.stringify()`](https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript.html) to learn why `toJSON()` and `toObject()` are separate functions.\n *\n * See [schema options](https://mongoosejs.com/docs/guide.html#toObject) for some more details.\n *\n * _During save, no custom options are applied to the document before being sent to the database._\n *\n * @param {Object} [options]\n * @param {Boolean} [options.getters=false] if true, apply all getters, including virtuals\n * @param {Boolean|Object} [options.virtuals=false] if true, apply virtuals, including aliases. Use `{ getters: true, virtuals: false }` to just apply getters, not virtuals. An object of the form `{ pathsToSkip: ['someVirtual'] }` may also be used to omit specific virtuals.\n * @param {Boolean} [options.aliases=true] if `options.virtuals = true`, you can set `options.aliases = false` to skip applying aliases. This option is a no-op if `options.virtuals = false`.\n * @param {Boolean} [options.minimize=true] if true, omit any empty objects from the output\n * @param {Function|null} [options.transform=null] if set, mongoose will call this function to allow you to transform the returned object\n * @param {Boolean} [options.depopulate=false] if true, replace any conventionally populated paths with the original id in the output. Has no affect on virtual populated paths.\n * @param {Boolean} [options.versionKey=true] if false, exclude the version key (`__v` by default) from the output\n * @param {Boolean} [options.flattenMaps=false] if true, convert Maps to POJOs. Useful if you want to `JSON.stringify()` the result of `toObject()`.\n * @param {Boolean} [options.flattenObjectIds=false] if true, convert any ObjectIds in the result to 24 character hex strings.\n * @param {Boolean} [options.useProjection=false] - If true, omits fields that are excluded in this document's projection. Unless you specified a projection, this will omit any field that has `select: false` in the schema.\n * @param {Boolean} [options.schemaFieldsOnly=false] - If true, the resulting object will only have fields that are defined in the document's schema. By default, `toObject()` returns all fields in the underlying document from MongoDB, including ones that are not listed in the schema.\n * @return {Object} document as a plain old JavaScript object (POJO). This object may contain ObjectIds, Maps, Dates, mongodb.Binary, Buffers, and other non-POJO values.\n * @see mongodb.Binary https://mongodb.github.io/node-mongodb-native/4.9/classes/Binary.html\n * @api public\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.toObject = function(options) {\n  return this.$toObject(options);\n};\n\n/*!\n * Applies virtuals properties to `json`.\n */\n\nfunction applyVirtuals(self, json, options, toObjectOptions) {\n  const schema = self.$__schema;\n  const virtuals = schema.virtuals;\n  const paths = Object.keys(virtuals);\n  let i = paths.length;\n  const numPaths = i;\n  let path;\n  let assignPath;\n  let cur = self._doc;\n  let v;\n  const aliases = typeof toObjectOptions?.aliases === 'boolean'\n    ? toObjectOptions.aliases\n    : true;\n\n  options = options || {};\n  let virtualsToApply = null;\n  if (Array.isArray(options.virtuals)) {\n    virtualsToApply = new Set(options.virtuals);\n  } else if (options.virtuals?.pathsToSkip) {\n    virtualsToApply = new Set(paths);\n    for (let i = 0; i < options.virtuals.pathsToSkip.length; i++) {\n      if (virtualsToApply.has(options.virtuals.pathsToSkip[i])) {\n        virtualsToApply.delete(options.virtuals.pathsToSkip[i]);\n      }\n    }\n  }\n\n  if (!cur) {\n    return json;\n  }\n\n  for (i = 0; i < numPaths; ++i) {\n    path = paths[i];\n\n    if (virtualsToApply != null && !virtualsToApply.has(path)) {\n      continue;\n    }\n\n    // Allow skipping aliases with `toObject({ virtuals: true, aliases: false })`\n    if (!aliases && Object.hasOwn(schema.aliases, path)) {\n      continue;\n    }\n\n    // We may be applying virtuals to a nested object, for example if calling\n    // `doc.nestedProp.toJSON()`. If so, the path we assign to, `assignPath`,\n    // will be a trailing substring of the `path`.\n    assignPath = path;\n    if (options.path != null) {\n      if (!path.startsWith(options.path + '.')) {\n        continue;\n      }\n      assignPath = path.substring(options.path.length + 1);\n    }\n    if (assignPath.indexOf('.') === -1 && assignPath === path) {\n      v = virtuals[path].applyGetters(void 0, self);\n      if (v === void 0) {\n        continue;\n      }\n      v = clone(v, options);\n      json[assignPath] = v;\n      continue;\n    }\n    const parts = assignPath.split('.');\n    v = clone(self.get(path), options);\n    if (v === void 0) {\n      continue;\n    }\n    const plen = parts.length;\n    cur = json;\n    for (let j = 0; j < plen - 1; ++j) {\n      cur[parts[j]] = cur[parts[j]] || {};\n      cur = cur[parts[j]];\n    }\n    cur[parts[plen - 1]] = v;\n  }\n\n  return json;\n}\n\n\n/**\n * Applies virtuals properties to `json`.\n *\n * @param {Document} self\n * @param {Object} json\n * @return {Object} `json`\n * @api private\n */\n\nfunction applyGetters(self, json) {\n  const schema = self.$__schema;\n  const paths = Object.keys(schema.paths);\n  let i = paths.length;\n  let path;\n  let cur = self._doc;\n  let v;\n\n  if (!cur) {\n    return json;\n  }\n\n  while (i--) {\n    path = paths[i];\n\n    const parts = path.split('.');\n\n    const plen = parts.length;\n    const last = plen - 1;\n    let branch = json;\n    let part;\n    cur = self._doc;\n\n    if (!self.$__isSelected(path)) {\n      continue;\n    }\n\n    for (let ii = 0; ii < plen; ++ii) {\n      part = parts[ii];\n      v = cur[part];\n      // If we've reached a non-object part of the branch, continuing would\n      // cause \"Cannot create property 'foo' on string 'bar'\" error.\n      // Necessary for mongoose-intl plugin re: gh-14446\n      if (branch != null && typeof branch !== 'object') {\n        break;\n      } else if (ii === last) {\n        branch[part] = schema.paths[path].applyGetters(\n          branch[part],\n          self\n        );\n        if (Array.isArray(branch[part]) && schema.paths[path].embeddedSchemaType) {\n          for (let i = 0; i < branch[part].length; ++i) {\n            branch[part][i] = schema.paths[path].embeddedSchemaType.applyGetters(\n              branch[part][i],\n              self\n            );\n          }\n        }\n      } else if (v == null) {\n        if (part in cur) {\n          branch[part] = v;\n        }\n        break;\n      } else {\n        branch = branch[part] || (branch[part] = {});\n      }\n      cur = v;\n    }\n  }\n\n  return json;\n}\n\n/**\n * Applies schema type transforms to `json`.\n *\n * @param {Document} self\n * @param {Object} json\n * @return {Object} `json`\n * @api private\n */\n\nfunction applySchemaTypeTransforms(self, json) {\n  const schema = self.$__schema;\n  const paths = Object.keys(schema.paths || {});\n  const cur = self._doc;\n\n  if (!cur) {\n    return json;\n  }\n\n  for (const path of paths) {\n    const schematype = schema.paths[path];\n    const topLevelTransformFunction = schematype.options.transform ?? schematype.constructor?.defaultOptions?.transform;\n    const embeddedSchemaTypeTransformFunction = schematype.embeddedSchemaType?.options?.transform\n      ?? schematype.embeddedSchemaType?.constructor?.defaultOptions?.transform;\n    if (typeof topLevelTransformFunction === 'function') {\n      const val = self.$get(path);\n      if (val === undefined) {\n        continue;\n      }\n      const transformedValue = topLevelTransformFunction.call(self, val);\n      throwErrorIfPromise(path, transformedValue);\n      utils.setValue(path, transformedValue, json);\n    } else if (typeof embeddedSchemaTypeTransformFunction === 'function') {\n      const val = self.$get(path);\n      if (val === undefined) {\n        continue;\n      }\n      const vals = [].concat(val);\n      for (let i = 0; i < vals.length; ++i) {\n        const transformedValue = embeddedSchemaTypeTransformFunction.call(self, vals[i]);\n        vals[i] = transformedValue;\n        throwErrorIfPromise(path, transformedValue);\n      }\n\n      json[path] = vals;\n    }\n  }\n\n  return json;\n}\n\nfunction throwErrorIfPromise(path, transformedValue) {\n  if (isPromise(transformedValue)) {\n    throw new Error('`transform` function must be synchronous, but the transform on path `' + path + '` returned a promise.');\n  }\n}\n\n/*!\n * ignore\n */\n\nfunction omitDeselectedFields(self, json) {\n  const schema = self.$__schema;\n  const paths = Object.keys(schema.paths || {});\n  const cur = self._doc;\n\n  if (!cur) {\n    return json;\n  }\n\n  let selected = self.$__.selected;\n  if (selected === void 0) {\n    selected = {};\n    queryhelpers.applyPaths(selected, schema);\n  }\n  if (selected == null || utils.hasOwnKeys(selected) === false) {\n    return json;\n  }\n\n  for (const path of paths) {\n    if (selected[path] != null && !selected[path]) {\n      delete json[path];\n    }\n  }\n\n  return json;\n}\n\n/**\n * The return value of this method is used in calls to [`JSON.stringify(doc)`](https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript#the-tojson-function).\n *\n * This method accepts the same options as [Document#toObject](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()). To apply the options to every document of your schema by default, set your [schemas](https://mongoosejs.com/docs/api/schema.html#Schema()) `toJSON` option to the same argument.\n *\n *     schema.set('toJSON', { virtuals: true });\n *\n * There is one difference between `toJSON()` and `toObject()` options.\n * When you call `toJSON()`, the [`flattenMaps` option](https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()) defaults to `true`, because `JSON.stringify()` doesn't convert maps to objects by default.\n * When you call `toObject()`, the `flattenMaps` option is `false` by default.\n *\n * See [schema options](https://mongoosejs.com/docs/guide.html#toJSON) for more information on setting `toJSON` option defaults.\n *\n * @param {Object} options\n * @param {Boolean} [options.flattenMaps=true] if true, convert Maps to [POJOs](https://masteringjs.io/tutorials/fundamentals/pojo). Useful if you want to `JSON.stringify()` the result.\n * @param {Boolean} [options.flattenObjectIds=false] if true, convert any ObjectIds in the result to 24 character hex strings.\n * @param {Boolean} [options.schemaFieldsOnly=false] - If true, the resulting object will only have fields that are defined in the document's schema. By default, `toJSON()` returns all fields in the underlying document from MongoDB, including ones that are not listed in the schema.\n * @return {Object}\n * @see Document#toObject https://mongoosejs.com/docs/api/document.html#Document.prototype.toObject()\n * @see JSON.stringify() in JavaScript https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript.html\n * @api public\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.toJSON = function(options) {\n  return this.$toObject(options, true);\n};\n\n/*!\n * ignore\n */\n\nDocument.prototype.ownerDocument = function() {\n  return this;\n};\n\n\n/**\n * If this document is a subdocument or populated document, returns the document's\n * parent. Returns the original document if there is no parent.\n *\n * @return {Document}\n * @api public\n * @method parent\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.parent = function() {\n  if (this.$isSubdocument || this.$__.wasPopulated) {\n    return this.$__.parent;\n  }\n  return this;\n};\n\n/**\n * Alias for [`parent()`](https://mongoosejs.com/docs/api/document.html#Document.prototype.parent()). If this document is a subdocument or populated\n * document, returns the document's parent. Returns `undefined` otherwise.\n *\n * @return {Document}\n * @api public\n * @method $parent\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$parent = Document.prototype.parent;\n\n/**\n * Set the parent of this document.\n *\n * @param {Document} parent\n * @api private\n * @method $__setParent\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__setParent = function $__setParent(parent) {\n  this.$__.parent = parent;\n};\n\n/**\n * Helper for console.log\n *\n * @return {String}\n * @api public\n * @method inspect\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.inspect = function(options) {\n  const isPOJO = utils.isPOJO(options);\n  let opts;\n  if (isPOJO) {\n    opts = options;\n    opts.minimize = false;\n  }\n\n  const ret = arguments.length > 0 ? this.toObject(opts) : this.toObject();\n\n  if (ret == null) {\n    // If `toObject()` returns null, `this` is still an object, so if `inspect()`\n    // prints out null this can cause some serious confusion. See gh-7942.\n    return 'MongooseDocument { ' + ret + ' }';\n  }\n\n  return ret;\n};\n\nif (inspect.custom) {\n  // Avoid Node deprecation warning DEP0079\n  Document.prototype[inspect.custom] = Document.prototype.inspect;\n}\n\n/**\n * Helper for console.log\n *\n * @return {String}\n * @api public\n * @method toString\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.toString = function() {\n  const ret = this.inspect();\n  if (typeof ret === 'string') {\n    return ret;\n  }\n  return inspect(ret);\n};\n\n/**\n * Returns true if this document is equal to another document.\n *\n * Documents are considered equal when they have matching `_id`s, unless neither\n * document has an `_id`, in which case this function falls back to using\n * `deepEqual()`.\n *\n * @param {Document} [doc] a document to compare. If falsy, will always return \"false\".\n * @return {Boolean}\n * @api public\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.equals = function(doc) {\n  if (!doc) {\n    return false;\n  }\n\n  const tid = this.$__getValue('_id');\n  const docid = doc.$__ != null ? doc.$__getValue('_id') : doc;\n  if (!tid && !docid) {\n    return deepEqual(this, doc);\n  }\n  return tid && tid.equals\n    ? tid.equals(docid)\n    : tid === docid;\n};\n\n/**\n * Populates paths on an existing document.\n *\n * #### Example:\n *\n *     // Given a document, `populate()` lets you pull in referenced docs\n *     await doc.populate([\n *       'stories',\n *       { path: 'fans', sort: { name: -1 } }\n *     ]);\n *     doc.populated('stories'); // Array of ObjectIds\n *     doc.stories[0].title; // 'Casino Royale'\n *     doc.populated('fans'); // Array of ObjectIds\n *\n *     // If the referenced doc has been deleted, `populate()` will\n *     // remove that entry from the array.\n *     await Story.delete({ title: 'Casino Royale' });\n *     await doc.populate('stories'); // Empty array\n *\n *     // You can also pass additional query options to `populate()`,\n *     // like projections:\n *     await doc.populate('fans', '-email');\n *     doc.fans[0].email // undefined because of 2nd param `select`\n *\n * @param {String|Object|Array} path either the path to populate or an object specifying all parameters, or either an array of those\n * @param {Object|String} [select] Field selection for the population query\n * @param {Model} [model] The model you wish to use for population. If not specified, populate will look up the model by the name in the Schema's `ref` field.\n * @param {Object} [match] Conditions for the population query\n * @param {Object} [options] Options for the population query (sort, etc)\n * @param {String} [options.path=null] The path to populate.\n * @param {string|PopulateOptions} [options.populate=null] Recursively populate paths in the populated documents. See [deep populate docs](https://mongoosejs.com/docs/populate.html#deep-populate).\n * @param {boolean} [options.retainNullValues=false] by default, Mongoose removes null and undefined values from populated arrays. Use this option to make `populate()` retain `null` and `undefined` array entries.\n * @param {boolean} [options.getters=false] if true, Mongoose will call any getters defined on the `localField`. By default, Mongoose gets the raw value of `localField`. For example, you would need to set this option to `true` if you wanted to [add a `lowercase` getter to your `localField`](https://mongoosejs.com/docs/schematypes.html#schematype-options).\n * @param {boolean} [options.clone=false] When you do `BlogPost.find().populate('author')`, blog posts with the same author will share 1 copy of an `author` doc. Enable this option to make Mongoose clone populated docs before assigning them.\n * @param {Object|Function} [options.match=null] Add an additional filter to the populate query. Can be a filter object containing [MongoDB query syntax](https://www.mongodb.com/docs/manual/tutorial/query-documents/), or a function that returns a filter object.\n * @param {Function} [options.transform=null] Function that Mongoose will call on every populated document that allows you to transform the populated document.\n * @param {Object} [options.options=null] Additional options like `limit` and `lean`.\n * @param {Boolean} [options.forceRepopulate=true] Set to `false` to prevent Mongoose from repopulating paths that are already populated\n * @param {Boolean} [options.ordered=false] Set to `true` to execute any populate queries one at a time, as opposed to in parallel. We recommend setting this option to `true` if using transactions, especially if also populating multiple paths or paths with multiple models. MongoDB server does **not** support multiple operations in parallel on a single transaction.\n * @param {Function} [callback] Callback\n * @see population https://mongoosejs.com/docs/populate.html\n * @see Query#select https://mongoosejs.com/docs/api/query.html#Query.prototype.select()\n * @see Model.populate https://mongoosejs.com/docs/api/model.html#Model.populate()\n * @memberOf Document\n * @instance\n * @return {Promise|null} Returns a Promise if no `callback` is given.\n * @api public\n */\n\nDocument.prototype.populate = async function populate() {\n  const pop = {};\n  const args = [...arguments];\n  if (typeof args[args.length - 1] === 'function') {\n    throw new MongooseError('Document.prototype.populate() no longer accepts a callback');\n  }\n\n  if (args.length !== 0) {\n    // use hash to remove duplicate paths\n    const res = utils.populate.apply(null, args);\n    for (const populateOptions of res) {\n      pop[populateOptions.path] = populateOptions;\n    }\n  }\n\n  const paths = utils.object.vals(pop);\n\n  let topLevelModel = this.constructor;\n  if (this.$__isNested) {\n    topLevelModel = this.$__[scopeSymbol].constructor;\n    const nestedPath = this.$__.nestedPath;\n    paths.forEach(function(populateOptions) {\n      populateOptions.path = nestedPath + '.' + populateOptions.path;\n    });\n  }\n\n  // Use `$session()` by default if the document has an associated session\n  // See gh-6754\n  if (this.$session() != null) {\n    const session = this.$session();\n    paths.forEach(path => {\n      if (path.options == null) {\n        path.options = { session: session };\n        return;\n      }\n      if (!('session' in path.options)) {\n        path.options.session = session;\n      }\n    });\n  }\n\n  paths.forEach(p => {\n    p._localModel = topLevelModel;\n  });\n\n  return topLevelModel.populate(this, paths);\n};\n\n/**\n * Gets all populated documents associated with this document.\n *\n * @api public\n * @return {Document[]} array of populated documents. Empty array if there are no populated documents associated with this document.\n * @memberOf Document\n * @method $getPopulatedDocs\n * @instance\n */\n\nDocument.prototype.$getPopulatedDocs = function $getPopulatedDocs() {\n  let keys = [];\n  if (this.$__.populated != null) {\n    keys = keys.concat(Object.keys(this.$__.populated));\n  }\n  let result = [];\n  for (const key of keys) {\n    const value = this.$get(key);\n    if (Array.isArray(value)) {\n      result = result.concat(value);\n    } else if (value instanceof Document) {\n      result.push(value);\n    }\n  }\n  return result;\n};\n\n/**\n * Gets _id(s) used during population of the given `path`.\n *\n * #### Example:\n *\n *     const doc = await Model.findOne().populate('author');\n *\n *     console.log(doc.author.name); // Dr.Seuss\n *     console.log(doc.populated('author')); // '5144cf8050f071d979c118a7'\n *\n * If the path was not populated, returns `undefined`.\n *\n * @param {String} path\n * @param {Any} [val]\n * @param {Object} [options]\n * @return {Array|ObjectId|Number|Buffer|String|undefined}\n * @memberOf Document\n * @instance\n * @api public\n */\n\nDocument.prototype.populated = function(path, val, options) {\n  // val and options are internal\n  if (val == null || val === true) {\n    if (!this.$__.populated) {\n      return undefined;\n    }\n    if (typeof path !== 'string') {\n      return undefined;\n    }\n\n    // Map paths can be populated with either `path.$*` or just `path`\n    const _path = path.endsWith('.$*') ? path.replace(/\\.\\$\\*$/, '') : path;\n\n    const v = this.$__.populated[_path];\n    if (v) {\n      return val === true ? v : v.value;\n    }\n    return undefined;\n  }\n\n  this.$__.populated || (this.$__.populated = {});\n  this.$__.populated[path] = { value: val, options: options };\n\n  // If this was a nested populate, make sure each populated doc knows\n  // about its populated children (gh-7685)\n  const pieces = path.split('.');\n  for (let i = 0; i < pieces.length - 1; ++i) {\n    const subpath = pieces.slice(0, i + 1).join('.');\n    const subdoc = this.$get(subpath);\n    if (subdoc?.$__ != null && this.$populated(subpath)) {\n      const rest = pieces.slice(i + 1).join('.');\n      subdoc.$populated(rest, val, options);\n      // No need to continue because the above recursion should take care of\n      // marking the rest of the docs as populated\n      break;\n    }\n  }\n\n  return val;\n};\n\n/**\n * Alias of [`.populated`](https://mongoosejs.com/docs/api/document.html#Document.prototype.populated()).\n *\n * @method $populated\n * @memberOf Document\n * @api public\n */\n\nDocument.prototype.$populated = Document.prototype.populated;\n\n/**\n * Throws an error if a given path is not populated\n *\n * #### Example:\n *\n *     const doc = await Model.findOne().populate('author');\n *\n *     doc.$assertPopulated('author'); // does not throw\n *     doc.$assertPopulated('other path'); // throws an error\n *\n *     // Manually populate and assert in one call. The following does\n *     // `doc.$set({ likes })` before asserting.\n *     doc.$assertPopulated('likes', { likes });\n *\n *\n * @param {String|String[]} path path or array of paths to check. `$assertPopulated` throws if any of the given paths is not populated.\n * @param {Object} [values] optional values to `$set()`. Convenient if you want to manually populate a path and assert that the path was populated in 1 call.\n * @return {Document} this\n * @memberOf Document\n * @method $assertPopulated\n * @instance\n * @api public\n */\n\nDocument.prototype.$assertPopulated = function $assertPopulated(path, values) {\n  if (Array.isArray(path)) {\n    path.forEach(p => this.$assertPopulated(p, values));\n    return this;\n  }\n\n  if (arguments.length > 1) {\n    this.$set(values);\n  }\n\n  if (!this.$populated(path)) {\n    throw new MongooseError(`Expected path \"${path}\" to be populated`);\n  }\n\n  return this;\n};\n\n/**\n * Takes a populated field and returns it to its unpopulated state.\n *\n * #### Example:\n *\n *     Model.findOne().populate('author').exec(function (err, doc) {\n *       console.log(doc.author.name); // Dr.Seuss\n *       console.log(doc.depopulate('author'));\n *       console.log(doc.author); // '5144cf8050f071d979c118a7'\n *     })\n *\n * If the path was not provided, then all populated fields are returned to their unpopulated state.\n *\n * @param {String|String[]} [path] Specific Path to depopulate. If unset, will depopulate all paths on the Document. Or multiple space-delimited paths.\n * @return {Document} this\n * @see Document.populate https://mongoosejs.com/docs/api/document.html#Document.prototype.populate()\n * @api public\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.depopulate = function(path) {\n  if (typeof path === 'string') {\n    path = path.indexOf(' ') === -1 ? [path] : path.split(' ');\n  }\n\n  let populatedIds;\n  const virtualKeys = this.$$populatedVirtuals ? Object.keys(this.$$populatedVirtuals) : [];\n  const populated = this.$__?.populated || {};\n\n  if (arguments.length === 0) {\n    // Depopulate all\n    for (const virtualKey of virtualKeys) {\n      delete this.$$populatedVirtuals[virtualKey];\n      delete this._doc[virtualKey];\n      delete populated[virtualKey];\n    }\n\n    const keys = Object.keys(populated);\n\n    for (const key of keys) {\n      populatedIds = this.$populated(key);\n      if (!populatedIds) {\n        continue;\n      }\n      delete populated[key];\n      if (Array.isArray(populatedIds)) {\n        const arr = utils.getValue(key, this._doc);\n        if (arr.isMongooseArray) {\n          const rawArray = arr.__array;\n          for (let i = 0; i < rawArray.length; ++i) {\n            const subdoc = rawArray[i];\n            if (subdoc == null) {\n              continue;\n            }\n            rawArray[i] = subdoc instanceof Document ? subdoc._doc._id : subdoc._id;\n          }\n        } else {\n          utils.setValue(key, populatedIds, this._doc);\n        }\n      } else {\n        utils.setValue(key, populatedIds, this._doc);\n      }\n    }\n    return this;\n  }\n\n  for (const singlePath of path) {\n    populatedIds = this.$populated(singlePath);\n    delete populated[singlePath];\n\n    if (virtualKeys.indexOf(singlePath) !== -1) {\n      delete this.$$populatedVirtuals[singlePath];\n      delete this._doc[singlePath];\n    } else if (populatedIds) {\n      if (Array.isArray(populatedIds)) {\n        const arr = utils.getValue(singlePath, this._doc);\n        if (arr.isMongooseArray) {\n          const rawArray = arr.__array;\n          for (let i = 0; i < rawArray.length; ++i) {\n            const subdoc = rawArray[i];\n            if (subdoc == null) {\n              continue;\n            }\n            rawArray[i] = subdoc instanceof Document ? subdoc._doc._id : subdoc._id;\n          }\n        } else {\n          utils.setValue(singlePath, populatedIds, this._doc);\n        }\n      } else {\n        utils.setValue(singlePath, populatedIds, this._doc);\n      }\n    }\n  }\n  return this;\n};\n\n\n/**\n * Returns the full path to this document.\n *\n * @param {String} [path]\n * @return {String}\n * @api private\n * @method $__fullPath\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__fullPath = function(path) {\n  // overridden in SubDocuments\n  return path || '';\n};\n\n/**\n * Returns the changes that happened to the document\n * in the format that will be sent to MongoDB.\n *\n * #### Example:\n *\n *     const userSchema = new Schema({\n *       name: String,\n *       age: Number,\n *       country: String\n *     });\n *     const User = mongoose.model('User', userSchema);\n *     const user = await User.create({\n *       name: 'Hafez',\n *       age: 25,\n *       country: 'Egypt'\n *     });\n *\n *     // returns an empty object, no changes happened yet\n *     user.getChanges(); // { }\n *\n *     user.country = undefined;\n *     user.age = 26;\n *\n *     user.getChanges(); // { $set: { age: 26 }, { $unset: { country: 1 } } }\n *\n *     await user.save();\n *\n *     user.getChanges(); // { }\n *\n * Modifying the object that `getChanges()` returns does not affect the document's\n * change tracking state. Even if you `delete user.getChanges().$set`, Mongoose\n * will still send a `$set` to the server.\n *\n * @return {Object}\n * @api public\n * @method getChanges\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.getChanges = function() {\n  const delta = this.$__delta();\n  const changes = delta ? delta[1] : {};\n  return changes;\n};\n\n/**\n * Produces a special query document of the modified properties used in updates.\n *\n * @api private\n * @method $__delta\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$__delta = function $__delta() {\n  const dirty = this.$__dirty();\n  const optimisticConcurrency = this.$__schema.options.optimisticConcurrency;\n  if (optimisticConcurrency) {\n    if (Array.isArray(optimisticConcurrency)) {\n      const optCon = new Set(optimisticConcurrency);\n      const modPaths = this.modifiedPaths();\n      if (modPaths.some(path => optCon.has(path))) {\n        this.$__.version = dirty.length ? VERSION_ALL : VERSION_WHERE;\n      }\n    } else if (Array.isArray(optimisticConcurrency?.exclude)) {\n      const excluded = new Set(optimisticConcurrency.exclude);\n      const modPaths = this.modifiedPaths();\n      if (modPaths.some(path => !excluded.has(path))) {\n        this.$__.version = dirty.length ? VERSION_ALL : VERSION_WHERE;\n      }\n    } else {\n      this.$__.version = dirty.length ? VERSION_ALL : VERSION_WHERE;\n    }\n  }\n\n  if (!dirty.length && VERSION_ALL !== this.$__.version) {\n    return;\n  }\n  const where = {};\n  const delta = {};\n  const len = dirty.length;\n  const divergent = [];\n  let d = 0;\n\n  where._id = this._doc._id;\n  // If `_id` is an object, need to depopulate, but also need to be careful\n  // because `_id` can technically be null (see gh-6406)\n  if (where?._id?.$__ != null) {\n    where._id = where._id.toObject({ transform: false, depopulate: true });\n  }\n  for (; d < len; ++d) {\n    const data = dirty[d];\n    let value = data.value;\n    const match = checkDivergentArray(this, data.path, value);\n    if (match) {\n      divergent.push(match);\n      continue;\n    }\n\n    const pop = this.$populated(data.path, true);\n    if (!pop && this.$__.selected) {\n      // If any array was selected using an $elemMatch projection, we alter the path and where clause\n      // NOTE: MongoDB only supports projected $elemMatch on top level array.\n      const pathSplit = data.path.split('.');\n      const top = pathSplit[0];\n      if (this.$__.selected[top] && this.$__.selected[top].$elemMatch) {\n        // If the selected array entry was modified\n        if (pathSplit.length > 1 && pathSplit[1] == 0 && typeof where[top] === 'undefined') {\n          where[top] = this.$__.selected[top];\n          pathSplit[1] = '$';\n          data.path = pathSplit.join('.');\n        }\n        // if the selected array was modified in any other way throw an error\n        else {\n          divergent.push(data.path);\n          continue;\n        }\n      }\n    }\n\n    // If this path is set to default, and either this path or one of\n    // its parents is excluded, don't treat this path as dirty.\n    if (this.$isDefault(data.path) && this.$__.selected) {\n      if (data.path.indexOf('.') === -1 && isPathExcluded(this.$__.selected, data.path)) {\n        continue;\n      }\n\n      const pathsToCheck = parentPaths(data.path);\n      if (pathsToCheck.find(path => isPathExcluded(this.$__.isSelected, path))) {\n        continue;\n      }\n    }\n\n    if (divergent.length) continue;\n    if (value === undefined) {\n      operand(this, where, delta, data, 1, '$unset');\n    } else if (value === null) {\n      operand(this, where, delta, data, null);\n    } else if (typeof value.getAtomics === 'function') {\n      // arrays and other custom container types\n      handleAtomics(this, where, delta, data, value);\n    } else if (value[MongooseBuffer.pathSymbol] && Buffer.isBuffer(value)) {\n      // MongooseBuffer\n      value = value.toObject();\n      operand(this, where, delta, data, value);\n    } else {\n      if (this.$__.primitiveAtomics?.[data.path] != null) {\n        const val = this.$__.primitiveAtomics[data.path];\n        const op = firstKey(val);\n        operand(this, where, delta, data, val[op], op);\n      } else {\n        value = clone(value, {\n          depopulate: true,\n          transform: false,\n          virtuals: false,\n          getters: false,\n          omitUndefined: true,\n          _isNested: true\n        });\n        operand(this, where, delta, data, value);\n      }\n    }\n  }\n\n  if (divergent.length) {\n    throw new DivergentArrayError(divergent);\n  }\n\n  if (this.$__.version) {\n    this.$__version(where, delta);\n  }\n\n  if (utils.hasOwnKeys(delta) === false) {\n    return [where, null];\n  }\n\n  return [where, delta];\n};\n\n/**\n * Determine if array was populated with some form of filter and is now\n * being updated in a manner which could overwrite data unintentionally.\n *\n * @see https://github.com/Automattic/mongoose/issues/1334\n * @param {Document} doc\n * @param {String} path\n * @param {Any} array\n * @return {String|undefined}\n * @api private\n */\n\nfunction checkDivergentArray(doc, path, array) {\n  // see if we populated this path\n  const pop = doc.$populated(path, true);\n\n  if (!pop && doc.$__.selected) {\n    // If any array was selected using an $elemMatch projection, we deny the update.\n    // NOTE: MongoDB only supports projected $elemMatch on top level array.\n    const top = path.split('.')[0];\n    if (doc.$__.selected[top + '.$']) {\n      return top;\n    }\n  }\n\n  if (!(pop && utils.isMongooseArray(array))) return;\n\n  // If the array was populated using options that prevented all\n  // documents from being returned (match, skip, limit) or they\n  // deselected the _id field, $pop and $set of the array are\n  // not safe operations. If _id was deselected, we do not know\n  // how to remove elements. $pop will pop off the _id from the end\n  // of the array in the db which is not guaranteed to be the\n  // same as the last element we have here. $set of the entire array\n  // would be similarly destructive as we never received all\n  // elements of the array and potentially would overwrite data.\n  const check = pop.options.match ||\n      pop.options.options && Object.hasOwn(pop.options.options, 'limit') || // 0 is not permitted\n      pop.options.options?.skip || // 0 is permitted\n      pop.options.select && // deselected _id?\n      (pop.options.select._id === 0 ||\n      /\\s?-_id\\s?/.test(pop.options.select));\n\n  if (check) {\n    const atomics = array[arrayAtomicsSymbol];\n    if (utils.hasOwnKeys(atomics) === false || atomics.$set || atomics.$pop) {\n      return path;\n    }\n  }\n}\n\n/**\n * Apply the operation to the delta (update) clause as\n * well as track versioning for our where clause.\n *\n * @param {Document} self\n * @param {Object} where Unused\n * @param {Object} delta\n * @param {Object} data\n * @param {Mixed} val\n * @param {String} [op]\n * @api private\n */\n\nfunction operand(self, where, delta, data, val, op) {\n  // delta\n  op || (op = '$set');\n  if (!delta[op]) delta[op] = {};\n  delta[op][data.path] = val;\n  // disabled versioning?\n  if (self.$__schema.options.versionKey === false) return;\n\n  // path excluded from versioning?\n  if (shouldSkipVersioning(self, data.path)) return;\n\n  // already marked for versioning?\n  if (VERSION_ALL === (VERSION_ALL & self.$__.version)) return;\n\n  if (\n    self.$__schema.options.optimisticConcurrency === true ||\n      Array.isArray(self.$__schema.options.optimisticConcurrency) ||\n      Array.isArray(self.$__schema.options.optimisticConcurrency?.exclude)\n  ) {\n    return;\n  }\n\n  switch (op) {\n    case '$set':\n    case '$unset':\n    case '$pop':\n    case '$pull':\n    case '$pullAll':\n    case '$push':\n    case '$addToSet':\n    case '$inc':\n      break;\n    default:\n      // nothing to do\n      return;\n  }\n\n  // ensure updates sent with positional notation are\n  // editing the correct array element.\n  // only increment the version if an array position changes.\n  // modifying elements of an array is ok if position does not change.\n  if (op === '$push' || op === '$addToSet' || op === '$pullAll' || op === '$pull') {\n    if (/\\.\\d+\\.|\\.\\d+$/.test(data.path)) {\n      self.$__.version = VERSION_ALL;\n    } else {\n      self.$__.version |= VERSION_INC;\n    }\n  } else if (/^\\$p/.test(op)) {\n    // potentially changing array positions\n    self.$__.version = VERSION_ALL;\n  } else if (Array.isArray(val)) {\n    // $set an array\n    self.$__.version = VERSION_ALL;\n  } else if (/\\.\\d+\\.|\\.\\d+$/.test(data.path)) {\n    // now handling $set, $unset\n    // subpath of array\n    self.$__.version |= VERSION_WHERE;\n  }\n}\n\n/**\n * Compiles an update and where clause for a `val` with _atomics.\n *\n * @param {Document} self\n * @param {Object} where\n * @param {Object} delta\n * @param {Object} data\n * @param {Array} value\n * @api private\n */\n\nfunction handleAtomics(self, where, delta, data, value) {\n  if (delta.$set?.[data.path]) {\n    // $set has precedence over other atomics\n    return;\n  }\n\n  if (typeof value.getAtomics === 'function') {\n    value.getAtomics().forEach(function(atomic) {\n      const op = atomic[0];\n      const val = atomic[1];\n      operand(self, where, delta, data, val, op);\n    });\n    return;\n  }\n\n  if (typeof value.$__getAtomics === 'function') {\n    value.$__getAtomics().forEach(function(atomic) {\n      const op = atomic[0];\n      const val = atomic[1];\n      operand(self, where, delta, data, val, op);\n    });\n    return;\n  }\n\n  // legacy support for plugins\n\n  const atomics = value[arrayAtomicsSymbol];\n  const ops = Object.keys(atomics);\n  let i = ops.length;\n  let val;\n  let op;\n\n  if (i === 0) {\n    // $set\n\n    if (utils.isMongooseObject(value)) {\n      value = value.toObject({ depopulate: 1, _isNested: true });\n    } else if (value.valueOf) {\n      value = value.valueOf();\n    }\n\n    return operand(self, where, delta, data, value);\n  }\n\n  function iter(mem) {\n    return utils.isMongooseObject(mem)\n      ? mem.toObject({ depopulate: 1, _isNested: true })\n      : mem;\n  }\n\n  while (i--) {\n    op = ops[i];\n    val = atomics[op];\n\n    if (utils.isMongooseObject(val)) {\n      val = val.toObject({ depopulate: true, transform: false, _isNested: true });\n    } else if (Array.isArray(val)) {\n      val = val.map(iter);\n    } else if (val.valueOf) {\n      val = val.valueOf();\n    }\n\n    if (op === '$addToSet') {\n      val = { $each: val };\n    }\n\n    operand(self, where, delta, data, val, op);\n  }\n}\n\n/**\n * Determines whether versioning should be skipped for the given path\n *\n * @param {Document} self\n * @param {String} path\n * @return {Boolean} true if versioning should be skipped for the given path\n * @api private\n */\nfunction shouldSkipVersioning(self, path) {\n  const skipVersioning = self.$__schema.options.skipVersioning;\n  if (!skipVersioning) return false;\n\n  // Remove any array indexes from the path\n  path = path.replace(/\\.\\d+\\./, '.');\n\n  return skipVersioning[path];\n}\n\n/**\n * Returns a copy of this document with a deep clone of `_doc` and `$__`.\n *\n * @return {Document} a copy of this document\n * @api public\n * @method $clone\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$clone = function() {\n  const Model = this.constructor;\n  const clonedDoc = new Model();\n  clonedDoc.$isNew = this.$isNew;\n  if (this._doc) {\n    clonedDoc._doc = clone(this._doc, { retainDocuments: true, parentDoc: clonedDoc });\n  }\n  if (this.$__) {\n    const Cache = this.$__.constructor;\n    const clonedCache = new Cache();\n    for (const key of Object.getOwnPropertyNames(this.$__)) {\n      if (key === 'activePaths') {\n        continue;\n      }\n      clonedCache[key] = clone(this.$__[key]);\n    }\n    Object.assign(\n      clonedCache.activePaths,\n      clone({ ...this.$__.activePaths })\n    );\n    clonedDoc.$__ = clonedCache;\n  }\n  return clonedDoc;\n};\n\n/**\n * Creates a snapshot of this document's internal change tracking state. You can later\n * reset this document's change tracking state using `$restoreModifiedPathsSnapshot()`.\n *\n * #### Example:\n *\n *     const doc = await TestModel.findOne();\n *     const snapshot = doc.$createModifiedPathsSnapshot();\n *\n * @return {ModifiedPathsSnapshot} a copy of this document's internal change tracking state\n * @api public\n * @method $createModifiedPathsSnapshot\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$createModifiedPathsSnapshot = function $createModifiedPathsSnapshot() {\n  const subdocSnapshot = new WeakMap();\n  if (!this.$isSubdocument) {\n    const subdocs = this.$getAllSubdocs();\n    for (const child of subdocs) {\n      subdocSnapshot.set(child, child.$__.activePaths.clone());\n    }\n  }\n\n  return new ModifiedPathsSnapshot(\n    subdocSnapshot,\n    this.$__.activePaths.clone(),\n    this.$__.version\n  );\n};\n\n/**\n * Restore this document's change tracking state to the given snapshot.\n * Note that `$restoreModifiedPathsSnapshot()` does **not** modify the document's\n * properties, just resets the change tracking state.\n *\n * This method is especially useful when writing [custom transaction wrappers](https://github.com/Automattic/mongoose/issues/14268#issuecomment-2100505554) that need to restore change tracking when aborting a transaction.\n *\n * #### Example:\n *\n *     const doc = await TestModel.findOne();\n *     const snapshot = doc.$createModifiedPathsSnapshot();\n *\n *     doc.name = 'test';\n *     doc.$restoreModifiedPathsSnapshot(snapshot);\n *     doc.$isModified('name'); // false because `name` was not modified when snapshot was taken\n *     doc.name; // 'test', `$restoreModifiedPathsSnapshot()` does **not** modify the document's data, only change tracking\n *\n * @param {ModifiedPathsSnapshot} snapshot of the document's internal change tracking state snapshot to restore\n * @api public\n * @method $restoreModifiedPathsSnapshot\n * @return {Document} this\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$restoreModifiedPathsSnapshot = function $restoreModifiedPathsSnapshot(snapshot) {\n  this.$__.activePaths = snapshot.activePaths.clone();\n  this.$__.version = snapshot.version;\n  if (!this.$isSubdocument) {\n    const subdocs = this.$getAllSubdocs();\n    for (const child of subdocs) {\n      if (snapshot.subdocSnapshot.has(child)) {\n        child.$__.activePaths = snapshot.subdocSnapshot.get(child);\n      }\n    }\n  }\n\n  return this;\n};\n\n/**\n * Clear the document's modified paths.\n *\n * #### Example:\n *\n *     const doc = await TestModel.findOne();\n *\n *     doc.name = 'test';\n *     doc.$isModified('name'); // true\n *\n *     doc.$clearModifiedPaths();\n *     doc.name; // 'test', `$clearModifiedPaths()` does **not** modify the document's data, only change tracking\n *\n * @api public\n * @return {Document} this\n * @method $clearModifiedPaths\n * @memberOf Document\n * @instance\n */\n\nDocument.prototype.$clearModifiedPaths = function $clearModifiedPaths() {\n  this.$__.activePaths.clear('modify');\n  this.$__.activePaths.clear('init');\n  this.$__.version = 0;\n  if (!this.$isSubdocument) {\n    const subdocs = this.$getAllSubdocs();\n    for (const child of subdocs) {\n      child.$clearModifiedPaths();\n    }\n  }\n\n  return this;\n};\n\n/*!\n * Check if the given document only has primitive values\n */\n\nDocument.prototype.$__hasOnlyPrimitiveValues = function $__hasOnlyPrimitiveValues() {\n  return !this.$__.populated && !this.$__.wasPopulated && (this._doc == null || Object.values(this._doc).every(v => {\n    return v == null\n      || typeof v !== 'object'\n      || (utils.isNativeObject(v) && !Array.isArray(v))\n      || isBsonType(v, 'ObjectId')\n      || isBsonType(v, 'Decimal128');\n  }));\n};\n\n/*!\n * Increment this document's version if necessary.\n */\n\nDocument.prototype._applyVersionIncrement = function _applyVersionIncrement() {\n  if (!this.$__.version) return;\n  const doIncrement = VERSION_INC === (VERSION_INC & this.$__.version);\n\n  this.$__.version = undefined;\n  if (doIncrement) {\n    const key = this.$__schema.options.versionKey;\n    const version = this.$__getValue(key) || 0;\n    this.$__setValue(key, version + 1); // increment version if was successful\n  }\n};\n\n/*!\n * Increment this document's version if necessary.\n */\n\nDocument.prototype._applyVersionIncrement = function _applyVersionIncrement() {\n  if (!this.$__.version) return;\n  const doIncrement = VERSION_INC === (VERSION_INC & this.$__.version);\n\n  this.$__.version = undefined;\n  if (doIncrement) {\n    const key = this.$__schema.options.versionKey;\n    const version = this.$__getValue(key) || 0;\n    this.$__setValue(key, version + 1); // increment version if was successful\n  }\n};\n\n/*!\n * Module exports.\n */\n\nDocument.VERSION_WHERE = VERSION_WHERE;\nDocument.VERSION_INC = VERSION_INC;\nDocument.VERSION_ALL = VERSION_ALL;\nDocument.ValidationError = ValidationError;\nmodule.exports = exports = Document;\n"],"names":[],"mappings":"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","ignoreList":[0]}}]
}