{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/WOWS_DEV/TruongGiang_CRM/TruongGiang_CRM_NextJS/trg-crm-webapp/components/CustomerModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport {\r\n    X,\r\n    Eye,\r\n    Edit,\r\n    Trash2,\r\n    Phone,\r\n    Mail,\r\n    MapPin,\r\n    Building,\r\n    Star,\r\n    Calendar,\r\n    User,\r\n    Image as ImageIcon,\r\n} from \"lucide-react\";\r\n\r\ninterface Customer {\r\n    _id: string;\r\n    customerId: string;\r\n    fullName: string;\r\n    shortName?: string;\r\n    address?: string;\r\n    phone?: string;\r\n    image?: string;\r\n    source?: string;\r\n    referrer?: string;\r\n    referrerPhone?: string;\r\n    serviceGroup?: string;\r\n    marketingClassification?: string;\r\n    potentialLevel?: string;\r\n    salesPerson?: string;\r\n    needsNote?: string;\r\n    isActive: boolean;\r\n    createdAt: string;\r\n    updatedAt: string;\r\n    lat?: number;\r\n    lng?: number;\r\n    companyName?: string;\r\n    status?: string;\r\n}\r\n\r\ninterface CustomerModalProps {\r\n    customer: Customer | null;\r\n    mode: \"view\" | \"delete\";\r\n    onClose: () => void;\r\n    onEdit?: (customer: Customer) => void;\r\n    onDelete?: (customerId: string) => void;\r\n}\r\n\r\nconst CustomerModal = ({\r\n    customer,\r\n    mode,\r\n    onClose,\r\n    onEdit,\r\n    onDelete,\r\n}: CustomerModalProps) => {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    if (!customer) return null;\r\n\r\n    const formatDate = (dateString: string) => {\r\n        return new Date(dateString).toLocaleDateString(\"vi-VN\", {\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n        });\r\n    };\r\n\r\n    const getStatusColor = (isActive: boolean) => {\r\n        return isActive\r\n            ? \"bg-green-100 text-green-800\"\r\n            : \"bg-red-100 text-red-800\";\r\n    };\r\n\r\n    const getStatusLabel = (isActive: boolean) => {\r\n        return isActive ? \"Hoạt động\" : \"Ngừng hoạt động\";\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (!onDelete) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            await onDelete(customer._id);\r\n            onClose();\r\n        } catch (error) {\r\n            console.error(\"Delete error:\", error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (mode === \"delete\") {\r\n        return (\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n                <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full\">\r\n                    <div className=\"p-6\">\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                                Xác nhận xóa\r\n                            </h3>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                            >\r\n                                <X className=\"w-5 h-5 text-gray-500\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"mb-6\">\r\n                            <p className=\"text-gray-600 mb-2\">\r\n                                Bạn có chắc chắn muốn xóa khách hàng này?\r\n                            </p>\r\n                            <div className=\"bg-gray-50 p-3 rounded-lg\">\r\n                                <p className=\"font-medium text-gray-900\">\r\n                                    {customer.fullName}\r\n                                </p>\r\n                                {customer.companyName && (\r\n                                    <p className=\"text-sm text-gray-600\">\r\n                                        {customer.companyName}\r\n                                    </p>\r\n                                )}\r\n                                {customer.phone && (\r\n                                    <p className=\"text-sm text-gray-600\">\r\n                                        {customer.phone}\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                            <p className=\"text-red-600 text-sm mt-3\">\r\n                                ⚠️ Hành động này không thể hoàn tác.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end space-x-3\">\r\n                            <button\r\n                                onClick={onClose}\r\n                                disabled={loading}\r\n                                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition disabled:opacity-50\"\r\n                            >\r\n                                Hủy\r\n                            </button>\r\n                            <button\r\n                                onClick={handleDelete}\r\n                                disabled={loading}\r\n                                className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition disabled:opacity-50\"\r\n                            >\r\n                                {loading ? (\r\n                                    <div className=\"flex items-center\">\r\n                                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                                        Đang xóa...\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"flex items-center\">\r\n                                        <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                                        Xóa\r\n                                    </div>\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n            <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-auto\">\r\n                {/* Header */}\r\n                <div className=\"border-b border-gray-200 px-6 py-4 flex items-center justify-between\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-900\">\r\n                        Chi tiết khách hàng\r\n                    </h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    >\r\n                        <X className=\"w-5 h-5 text-gray-500\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-6\">\r\n                    {/* Customer Info */}\r\n                    <div className=\"mb-6\">\r\n                        <div className=\"flex items-start space-x-4\">\r\n                            <div className=\"w-16 h-16 rounded-full overflow-hidden bg-gray-100 flex items-center justify-center\">\r\n                                {customer.image ? (\r\n                                    <img\r\n                                        src={customer.image}\r\n                                        alt={customer.fullName}\r\n                                        className=\"w-full h-full object-cover\"\r\n                                    />\r\n                                ) : (\r\n                                    <User className=\"w-8 h-8 text-blue-600\" />\r\n                                )}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                                    {customer.fullName}\r\n                                </h3>\r\n                                {customer.companyName && (\r\n                                    <p className=\"text-gray-600\">\r\n                                        {customer.companyName}\r\n                                    </p>\r\n                                )}\r\n                                <div className=\"flex items-center space-x-2 mt-2\">\r\n                                    <span\r\n                                        className={`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(customer.isActive)}`}\r\n                                    >\r\n                                        {getStatusLabel(customer.isActive)}\r\n                                    </span>\r\n                                    {customer.potentialLevel && (\r\n                                        <span className=\"text-sm text-gray-600\">\r\n                                            {customer.potentialLevel}\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Contact Information */}\r\n                    <div className=\"space-y-4 mb-6\">\r\n                        <h4 className=\"text-sm font-semibold text-gray-900 mb-3\">\r\n                            Thông tin liên hệ\r\n                        </h4>\r\n\r\n                        {customer.phone && (\r\n                            <div className=\"flex items-center space-x-3\">\r\n                                <Phone className=\"w-4 h-4 text-gray-400\" />\r\n                                <span className=\"text-sm text-gray-600\">\r\n                                    {customer.phone}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                        {/* \r\n                        {customer.email && (\r\n                            <div className=\"flex items-center space-x-3\">\r\n                                <Mail className=\"w-4 h-4 text-gray-400\" />\r\n                                <span className=\"text-sm text-gray-600\">\r\n                                    {customer.email}\r\n                                </span>\r\n                            </div>\r\n                        )} */}\r\n\r\n                        {customer.address && (\r\n                            <div className=\"flex items-start space-x-3\">\r\n                                <MapPin className=\"w-4 h-4 text-gray-400 mt-0.5\" />\r\n                                <span className=\"text-sm text-gray-600\">\r\n                                    {customer.address}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Business Information */}\r\n                    <div className=\"space-y-4 mb-6\">\r\n                        <h4 className=\"text-sm font-semibold text-gray-900 mb-3\">\r\n                            Thông tin kinh doanh\r\n                        </h4>\r\n\r\n                        {customer.source && (\r\n                            <div className=\"flex items-center space-x-3\">\r\n                                <Building className=\"w-4 h-4 text-gray-400\" />\r\n                                <div>\r\n                                    <span className=\"text-xs text-gray-500\">\r\n                                        Nguồn\r\n                                    </span>\r\n                                    <p className=\"text-sm text-gray-600\">\r\n                                        {customer.source}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {customer.salesPerson && (\r\n                            <div className=\"flex items-center space-x-3\">\r\n                                <User className=\"w-4 h-4 text-gray-400\" />\r\n                                <div>\r\n                                    <span className=\"text-xs text-gray-500\">\r\n                                        Sales phụ trách\r\n                                    </span>\r\n                                    <p className=\"text-sm text-gray-600\">\r\n                                        {customer.salesPerson}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {customer.potentialLevel && (\r\n                            <div className=\"flex items-center space-x-3\">\r\n                                <Star className=\"w-4 h-4 text-gray-400\" />\r\n                                <div>\r\n                                    <span className=\"text-xs text-gray-500\">\r\n                                        Đánh giá tiềm năng\r\n                                    </span>\r\n                                    <p className=\"text-sm text-gray-600\">\r\n                                        {customer.potentialLevel}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Location */}\r\n                    {customer.lat && customer.lng && (\r\n                        <div className=\"mb-6\">\r\n                            <h4 className=\"text-sm font-semibold text-gray-900 mb-3\">\r\n                                Vị trí\r\n                            </h4>\r\n                            <div className=\"bg-gray-50 rounded-lg p-3\">\r\n                                <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\r\n                                    <MapPin className=\"w-4 h-4\" />\r\n                                    <span>\r\n                                        Vĩ độ: {customer.lat.toFixed(6)}, Kinh\r\n                                        độ: {customer.lng.toFixed(6)}\r\n                                    </span>\r\n                                </div>\r\n                                <a\r\n                                    href={`https://www.google.com/maps?q=${customer.lat},${customer.lng}`}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"text-blue-600 hover:text-blue-800 text-sm mt-2 inline-block\"\r\n                                >\r\n                                    Xem trên Google Maps →\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Timestamps */}\r\n                    <div className=\"border-t border-gray-200 pt-4\">\r\n                        <div className=\"flex items-center space-x-2 text-xs text-gray-500\">\r\n                            <Calendar className=\"w-3 h-3\" />\r\n                            <span>\r\n                                Ngày tạo: {formatDate(customer.createdAt)}\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2 text-xs text-gray-500 mt-1\">\r\n                            <Calendar className=\"w-3 h-3\" />\r\n                            <span>\r\n                                Cập nhật: {formatDate(customer.updatedAt)}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"border-t border-gray-200 px-6 py-4 flex justify-end space-x-3\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                    >\r\n                        Đóng\r\n                    </button>\r\n                    {onEdit && (\r\n                        <button\r\n                            onClick={() => {\r\n                                onEdit(customer);\r\n                                onClose();\r\n                            }}\r\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                        >\r\n                            <div className=\"flex items-center\">\r\n                                <Edit className=\"w-4 h-4 mr-2\" />\r\n                                Chỉnh sửa\r\n                            </div>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CustomerModal;\r\n"],"names":[],"mappings":"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"}}]
}