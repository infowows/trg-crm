{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/WOWS_Test/trg-crm/lib/dbConnect.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\ninterface Connection {\r\n    isConnected: boolean;\r\n}\r\n\r\nconst connection: Connection = { isConnected: false };\r\n\r\nasync function dbConnect(): Promise<typeof mongoose> {\r\n    if (connection.isConnected) {\r\n        console.log(\"‚ôªÔ∏è Using existing MongoDB connection\");\r\n        return mongoose;\r\n    }\r\n\r\n    try {\r\n        console.log(\"üì° Connecting to MongoDB...\");\r\n\r\n        const db = await mongoose.connect(process.env.MONGODB_URI!, {\r\n            bufferCommands: false,\r\n        });\r\n\r\n        connection.isConnected = db.connections[0].readyState === 1;\r\n\r\n        console.log(\"‚úÖ MongoDB connected successfully\");\r\n        console.log(\"üìä Database name:\", db.connection.name);\r\n\r\n        return db;\r\n    } catch (error) {\r\n        console.error(\"‚ùå MongoDB connection error:\", error);\r\n        connection.isConnected = false;\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport default dbConnect;\r\n"],"names":[],"mappings":";;;;AAAA;;AAMA,MAAM,aAAyB;IAAE,aAAa;AAAM;AAEpD,eAAe;IACX,IAAI,WAAW,WAAW,EAAE;QACxB,QAAQ,GAAG,CAAC;QACZ,OAAO,mKAAQ;IACnB;IAEA,IAAI;QACA,QAAQ,GAAG,CAAC;QAEZ,MAAM,KAAK,MAAM,mKAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAG;YACxD,gBAAgB;QACpB;QAEA,WAAW,WAAW,GAAG,GAAG,WAAW,CAAC,EAAE,CAAC,UAAU,KAAK;QAE1D,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,qBAAqB,GAAG,UAAU,CAAC,IAAI;QAEnD,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,WAAW,WAAW,GAAG;QACzB,MAAM;IACV;AACJ;uCAEe"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///D:/WOWS_Test/trg-crm/models/Quotation.ts"],"sourcesContent":["import mongoose, { Document, Schema } from \"mongoose\";\r\nimport Customer from \"./Customer\";\r\n\r\n// Schema cho b√°o gi√° (ch·ª©a th√¥ng tin gi√° v√† t√≠nh to√°n)\r\nconst quotationPackageSchema = new mongoose.Schema({\r\n  serviceGroup: { type: String, required: true }, // nh√≥m d·ªãch v·ª•\r\n  service: { type: String, required: true }, // t√™n d·ªãch v·ª•\r\n  volume: { type: Number, required: true }, // kh·ªëi l∆∞·ª£ng (t·ª´ survey)\r\n  packages: [\r\n    {\r\n      packageName: { type: String, required: true }, // t√™n g√≥i d·ªãch v·ª•\r\n      servicePricing: { type: Number, required: true }, // ƒë∆°n gi√° c·ªßa g√≥i\r\n      totalPrice: { type: Number, required: true }, // th√†nh ti·ªÅn = volume * servicePricing\r\n      isSelected: { type: Boolean, default: false }, // g√≥i ƒë∆∞·ª£c ch·ªçn b·ªüi kh√°ch h√†ng\r\n    },\r\n  ], // m·∫£ng c√°c g√≥i v·ªõi c√πng volume ƒë·ªÉ kh√°ch h√†ng so s√°nh\r\n});\r\n\r\nconst quotationSchema = new mongoose.Schema(\r\n  {\r\n    quotationNo: { type: String, unique: true, required: true },\r\n    date: { type: Date, required: true },\r\n    customer: { type: String, required: true }, // customer name\r\n    customerRef: { type: mongoose.Schema.Types.ObjectId, ref: \"Customer\" }, // reference to customer\r\n    surveyRef: {\r\n      type: mongoose.Schema.Types.ObjectId,\r\n      ref: \"ProjectSurvey\",\r\n    }, // reference to survey\r\n    packages: [quotationPackageSchema], // m·∫£ng c√°c g√≥i d·ªãch v·ª• v·ªõi gi√°\r\n    totalAmount: { type: Number, default: 0 }, // t·ªïng th√†nh ti·ªÅn\r\n    grandTotal: { type: Number, default: 0 }, // t·ªïng c·ªông\r\n    status: {\r\n      type: String,\r\n      enum: [\"draft\", \"sent\", \"approved\", \"rejected\", \"completed\"],\r\n      default: \"draft\",\r\n    },\r\n    notes: { type: String }, // ghi ch√∫ b√°o gi√°\r\n    createdBy: { type: String, required: true },\r\n    createdAt: { type: Date, default: Date.now },\r\n    updatedAt: { type: Date, default: Date.now },\r\n  },\r\n  { collection: \"BAOGIA_V2\" }, // ƒê·ªïi t√™n ƒë·ªÉ force model m·ªõi\r\n);\r\n\r\nconst Quotation =\r\n  mongoose.models.BAOGIA_V2 || mongoose.model(\"BAOGIA_V2\", quotationSchema);\r\nexport default Quotation;\r\n"],"names":[],"mappings":";;;;AAAA;;AAGA,uDAAuD;AACvD,MAAM,yBAAyB,IAAI,mKAAQ,CAAC,MAAM,CAAC;IACjD,cAAc;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC7C,SAAS;QAAE,MAAM;QAAQ,UAAU;IAAK;IACxC,QAAQ;QAAE,MAAM;QAAQ,UAAU;IAAK;IACvC,UAAU;QACR;YACE,aAAa;gBAAE,MAAM;gBAAQ,UAAU;YAAK;YAC5C,gBAAgB;gBAAE,MAAM;gBAAQ,UAAU;YAAK;YAC/C,YAAY;gBAAE,MAAM;gBAAQ,UAAU;YAAK;YAC3C,YAAY;gBAAE,MAAM;gBAAS,SAAS;YAAM;QAC9C;KACD;AACH;AAEA,MAAM,kBAAkB,IAAI,mKAAQ,CAAC,MAAM,CACzC;IACE,aAAa;QAAE,MAAM;QAAQ,QAAQ;QAAM,UAAU;IAAK;IAC1D,MAAM;QAAE,MAAM;QAAM,UAAU;IAAK;IACnC,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,aAAa;QAAE,MAAM,mKAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;QAAE,KAAK;IAAW;IACrE,WAAW;QACT,MAAM,mKAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;QACpC,KAAK;IACP;IACA,UAAU;QAAC;KAAuB;IAClC,aAAa;QAAE,MAAM;QAAQ,SAAS;IAAE;IACxC,YAAY;QAAE,MAAM;QAAQ,SAAS;IAAE;IACvC,QAAQ;QACN,MAAM;QACN,MAAM;YAAC;YAAS;YAAQ;YAAY;YAAY;SAAY;QAC5D,SAAS;IACX;IACA,OAAO;QAAE,MAAM;IAAO;IACtB,WAAW;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC1C,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;IAC3C,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;AAC7C,GACA;IAAE,YAAY;AAAY;AAG5B,MAAM,YACJ,mKAAQ,CAAC,MAAM,CAAC,SAAS,IAAI,mKAAQ,CAAC,KAAK,CAAC,aAAa;uCAC5C"}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///D:/WOWS_Test/trg-crm/lib/auth.ts"],"sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key\";\r\n\r\nexport interface JWTPayload {\r\n    id: string;\r\n    username: string;\r\n    email: string;\r\n    ho_ten: string;\r\n    phong_ban: string;\r\n    chuc_vu: string;\r\n    phan_quyen: string;\r\n}\r\n\r\nexport function generateToken(payload: JWTPayload): string {\r\n    return jwt.sign(payload, JWT_SECRET, { expiresIn: \"7d\" });\r\n}\r\n\r\nexport function verifyToken(token: string): JWTPayload | null {\r\n    try {\r\n        return jwt.verify(token, JWT_SECRET) as JWTPayload;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function hashPassword(password: string): Promise<string> {\r\n    return bcrypt.hash(password, 12);\r\n}\r\n\r\nexport async function comparePassword(\r\n    password: string,\r\n    hashedPassword: string,\r\n): Promise<boolean> {\r\n    return bcrypt.compare(password, hashedPassword);\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAYtC,SAAS,cAAc,OAAmB;IAC7C,OAAO,kJAAG,CAAC,IAAI,CAAC,SAAS,YAAY;QAAE,WAAW;IAAK;AAC3D;AAEO,SAAS,YAAY,KAAa;IACrC,IAAI;QACA,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC7B,EAAE,OAAO,OAAO;QACZ,OAAO;IACX;AACJ;AAEO,eAAe,aAAa,QAAgB;IAC/C,OAAO,8IAAM,CAAC,IAAI,CAAC,UAAU;AACjC;AAEO,eAAe,gBAClB,QAAgB,EAChB,cAAsB;IAEtB,OAAO,8IAAM,CAAC,OAAO,CAAC,UAAU;AACpC"}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///D:/WOWS_Test/trg-crm/app/api/quotations/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport dbConnect from \"../../../lib/dbConnect\";\r\nimport Quotation from \"../../../models/Quotation\";\r\nimport ProjectSurvey from \"../../../models/ProjectSurvey\";\r\nimport { verifyToken } from \"../../../lib/auth\";\r\nimport mongoose from \"mongoose\";\r\n\r\n// Helper function to verify authentication\r\nasync function verifyAuth(request: NextRequest) {\r\n    const token = request.cookies.get(\"token\")?.value;\r\n    if (!token) return null;\r\n\r\n    const decoded = verifyToken(token);\r\n    if (!decoded) return null;\r\n\r\n    return decoded;\r\n}\r\n\r\n// GET - L·∫•y danh s√°ch b√°o gi√°\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const auth = await verifyAuth(request);\r\n        if (!auth) {\r\n            return NextResponse.json(\r\n                { success: false, message: \"Kh√¥ng ƒë∆∞·ª£c ph√©p truy c·∫≠p\" },\r\n                { status: 401 },\r\n            );\r\n        }\r\n\r\n        await dbConnect();\r\n        await mongoose.connection.db;\r\n\r\n        const { searchParams } = new URL(request.url);\r\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\r\n        const limit = parseInt(searchParams.get(\"limit\") || \"10\");\r\n        const search = searchParams.get(\"search\") || \"\";\r\n        const status = searchParams.get(\"status\") || \"\";\r\n\r\n        const query: any = {};\r\n\r\n        if (search) {\r\n            query.$or = [\r\n                { quotationNo: { $regex: search, $options: \"i\" } },\r\n                { customer: { $regex: search, $options: \"i\" } },\r\n            ];\r\n        }\r\n\r\n        if (status) {\r\n            query.status = status;\r\n        }\r\n\r\n        const skip = (page - 1) * limit;\r\n\r\n        const [quotations, total] = await Promise.all([\r\n            Quotation.find(query)\r\n                .sort({ createdAt: -1 })\r\n                .skip(skip)\r\n                .limit(limit),\r\n            Quotation.countDocuments(query),\r\n        ]);\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            data: quotations,\r\n            pagination: {\r\n                page,\r\n                limit,\r\n                total,\r\n                pages: Math.ceil(total / limit),\r\n            },\r\n        });\r\n    } catch (error) {\r\n        console.error(\"GET quotations error:\", error);\r\n        return NextResponse.json(\r\n            { success: false, message: \"C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.\" },\r\n            { status: 500 },\r\n        );\r\n    }\r\n}\r\n\r\n// POST - Th√™m b√°o gi√° m·ªõi\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const auth = await verifyAuth(request);\r\n        if (!auth) {\r\n            return NextResponse.json(\r\n                { success: false, message: \"Kh√¥ng ƒë∆∞·ª£c ph√©p truy c·∫≠p\" },\r\n                { status: 401 },\r\n            );\r\n        }\r\n\r\n        await dbConnect();\r\n        await mongoose.connection.db;\r\n\r\n        const body = await request.json();\r\n        const { customer, customerRef, surveyRef, date, packages, notes } =\r\n            body;\r\n\r\n        if (!customer) {\r\n            return NextResponse.json(\r\n                {\r\n                    success: false,\r\n                    message: \"Vui l√≤ng nh·∫≠p t√™n kh√°ch h√†ng\",\r\n                },\r\n                { status: 400 },\r\n            );\r\n        }\r\n\r\n        // T·∫°o s·ªë b√°o gi√° t·ª± ƒë·ªông\r\n        const lastQuotation = await Quotation.findOne().sort({ createdAt: -1 });\r\n        let quotationNo = \"BG001\";\r\n\r\n        if (lastQuotation && lastQuotation.quotationNo) {\r\n            const lastNumber = parseInt(\r\n                lastQuotation.quotationNo.replace(\"BG\", \"\"),\r\n            );\r\n            quotationNo = `BG${String(lastNumber + 1).padStart(3, \"0\")}`;\r\n        }\r\n\r\n        console.log(\"=== CREATING QUOTATION ===\");\r\n        console.log(\"Request body:\", body);\r\n        console.log(\"Packages:\", packages);\r\n\r\n        // T√≠nh to√°n totalAmount v√† grandTotal manual\r\n        let totalAmount = 0;\r\n        const processedPackages =\r\n            packages?.map((service: any) => {\r\n                const processedService = {\r\n                    ...service,\r\n                    packages: service.packages.map((pkg: any) => {\r\n                        const totalPrice = service.volume * pkg.servicePricing;\r\n                        totalAmount += totalPrice;\r\n                        return {\r\n                            ...pkg,\r\n                            totalPrice,\r\n                        };\r\n                    }),\r\n                };\r\n                return processedService;\r\n            }) || [];\r\n\r\n        console.log(\"Processed packages:\", processedPackages);\r\n        console.log(\"Calculated totalAmount:\", totalAmount);\r\n\r\n        const quotation = new Quotation({\r\n            quotationNo,\r\n            customer,\r\n            customerRef,\r\n            surveyRef,\r\n            date: date ? new Date(date) : new Date(),\r\n            packages: processedPackages,\r\n            totalAmount,\r\n            grandTotal: totalAmount, // GrandTotal = totalAmount (kh√¥ng c√≥ thu·∫ø)\r\n            status: \"draft\",\r\n            notes,\r\n            createdBy: auth.username,\r\n        });\r\n\r\n        console.log(\"Quotation object before save:\", quotation);\r\n        console.log(\"Quotation packages before save:\", quotation.packages);\r\n\r\n        await quotation.save();\r\n\r\n        // C·∫≠p nh·∫≠t isUsed = true cho c√°c service pricing ƒë√£ s·ª≠ d·ª•ng\r\n        const ServicePricing = mongoose.models.ServicePricing;\r\n        if (ServicePricing && packages && packages.length > 0) {\r\n            const pricingIds: string[] = [];\r\n\r\n            // L·∫•y t·∫•t c·∫£ pricing IDs t·ª´ packages\r\n            packages.forEach((service: any) => {\r\n                service.packages.forEach((pkg: any) => {\r\n                    if (pkg._id) {\r\n                        pricingIds.push(pkg._id.toString());\r\n                    }\r\n                });\r\n            });\r\n\r\n            // C·∫≠p nh·∫≠t isUsed = true cho c√°c pricing ƒë√£ s·ª≠ d·ª•ng\r\n            if (pricingIds.length > 0) {\r\n                await ServicePricing.updateMany(\r\n                    { _id: { $in: pricingIds } },\r\n                    { isUsed: true },\r\n                );\r\n            }\r\n        }\r\n\r\n        // N·∫øu c√≥ surveyRef, c·∫≠p nh·∫≠t quotationNo trong survey\r\n        if (surveyRef) {\r\n            const ProjectSurvey = mongoose.models.PROJECT_SURVEY;\r\n            if (ProjectSurvey) {\r\n                await ProjectSurvey.findByIdAndUpdate(surveyRef, {\r\n                    quotationNo,\r\n                    status: \"quoted\",\r\n                    updatedAt: new Date(),\r\n                });\r\n            }\r\n        }\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            message: \"Th√™m b√°o gi√° th√†nh c√¥ng\",\r\n            data: quotation,\r\n        });\r\n    } catch (error: any) {\r\n        console.error(\"POST quotation error:\", error);\r\n\r\n        if (error.code === 11000) {\r\n            return NextResponse.json(\r\n                { success: false, message: \"S·ªë b√°o gi√° ƒë√£ t·ªìn t·∫°i\" },\r\n                { status: 400 },\r\n            );\r\n        }\r\n\r\n        return NextResponse.json(\r\n            { success: false, message: \"C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i.\" },\r\n            { status: 500 },\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AAEA;AACA;;;;;;AAEA,2CAA2C;AAC3C,eAAe,WAAW,OAAoB;IAC1C,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU;IAC5C,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,UAAU,IAAA,4HAAW,EAAC;IAC5B,IAAI,CAAC,SAAS,OAAO;IAErB,OAAO;AACX;AAGO,eAAe,IAAI,OAAoB;IAC1C,IAAI;QACA,MAAM,OAAO,MAAM,WAAW;QAC9B,IAAI,CAAC,MAAM;YACP,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,SAAS;YAA2B,GACtD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,IAAA,6HAAS;QACf,MAAM,mKAAQ,CAAC,UAAU,CAAC,EAAE;QAE5B,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC,WAAW;QAClD,MAAM,QAAQ,SAAS,aAAa,GAAG,CAAC,YAAY;QACpD,MAAM,SAAS,aAAa,GAAG,CAAC,aAAa;QAC7C,MAAM,SAAS,aAAa,GAAG,CAAC,aAAa;QAE7C,MAAM,QAAa,CAAC;QAEpB,IAAI,QAAQ;YACR,MAAM,GAAG,GAAG;gBACR;oBAAE,aAAa;wBAAE,QAAQ;wBAAQ,UAAU;oBAAI;gBAAE;gBACjD;oBAAE,UAAU;wBAAE,QAAQ;wBAAQ,UAAU;oBAAI;gBAAE;aACjD;QACL;QAEA,IAAI,QAAQ;YACR,MAAM,MAAM,GAAG;QACnB;QAEA,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI;QAE1B,MAAM,CAAC,YAAY,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC;YAC1C,gIAAS,CAAC,IAAI,CAAC,OACV,IAAI,CAAC;gBAAE,WAAW,CAAC;YAAE,GACrB,IAAI,CAAC,MACL,KAAK,CAAC;YACX,gIAAS,CAAC,cAAc,CAAC;SAC5B;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,MAAM;YACN,YAAY;gBACR;gBACA;gBACA;gBACA,OAAO,KAAK,IAAI,CAAC,QAAQ;YAC7B;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,SAAS;YAAO,SAAS;QAAmC,GAC9D;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAGO,eAAe,KAAK,OAAoB;IAC3C,IAAI;QACA,MAAM,OAAO,MAAM,WAAW;QAC9B,IAAI,CAAC,MAAM;YACP,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,SAAS;YAA2B,GACtD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,IAAA,6HAAS;QACf,MAAM,mKAAQ,CAAC,UAAU,CAAC,EAAE;QAE5B,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,GAC7D;QAEJ,IAAI,CAAC,UAAU;YACX,OAAO,gJAAY,CAAC,IAAI,CACpB;gBACI,SAAS;gBACT,SAAS;YACb,GACA;gBAAE,QAAQ;YAAI;QAEtB;QAEA,yBAAyB;QACzB,MAAM,gBAAgB,MAAM,gIAAS,CAAC,OAAO,GAAG,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE;QACrE,IAAI,cAAc;QAElB,IAAI,iBAAiB,cAAc,WAAW,EAAE;YAC5C,MAAM,aAAa,SACf,cAAc,WAAW,CAAC,OAAO,CAAC,MAAM;YAE5C,cAAc,CAAC,EAAE,EAAE,OAAO,aAAa,GAAG,QAAQ,CAAC,GAAG,MAAM;QAChE;QAEA,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,iBAAiB;QAC7B,QAAQ,GAAG,CAAC,aAAa;QAEzB,6CAA6C;QAC7C,IAAI,cAAc;QAClB,MAAM,oBACF,UAAU,IAAI,CAAC;YACX,MAAM,mBAAmB;gBACrB,GAAG,OAAO;gBACV,UAAU,QAAQ,QAAQ,CAAC,GAAG,CAAC,CAAC;oBAC5B,MAAM,aAAa,QAAQ,MAAM,GAAG,IAAI,cAAc;oBACtD,eAAe;oBACf,OAAO;wBACH,GAAG,GAAG;wBACN;oBACJ;gBACJ;YACJ;YACA,OAAO;QACX,MAAM,EAAE;QAEZ,QAAQ,GAAG,CAAC,uBAAuB;QACnC,QAAQ,GAAG,CAAC,2BAA2B;QAEvC,MAAM,YAAY,IAAI,gIAAS,CAAC;YAC5B;YACA;YACA;YACA;YACA,MAAM,OAAO,IAAI,KAAK,QAAQ,IAAI;YAClC,UAAU;YACV;YACA,YAAY;YACZ,QAAQ;YACR;YACA,WAAW,KAAK,QAAQ;QAC5B;QAEA,QAAQ,GAAG,CAAC,iCAAiC;QAC7C,QAAQ,GAAG,CAAC,mCAAmC,UAAU,QAAQ;QAEjE,MAAM,UAAU,IAAI;QAEpB,4DAA4D;QAC5D,MAAM,iBAAiB,mKAAQ,CAAC,MAAM,CAAC,cAAc;QACrD,IAAI,kBAAkB,YAAY,SAAS,MAAM,GAAG,GAAG;YACnD,MAAM,aAAuB,EAAE;YAE/B,qCAAqC;YACrC,SAAS,OAAO,CAAC,CAAC;gBACd,QAAQ,QAAQ,CAAC,OAAO,CAAC,CAAC;oBACtB,IAAI,IAAI,GAAG,EAAE;wBACT,WAAW,IAAI,CAAC,IAAI,GAAG,CAAC,QAAQ;oBACpC;gBACJ;YACJ;YAEA,oDAAoD;YACpD,IAAI,WAAW,MAAM,GAAG,GAAG;gBACvB,MAAM,eAAe,UAAU,CAC3B;oBAAE,KAAK;wBAAE,KAAK;oBAAW;gBAAE,GAC3B;oBAAE,QAAQ;gBAAK;YAEvB;QACJ;QAEA,sDAAsD;QACtD,IAAI,WAAW;YACX,MAAM,gBAAgB,mKAAQ,CAAC,MAAM,CAAC,cAAc;YACpD,IAAI,eAAe;gBACf,MAAM,cAAc,iBAAiB,CAAC,WAAW;oBAC7C;oBACA,QAAQ;oBACR,WAAW,IAAI;gBACnB;YACJ;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,SAAS;YACT,MAAM;QACV;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,yBAAyB;QAEvC,IAAI,MAAM,IAAI,KAAK,OAAO;YACtB,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,SAAS;YAAwB,GACnD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,SAAS;YAAO,SAAS;QAAmC,GAC9D;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}